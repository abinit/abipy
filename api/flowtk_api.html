

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>flowtk Package &mdash; abipy 0.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_style.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script> 
    
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iotools Package" href="iotools_api.html" />
    <link rel="prev" title="eph Package" href="eph_api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> abipy
          

          
          </a>

          
            
            
              <div class="version">
                0.9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphical_interface.html">Graphical interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow_gallery/index.html">Flow Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flows_howto.html">Flows How-To</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="abilab_api.html">abilab</a></li>
<li class="toctree-l2"><a class="reference internal" href="abio_api.html">abio Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_api.html">core Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_api.html">data Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dfpt_api.html">dfpt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="display_api.html">display Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dynamics_api.html">dynamics Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="electrons_api.html">electrons Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="eph_api.html">eph Package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">flowtk Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flowtk</span></code> Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.abiinspect"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiinspect</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.abiobjects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiobjects</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.abiphonopy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiphonopy</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.abitimer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abitimer</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.dfpt_works"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dfpt_works</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.effmass_works"><code class="xref py py-mod docutils literal notranslate"><span class="pre">effmass_works</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.eph_flows"><code class="xref py py-mod docutils literal notranslate"><span class="pre">eph_flows</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.events"><code class="xref py py-mod docutils literal notranslate"><span class="pre">events</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.flows"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flows</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.gruneisen"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gruneisen</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.gs_works"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gs_works</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.launcher"><code class="xref py py-mod docutils literal notranslate"><span class="pre">launcher</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.lumi_works"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lumi_works</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.mocks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mocks</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.netcdf"><code class="xref py py-mod docutils literal notranslate"><span class="pre">netcdf</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.nodes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nodes</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.pseudos"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pseudos</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.qadapters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qadapters</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.qha"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qha</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.qjobs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qjobs</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.qutils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qutils</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.tasks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tasks</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.works"><code class="xref py py-mod docutils literal notranslate"><span class="pre">works</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-abipy.flowtk.wrappers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wrappers</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iotools_api.html">iotools Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="panels_api.html">panels Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_api.html">tools Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="waves_api.html">waves Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="wannier90_api.html">wannier90 Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guide.html">Coding guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting AbiPy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">abipy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">API documentation</a> &raquo;</li>
        
      <li>flowtk Package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/flowtk_api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="flowtk-package">
<h1><a class="toc-backref" href="#contents">flowtk Package</a><a class="headerlink" href="#flowtk-package" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#flowtk-package" id="id2">flowtk Package</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flowtk</span></code> Package</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.abiinspect" id="id4"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiinspect</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.abiobjects" id="id5"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiobjects</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.abiphonopy" id="id6"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiphonopy</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.abitimer" id="id7"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abitimer</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.dfpt_works" id="id8"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dfpt_works</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.effmass_works" id="id9"><code class="xref py py-mod docutils literal notranslate"><span class="pre">effmass_works</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.eph_flows" id="id10"><code class="xref py py-mod docutils literal notranslate"><span class="pre">eph_flows</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.events" id="id11"><code class="xref py py-mod docutils literal notranslate"><span class="pre">events</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.flows" id="id12"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flows</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.gruneisen" id="id13"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gruneisen</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.gs_works" id="id14"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gs_works</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.launcher" id="id15"><code class="xref py py-mod docutils literal notranslate"><span class="pre">launcher</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.lumi_works" id="id16"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lumi_works</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.mocks" id="id17"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mocks</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.netcdf" id="id18"><code class="xref py py-mod docutils literal notranslate"><span class="pre">netcdf</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.nodes" id="id19"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nodes</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.pseudos" id="id20"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pseudos</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.qadapters" id="id21"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qadapters</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.qha" id="id22"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qha</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.qjobs" id="id23"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qjobs</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.qutils" id="id24"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qutils</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.tasks" id="id25"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tasks</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.utils" id="id26"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.works" id="id27"><code class="xref py py-mod docutils literal notranslate"><span class="pre">works</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.flowtk.wrappers" id="id28"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wrappers</span></code> Module</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flowtk</span></code> Package</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-abipy.flowtk"></span><dl class="py function">
<dt id="abipy.flowtk.flow_main">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.</span></code><code class="sig-name descname"><span class="pre">flow_main</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">main</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk.html#flow_main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flow_main" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator is used to decorate main functions producing <cite>Flows</cite>.
It adds the initialization of the logger and an argument parser that allows one to select
the loglevel, the workdir of the flow as well as the YAML file with the parameters of the <cite>TaskManager</cite>.
The main function shall have the signature:</p>
<blockquote>
<div><p>main(options)</p>
</div></blockquote>
<p>where options in the container with the command line options generated by <cite>ArgumentParser</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>main</strong> – main function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.build_flow_main_parser">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.</span></code><code class="sig-name descname"><span class="pre">build_flow_main_parser</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk.html#build_flow_main_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.build_flow_main_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and return the parser used in the abipy/data/runs scripts.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.abiinspect">
<span id="abiinspect-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiinspect</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.abiinspect" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-abipy.flowtk.abiobjects">
<span id="abiobjects-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiobjects</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.abiobjects" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="abipy.flowtk.abiobjects.LujForSpecie">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiobjects.</span></code><code class="sig-name descname"><span class="pre">LujForSpecie</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LujForSpecie"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LujForSpecie" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.abiobjects.LdauForSpecie</span></code></p>
<p>This object stores the value of l, u, j used for a single atomic specie.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.abiobjects.LdauParams">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiobjects.</span></code><code class="sig-name descname"><span class="pre">LdauParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">usepawu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LdauParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LdauParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object stores the parameters for LDA+U calculations with the PAW method
It facilitates the specification of the U-J parameters in the Abinit input file.
(see <cite>to_abivars</cite>). The U-J operator will be applied only on the atomic species
that have been selected by calling <cite>lui_for_symbol</cite>.</p>
<p>To setup the Abinit variables for a LDA+U calculation in NiO with a
U value of 5 eV applied on the nickel atoms:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">luj_params</span> <span class="o">=</span> <span class="n">LdauParams</span><span class="p">(</span><span class="n">usepawu</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">nio_structure</span><span class="p">)</span>
<span class="c1"># Apply U-J on Ni only.</span>
<span class="n">u</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">luj_params</span><span class="o">.</span><span class="n">luj_for_symbol</span><span class="p">(</span><span class="s2">&quot;Ni&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mf">0.1</span><span class="o">*</span><span class="n">u</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;eV&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">luj_params</span><span class="o">.</span><span class="n">to_abivars</span><span class="p">())</span>
</pre></div>
</div>
<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LdauParams.symbols_by_typat">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">symbols_by_typat</span></code><a class="headerlink" href="#abipy.flowtk.abiobjects.LdauParams.symbols_by_typat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LdauParams.luj_for_symbol">
<code class="sig-name descname"><span class="pre">luj_for_symbol</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eV'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LdauParams.luj_for_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LdauParams.luj_for_symbol" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> – Chemical symbol of the atoms on which LDA+U should be applied.</p></li>
<li><p><strong>l</strong> – Angular momentum.</p></li>
<li><p><strong>u</strong> – Value of U.</p></li>
<li><p><strong>j</strong> – Value of J.</p></li>
<li><p><strong>unit</strong> – Energy unit of U and J.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LdauParams.to_abivars">
<code class="sig-name descname"><span class="pre">to_abivars</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LdauParams.to_abivars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LdauParams.to_abivars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with the Abinit variables.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.abiobjects.LexxParams">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiobjects.</span></code><code class="sig-name descname"><span class="pre">LexxParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LexxParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LexxParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object stores the parameters for local exact exchange calculations with the PAW method
It facilitates the specification of the LEXX parameters in the Abinit input file.
(see <cite>to_abivars</cite>). The LEXX operator will be applied only on the atomic species
that have been selected by calling <cite>lexx_for_symbol</cite>.</p>
<p>To perform a LEXX calculation for NiO in which the LEXX is computed only for the l=2
channel of the nickel atoms:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lexx_params</span> <span class="o">=</span> <span class="n">LexxParams</span><span class="p">(</span><span class="n">nio_structure</span><span class="p">)</span>
<span class="n">lexx_params</span><span class="o">.</span><span class="n">lexx_for_symbol</span><span class="p">(</span><span class="s2">&quot;Ni&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">lexc_params</span><span class="o">.</span><span class="n">to_abivars</span><span class="p">())</span>
</pre></div>
</div>
<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LexxParams.symbols_by_typat">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">symbols_by_typat</span></code><a class="headerlink" href="#abipy.flowtk.abiobjects.LexxParams.symbols_by_typat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LexxParams.lexx_for_symbol">
<code class="sig-name descname"><span class="pre">lexx_for_symbol</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LexxParams.lexx_for_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LexxParams.lexx_for_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable LEXX for the given chemical symbol and the angular momentum l</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> – Chemical symbol of the atoms on which LEXX should be applied.</p></li>
<li><p><strong>l</strong> – Angular momentum.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiobjects.LexxParams.to_abivars">
<code class="sig-name descname"><span class="pre">to_abivars</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiobjects.html#LexxParams.to_abivars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiobjects.LexxParams.to_abivars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with the Abinit variables.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.abiphonopy">
<span id="abiphonopy-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abiphonopy</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.abiphonopy" title="Permalink to this headline">¶</a></h2>
<p>Interface between phonopy and abipy workflow model.</p>
<dl class="py function">
<dt id="abipy.flowtk.abiphonopy.atoms_from_structure">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiphonopy.</span></code><code class="sig-name descname"><span class="pre">atoms_from_structure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#atoms_from_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.atoms_from_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a pymatgen Structure into a phonopy Atoms object.</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.abiphonopy.structure_from_atoms">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiphonopy.</span></code><code class="sig-name descname"><span class="pre">structure_from_atoms</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">atoms</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#structure_from_atoms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.structure_from_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a phonopy Atoms object into a pymatgen Structure.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiphonopy.</span></code><code class="sig-name descname"><span class="pre">PhonopyWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work computes the inter-atomic force constants with phonopy.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.scdims">
<code class="sig-name descname"><span class="pre">scdims</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">3</span></em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.scdims" title="Permalink to this definition">¶</a></dt>
<dd><p>numpy arrays with the number of cells in the supercell along the three reduced directions</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.phonon">
<code class="sig-name descname"><span class="pre">phonon</span></code><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.phonon" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Phonopy</span></code> object used to construct the supercells with displaced atoms.</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.phonopy_tasks">
<code class="sig-name descname"><span class="pre">phonopy_tasks</span></code><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.phonopy_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <code class="xref py py-class docutils literal notranslate"><span class="pre">ScfTask</span></code>. Each task compute the forces in one perturbed supercell.</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.bec_tasks">
<code class="sig-name descname"><span class="pre">bec_tasks</span></code><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.bec_tasks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.cpdata2dst">
<code class="sig-name descname"><span class="pre">cpdata2dst</span></code><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.cpdata2dst" title="Permalink to this definition">¶</a></dt>
<dd><p>If not None, the work will copy the output results to the outdir of the flow
once all_ok is invoked. Note that cpdata2dst must be an absolute path.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.from_gs_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_gs_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gsinp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonopy_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displ_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyWork.from_gs_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.from_gs_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the work from an <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitInput</span></code> object representing a GS calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gsinp</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitInput</span></code> object representing a GS calculation in the initial unit cell.</p></li>
<li><p><strong>scdims</strong> – Number of unit cell replicas along the three reduced directions.</p></li>
<li><p><strong>phonopy_kwargs</strong> – (Optional) dictionary with arguments passed to Phonopy constructor.</p></li>
<li><p><strong>displ_kwargs</strong> – (Optional) dictionary with arguments passed to generate_displacements.</p></li>
</ul>
</dd>
</dl>
<p>Return: PhonopyWork instance.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiphonopy.PhonopyWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called once the <cite>Work</cite> is completed i.e. when all the tasks
have reached status S_OK. Here we get the forces from the output files, and
we call phonopy to compute the inter-atomic force constants.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.abiphonopy.PhonopyGruneisenWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.abiphonopy.</span></code><code class="sig-name descname"><span class="pre">PhonopyGruneisenWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyGruneisenWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyGruneisenWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work computes the Grüneisen parameters with phonopy. The workflow is as follows:</p>
<p>It is necessary to run three phonon calculations.
One is calculated at the equilibrium volume and the remaining two are calculated
at the slightly larger volume and smaller volume than the equilibrium volume.
The unitcells at these volumes have to be fully relaxed under the constraint of each volume.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.abiphonopy.PhonopyGruneisenWork.scdims">
<code class="sig-name descname"><span class="pre">scdims</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">3</span></em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyGruneisenWork.scdims" title="Permalink to this definition">¶</a></dt>
<dd><p>numpy arrays with the number of cells in the supercell along the three reduced directions.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiphonopy.PhonopyGruneisenWork.from_gs_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_gs_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gsinp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voldelta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonopy_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displ_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyGruneisenWork.from_gs_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyGruneisenWork.from_gs_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the work from an <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitInput</span></code> object representing a GS calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gsinp</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitInput</span></code> object representing a GS calculation in the initial unit cell.</p></li>
<li><p><strong>voldelta</strong> – Absolute increment for unit cell volume. The three volumes are:
[v0 - voldelta, v0, v0 + voldelta] where v0 is taken from gsinp.structure.</p></li>
<li><p><strong>scdims</strong> – Number of unit cell replicas along the three reduced directions.</p></li>
<li><p><strong>phonopy_kwargs</strong> – (Optional) dictionary with arguments passed to Phonopy constructor.</p></li>
<li><p><strong>displ_kwargs</strong> – (Optional) dictionary with arguments passed to generate_displacements.</p></li>
</ul>
</dd>
</dl>
<p>Return: <cite>PhonopyGruneisenWork</cite> instance.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiphonopy.PhonopyGruneisenWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyGruneisenWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyGruneisenWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called once the <cite>Work</cite> is completed i.e. when all the tasks
have reached status S_OK.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.abiphonopy.PhonopyGruneisenWork.add_phonopy_works_and_build">
<code class="sig-name descname"><span class="pre">add_phonopy_works_and_build</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/abiphonopy.html#PhonopyGruneisenWork.add_phonopy_works_and_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.abiphonopy.PhonopyGruneisenWork.add_phonopy_works_and_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Get relaxed structures from the tasks, build Phonopy works with supercells
constructed from the new structures, add them to the flow and build new directories.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.abitimer">
<span id="abitimer-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abitimer</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.abitimer" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-abipy.flowtk.dfpt_works">
<span id="dfpt-works-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dfpt_works</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.dfpt_works" title="Permalink to this headline">¶</a></h2>
<p>Work subclasses related to DFTP.</p>
<dl class="py class">
<dt id="abipy.flowtk.dfpt_works.ElasticWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.dfpt_works.</span></code><code class="sig-name descname"><span class="pre">ElasticWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/dfpt_works.html#ElasticWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.dfpt_works.ElasticWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.MergeDdb</span></code></p>
<p>This Work computes the elastic constants and (optionally) the piezoelectric tensor.
It consists of Response function calculations for:</p>
<blockquote>
<div><ul class="simple">
<li><p>rigid-atom elastic tensor</p></li>
<li><p>rigid-atom piezoelectric tensor</p></li>
<li><p>interatomic force constants at gamma</p></li>
<li><p>Born effective charges</p></li>
</ul>
</div></blockquote>
<p>The structure is assumed to be already relaxed</p>
<p>Create a <cite>Flow</cite> for phonon calculations. The flow has one works with:</p>
<blockquote>
<div><ul class="simple">
<li><p>1 GS Task</p></li>
<li><p>3 DDK Task</p></li>
<li><p>4 Phonon Tasks (Gamma point)</p></li>
<li><p>6 Elastic tasks (3 uniaxial + 3 shear strain)</p></li>
</ul>
</div></blockquote>
<p>The Phonon tasks and the elastic task will read the DDK produced at the beginning</p>
<dl class="py method">
<dt id="abipy.flowtk.dfpt_works.ElasticWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_relaxed_ion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_piezo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_dde</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerances</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">den_deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/dfpt_works.html#ElasticWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.dfpt_works.ElasticWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – </p></li>
<li><p><strong>with_relaxed_ion</strong> – </p></li>
<li><p><strong>with_piezo</strong> – </p></li>
<li><p><strong>with_dde</strong> – Compute electric field perturbations.</p></li>
<li><p><strong>tolerances</strong> – Dict of tolerances</p></li>
<li><p><strong>den_deps</strong> – </p></li>
<li><p><strong>manager</strong> – </p></li>
</ul>
</dd>
</dl>
<p>Similar to <cite>from_scf_task</cite>, the difference is that this method requires
an input for SCF calculation instead of a ScfTask. All the tasks (Scf + Phonon)
are packed in a single Work whereas in the previous case we usually have multiple works.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.dfpt_works.ElasticWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/dfpt_works.html#ElasticWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.dfpt_works.ElasticWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the tasks of the Work reach S_OK.
Ir runs <cite>mrgddb</cite> in sequential on the local machine to produce
the final DDB file in the outdir of the <cite>Work</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.dfpt_works.NscfDdksWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.dfpt_works.</span></code><code class="sig-name descname"><span class="pre">NscfDdksWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/dfpt_works.html#NscfDdksWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.dfpt_works.NscfDdksWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work requires a DEN file and computes the KS energies with a non self-consistent task
with a dense k-mesh and empty states.
This task is then followed by the computation of the DDK matrix elements with nstep = 1
(the first order change of the wavefunctions is not converged but we only need the matrix elements)
Mainly used to prepare optic calculations or other post-processing steps requiring the DDKs.</p>
<dl class="py method">
<dt id="abipy.flowtk.dfpt_works.NscfDdksWork.from_scf_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_ngkpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_shiftk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_nband</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/dfpt_works.html#NscfDdksWork.from_scf_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.dfpt_works.NscfDdksWork.from_scf_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Build NscfDdksWork from a scf_task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_task</strong> – GS task. Must produce the DEN file required for the NSCF run.</p></li>
<li><p><strong>ddk_ngkpt</strong> – k-mesh used for the NSCF run and the non self-consistent DDK tasks.</p></li>
<li><p><strong>ddk_shiftk</strong> – k-mesh shifts</p></li>
<li><p><strong>ddk_nband</strong> – Number of bands (occupied + empty) used in the NSCF task and the DDKs tasks.</p></li>
<li><p><strong>manager</strong> – TaskManager instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
<p>Return: NscfDdksWork instance</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.effmass_works">
<span id="effmass-works-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">effmass_works</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.effmass_works" title="Permalink to this headline">¶</a></h2>
<p>Work subclasses related to effective mass calculations.</p>
<dl class="py class">
<dt id="abipy.flowtk.effmass_works.EffMassLineWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.effmass_works.</span></code><code class="sig-name descname"><span class="pre">EffMassLineWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassLineWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassLineWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for the computation of effective masses via finite differences along a k-line.
Useful for cases such as NC+SOC where DFPT is not implemented or if one is interested
in non-parabolic behaviour.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-2a8bc3e63d82923a22de11c5f35e92d5b95ac54f.png" alt="Inheritance diagram of EffMassLineWork" usemap="#inheritancec27b1525f8" class="inheritance graphviz" /></div>
<map id="inheritancec27b1525f8" name="inheritancec27b1525f8">
<area shape="rect" id="node1" href="#abipy.flowtk.effmass_works.EffMassLineWork" target="_top" title="Work for the computation of effective masses via finite differences along a k&#45;line." alt="" coords="540,23,764,41"/>
<area shape="rect" id="node2" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="377,23,503,41"/>
<area shape="rect" id="node3" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,132,23"/>
</map><dl class="py method">
<dt id="abipy.flowtk.effmass_works.EffMassLineWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[[1,</span> <span class="pre">0,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">1]]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cart_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">den_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassLineWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassLineWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the Work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS-SCF calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF used as template to generate the other inputs.</p></li>
<li><p><strong>k0_list</strong> – List with the reduced coordinates of the k-points where effective masses are wanted.</p></li>
<li><p><strong>step</strong> – Step for finite difference in Angstrom^-1</p></li>
<li><p><strong>npts</strong> – Number of points sampled around each k-point for each direction.</p></li>
<li><p><strong>red_dirs</strong> – List of reduced directions used to generate the segments passing through the k-point</p></li>
<li><p><strong>cart_dirs</strong> – List of Cartesian directions used to generate the segments passing through the k-point</p></li>
<li><p><strong>den_node</strong> – Path to the DEN file or Task object producing a DEN file.
Can be used to avoid the initial SCF calculation if a DEN file is already available.
If None, a GS calculation is performed.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.effmass_works.EffMassDFPTWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.effmass_works.</span></code><code class="sig-name descname"><span class="pre">EffMassDFPTWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassDFPTWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassDFPTWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for the computation of effective masses with DFPT.
Requires explicit list of k-points and range of bands.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-988a2f7508abedfe1c8659fcc3a2f6e2585b3023.png" alt="Inheritance diagram of EffMassDFPTWork" usemap="#inheritanced09b391ff9" class="inheritance graphviz" /></div>
<map id="inheritanced09b391ff9" name="inheritanced09b391ff9">
<area shape="rect" id="node1" href="#abipy.flowtk.effmass_works.EffMassDFPTWork" target="_top" title="Work for the computation of effective masses with DFPT." alt="" coords="535,22,764,41"/>
<area shape="rect" id="node2" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="374,22,498,41"/>
<area shape="rect" id="node3" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,131,22"/>
</map><dl class="py method">
<dt id="abipy.flowtk.effmass_works.EffMassDFPTWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">effmass_bands_f90</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngfft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">den_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassDFPTWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassDFPTWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the Work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS-SCF calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF used as template to generate the other inputs.</p></li>
<li><p><strong>k0_list</strong> – List with the reduced coordinates of the k-points where effective masses are wanted.</p></li>
<li><p><strong>effmass_bands_f90</strong> – (nkpt, 2) array with band range for effmas computation.
WARNING: Assumes Fortran convention with indices starting from 1.</p></li>
<li><p><strong>ngfft</strong> – FFT divisions (3 integers). Used to enforce the same FFT mesh in the NSCF run as the one used for GS.</p></li>
<li><p><strong>den_node</strong> – Path to the DEN file or Task object producing a DEN file.
Can be used to avoid the initial SCF calculation if a DEN file is already available.
If None, a GS calculation is performed.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.effmass_works.EffMassAutoDFPTWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.effmass_works.</span></code><code class="sig-name descname"><span class="pre">EffMassAutoDFPTWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassAutoDFPTWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassAutoDFPTWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for the automatic computation of effective masses with DFPT.
Band extrema are automatically detected by performing a NSCF calculation
along a high-symmetry k-path with ndivsm.
Requires more computation that EffMassWork since input variables (kpoints and band range)
are computed at runtime.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-250d9f31147161f246d2e72038c234292cec2b6c.png" alt="Inheritance diagram of EffMassAutoDFPTWork" usemap="#inheritance7fd6c2ea68" class="inheritance graphviz" /></div>
<map id="inheritance7fd6c2ea68" name="inheritance7fd6c2ea68">
<area shape="rect" id="node1" href="#abipy.flowtk.effmass_works.EffMassAutoDFPTWork" target="_top" title="Work for the automatic computation of effective masses with DFPT." alt="" coords="521,22,764,40"/>
<area shape="rect" id="node2" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="364,22,485,40"/>
<area shape="rect" id="node3" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,127,22"/>
</map><dl class="py method">
<dt id="abipy.flowtk.effmass_works.EffMassAutoDFPTWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolwfr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">den_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassAutoDFPTWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassAutoDFPTWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the Work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS-SCF calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF used as template to generate the other inputs.</p></li>
<li><p><strong>ndivsm</strong> – if &gt; 0, it’s the number of divisions for the smallest segment of the path (Abinit variable).
if &lt; 0, it’s interpreted as the pymatgen <cite>line_density</cite> parameter in which the number of points
in the segment is proportional to its length. Typical value: -20.
This option is the recommended one if the k-path contains two high symmetry k-points that are very close
as ndivsm &gt; 0 may produce a very large number of wavevectors.</p></li>
<li><p><strong>tolwfr</strong> – Tolerance on residuals for NSCF calculation</p></li>
<li><p><strong>den_node</strong> – Path to the DEN file or Task object producing a DEN file.
Can be used to avoid the initial SCF calculation if a DEN file is already available.
If None, a GS calculation is performed.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.effmass_works.EffMassAutoDFPTWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#EffMassAutoDFPTWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.EffMassAutoDFPTWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called once the <cite>Work</cite> is completed i.e. when all tasks have reached status S_OK.
Here, we read the band structure from GSR to find the position of the band edges and use these values
to generate a new work for effective masses with DFPT.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.effmass_works.FrohlichZPRFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.effmass_works.</span></code><code class="sig-name descname"><span class="pre">FrohlichZPRFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#FrohlichZPRFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.FrohlichZPRFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-73e2ae60116e80469ac8e68f69e0f2b605746774.png" alt="Inheritance diagram of FrohlichZPRFlow" usemap="#inheritanced405d366f0" class="inheritance graphviz" /></div>
<map id="inheritanced405d366f0" name="inheritanced405d366f0">
<area shape="rect" id="node1" href="#abipy.flowtk.effmass_works.FrohlichZPRFlow" target="_top" title=".. rubric:: Inheritance Diagram" alt="" coords="476,53,763,77"/>
<area shape="rect" id="node2" href="#abipy.flowtk.flows.Flow" target="_top" title="This object is a container of work. Its main task is managing the" alt="" coords="274,53,428,77"/>
<area shape="rect" id="node3" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="33,5,198,29"/>
</map><dl class="py method">
<dt id="abipy.flowtk.effmass_works.FrohlichZPRFlow.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddb_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolwfr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#FrohlichZPRFlow.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.FrohlichZPRFlow.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the Work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS-SCF calculation.
Final results are stored in the “zprfrohl_results.json” in the outdata directory of the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory.</p></li>
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF used as template to generate the other inputs.</p></li>
<li><p><strong>ddb_node</strong> – Path to an external DDB file that is used to avoid the calculation of BECS/eps_inf and phonons.
If None, a DFPT calculation is automatically performed by the flow.</p></li>
<li><p><strong>ndivsm</strong> – Number of divisions used to sample the smallest segment of the k-path.</p></li>
<li><p><strong>tolwfr</strong> – Tolerance on residuals for NSCF calculation</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> instance. Use default if None.</p></li>
<li><p><strong>metadata</strong> – Dictionary with metadata addeded to the final JSON file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.effmass_works.FrohlichZPRFlow.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#FrohlichZPRFlow.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.FrohlichZPRFlow.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the works in the flow have reached S_OK.
This method shall return True if the calculation is completed or
False if the execution should continue due to side-effects such as adding a new work to the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.effmass_works.FrohlichZPRFlow.finalize">
<code class="sig-name descname"><span class="pre">finalize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/effmass_works.html#FrohlichZPRFlow.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.effmass_works.FrohlichZPRFlow.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when the flow is completed.
Here we write the final results in the “zprfrohl_results.json” file
in the <cite>outdata</cite> directory of the flow</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.eph_flows">
<span id="eph-flows-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">eph_flows</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.eph_flows" title="Permalink to this headline">¶</a></h2>
<p>Flows for electron-phonon calculations (high-level interface)</p>
<dl class="py class">
<dt id="abipy.flowtk.eph_flows.EphPotFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.eph_flows.</span></code><code class="sig-name descname"><span class="pre">EphPotFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/eph_flows.html#EphPotFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.eph_flows.EphPotFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<p>This flow computes the e-ph scattering potentials on a q-mesh defined by ngqpt
and a list of q-points (usually a q-path) specified by the user.
The DFPT potentials on the q-mesh are merged in the DVDB located in the outdata
of the second work while the DFPT potentials on the q-path are merged in the DVDB
located in the outdata of the third work.
These DVDB files are then passed to the EPH code to compute the average over the unit
cell of the periodic part of the scattering potentials as a function of q.
Results are stored in the V1QAVG.nc files of the outdata of the tasks in the fourth work.</p>
<dl class="py method">
<dt id="abipy.flowtk.eph_flows.EphPotFlow.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qbounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepgkk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/eph_flows.html#EphPotFlow.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.eph_flows.EphPotFlow.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the flow from an input file representing a GS calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory.</p></li>
<li><p><strong>scf_input</strong> – Input for the GS SCF run.</p></li>
<li><p><strong>ngqpt</strong> – 3 integers defining the q-mesh.</p></li>
<li><p><strong>qbounds</strong> – List of boundaries defining the q-path used for the computation of the GKQ files.
The q-path is automatically generated using <cite>ndivsm</cite> and the reciprocal-space metric.
If <cite>ndivsm</cite> is 0, the code assumes that <cite>qbounds</cite> contains the full list of q-points
and no pre-processing is performed.</p></li>
<li><p><strong>ndivsm</strong> – Number of points in the smallest segment of the path defined by <cite>qbounds</cite>.
Use 0 to pass list of q-points.</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>ddk_tolerance</strong> – dict {“varname”: value} with the tolerance used in the DDK run if <cite>with_becs</cite>.</p></li>
<li><p><strong>prepgkk</strong> – 1 to activate computation of all 3 * natom perts (debugging option).</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.eph_flows.GkqPathFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.eph_flows.</span></code><code class="sig-name descname"><span class="pre">GkqPathFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/eph_flows.html#GkqPathFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.eph_flows.GkqPathFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<p>This flow computes the gkq e-ph matrix elements &lt;k+q|Delta V_q|k&gt; for a list of q-points (usually a q-path).
The results are stored in the GKQ.nc files for the different q-points. These files can be used to analyze the behaviour
of the e-ph matrix elements as a function of qpts with the the objects provided by the abipy.eph.gkq module.
It is also possible to compute the e-ph matrix elements using the interpolated DFPT potentials
if test_ft_interpolation is set to True.</p>
<dl class="py method">
<dt id="abipy.flowtk.eph_flows.GkqPathFlow.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qbounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_ft_interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepgkk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/eph_flows.html#GkqPathFlow.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.eph_flows.GkqPathFlow.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the flow from an input file representing a GS calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory.</p></li>
<li><p><strong>scf_input</strong> – Input for the GS SCF run.</p></li>
<li><p><strong>ngqpt</strong> – 3 integers defining the q-mesh.</p></li>
<li><p><strong>qbounds</strong> – List of boundaries defining the q-path used for the computation of the GKQ files.
The q-path is automatically generated using <cite>ndivsm</cite> and the reciprocal-space metric.
If <cite>ndivsm</cite> is 0, the code assumes that <cite>qbounds</cite> contains the full list of q-points
and no pre-processing is performed.</p></li>
<li><p><strong>ndivsm</strong> – Number of points in the smallest segment of the path defined by <cite>qbounds</cite>.
Use 0 to pass list of q-points.</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>ddk_tolerance</strong> – dict {“varname”: value} with the tolerance used in the DDK run if <cite>with_becs</cite>.</p></li>
<li><p><strong>test_ft_interpolation</strong> – True to add an extra Work in which the GKQ files are computed
using the interpolated DFPT potentials and the q-mesh defined by <cite>ngqpt</cite>.
The quality of the interpolation depends on the convergence of the BECS, epsinf and <cite>ngqpt</cite>.</p></li>
<li><p><strong>prepgkk</strong> – 1 to activate computation of all 3 * natom perts (debugging option).</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.events">
<span id="events-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">events</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.events" title="Permalink to this headline">¶</a></h2>
<p>This module defines the events signaled by abinit during the execution. It also
provides a parser to extract these events form the main output file and the log file.</p>
<dl class="py class">
<dt id="abipy.flowtk.events.EventsParser">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">EventsParser</span></code><a class="reference internal" href="../_modules/abipy/flowtk/events.html#EventsParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.EventsParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Parses the output or the log file produced by ABINIT and extract the list of events.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.EventsParser.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.events.EventsParser.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.EventsParserError</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.EventsParser.parse">
<code class="sig-name descname"><span class="pre">parse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#EventsParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.EventsParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the given file. Return <code class="xref py py-class docutils literal notranslate"><span class="pre">EventReport</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.EventsParser.report_exception">
<code class="sig-name descname"><span class="pre">report_exception</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#EventsParser.report_exception"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.EventsParser.report_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used when self.parser raises an Exception so that
we can report a customized <code class="xref py py-class docutils literal notranslate"><span class="pre">EventReport</span></code> object with info the exception.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.events.get_event_handler_classes">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">get_event_handler_classes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">categories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#get_event_handler_classes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.get_event_handler_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of handler classes.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.ScfConvergenceWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">ScfConvergenceWarning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#ScfConvergenceWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.ScfConvergenceWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.AbinitCriticalWarning</span></code></p>
<p>Warning raised when the GS SCF cycle did not converge.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.ScfConvergenceWarning.yaml_tag">
<code class="sig-name descname"><span class="pre">yaml_tag</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'!ScfConvergenceWarning'</span></em><a class="headerlink" href="#abipy.flowtk.events.ScfConvergenceWarning.yaml_tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.NscfConvergenceWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">NscfConvergenceWarning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#NscfConvergenceWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.NscfConvergenceWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.AbinitCriticalWarning</span></code></p>
<p>Warning raised when the GS NSCF cycle did not converge.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.NscfConvergenceWarning.yaml_tag">
<code class="sig-name descname"><span class="pre">yaml_tag</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'!NscfConvergenceWarning'</span></em><a class="headerlink" href="#abipy.flowtk.events.NscfConvergenceWarning.yaml_tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.RelaxConvergenceWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">RelaxConvergenceWarning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#RelaxConvergenceWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.RelaxConvergenceWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.AbinitCriticalWarning</span></code></p>
<p>Warning raised when the structural relaxation did not converge.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.RelaxConvergenceWarning.yaml_tag">
<code class="sig-name descname"><span class="pre">yaml_tag</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'!RelaxConvergenceWarning'</span></em><a class="headerlink" href="#abipy.flowtk.events.RelaxConvergenceWarning.yaml_tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.Correction">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">Correction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#Correction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.Correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<dl class="py method">
<dt id="abipy.flowtk.events.Correction.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#Correction.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.Correction.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.Correction.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#Correction.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.Correction.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Dict representation.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSONable class.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.DilatmxError">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">DilatmxError</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.AbinitError</span></code></p>
<p>This Error occurs in variable cell calculations when the increase in the
unit cell volume is too large.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.DilatmxError.yaml_tag">
<code class="sig-name descname"><span class="pre">yaml_tag</span></code><em class="property"><span class="pre">:</span> <span class="pre">Any</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'!DilatmxError'</span></em><a class="headerlink" href="#abipy.flowtk.events.DilatmxError.yaml_tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.events.DilatmxErrorHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.events.</span></code><code class="sig-name descname"><span class="pre">DilatmxErrorHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_dilatmx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxErrorHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.ErrorHandler</span></code></p>
<p>Handle DilatmxError. Abinit produces a netcdf file with the last structure before aborting
The handler changes the structure in the input with the last configuration and modify the value of dilatmx.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.event_class">
<code class="sig-name descname"><span class="pre">event_class</span></code><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.event_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.flowtk.events.DilatmxError" title="abipy.flowtk.events.DilatmxError"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.events.DilatmxError</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.can_change_physics">
<code class="sig-name descname"><span class="pre">can_change_physics</span></code><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.can_change_physics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxErrorHandler.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic implementation of as_dict if __init__ has no arguments. Subclasses may need to overwrite.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxErrorHandler.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic implementation of from_dict if __init__ has no arguments. Subclasses may need to overwrite.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.handle_task_event">
<code class="sig-name descname"><span class="pre">handle_task_event</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxErrorHandler.handle_task_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.handle_task_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to handle Abinit events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> object.</p></li>
<li><p><strong>event</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitEvent</span></code> found in the log file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if no action has been applied, 1 if the problem has been fixed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.events.DilatmxErrorHandler.handle_input_event">
<code class="sig-name descname"><span class="pre">handle_input_event</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abiinput</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/events.html#DilatmxErrorHandler.handle_input_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.events.DilatmxErrorHandler.handle_input_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.flows">
<span id="flows-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">flows</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.flows" title="Permalink to this headline">¶</a></h2>
<p>A Flow is a container for Works, and works consist of tasks.
Flows are the final objects that can be dumped directly to a pickle file on disk
Flows are executed using abirun (abipy).</p>
<dl class="py class">
<dt id="abipy.flowtk.flows.Flow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.flows.</span></code><code class="sig-name descname"><span class="pre">Flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.NodeContainer</span></code>, <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>This object is a container of work. Its main task is managing the
possible inter-dependencies among the work and the creation of
dynamic workflows that are generated by callbacks registered by the user.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.creation_date">
<code class="sig-name descname"><span class="pre">creation_date</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.creation_date" title="Permalink to this definition">¶</a></dt>
<dd><p>String with the creation_date</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.pickle_protocol">
<code class="sig-name descname"><span class="pre">pickle_protocol</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Protocol for Pickle database (default: -1 i.e. latest protocol)</p>
</dd></dl>

<p>Important methods for constructing flows:</p>
<blockquote>
<div><p>register_work: register (add) a work to the flow
resister_task: register a work that contains only this task returns the work
allocate: propagate the workdir and manager of the flow to all the registered tasks
build:
build_and_pickle_dump:</p>
</div></blockquote>
<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.VERSION">
<code class="sig-name descname"><span class="pre">VERSION</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'0.1'</span></em><a class="headerlink" href="#abipy.flowtk.flows.Flow.VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.PICKLE_FNAME">
<code class="sig-name descname"><span class="pre">PICKLE_FNAME</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'__AbinitFlow__.pickle'</span></em><a class="headerlink" href="#abipy.flowtk.flows.Flow.PICKLE_FNAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.FlowError</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.flows.Flow.Results">
<code class="sig-name descname"><span class="pre">Results</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.Results" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.FlowResults</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.from_inputs">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_inputs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">workdir</span></em>, <em class="sig-param"><span class="pre">inputs</span></em>, <em class="sig-param"><span class="pre">manager=None</span></em>, <em class="sig-param"><span class="pre">pickle_protocol=-1</span></em>, <em class="sig-param"><span class="pre">task_class=&lt;class</span> <span class="pre">'abipy.flowtk.tasks.ScfTask'&gt;</span></em>, <em class="sig-param"><span class="pre">work_class=&lt;class</span> <span class="pre">'abipy.flowtk.works.Work'&gt;</span></em>, <em class="sig-param"><span class="pre">remove=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.from_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.from_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a simple flow from a list of inputs. The flow contains a single Work with
tasks whose class is given by task_class.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t use this interface if you have dependencies among the tasks.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – String specifying the directory where the works will be produced.</p></li>
<li><p><strong>inputs</strong> – List of inputs.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object responsible for the submission of the jobs.
If manager is None, the object is initialized from the yaml file
located either in the working directory or in the user configuration dir.</p></li>
<li><p><strong>pickle_protocol</strong> – Pickle protocol version used for saving the status of the object.
-1 denotes the latest version supported by the python interpreter.</p></li>
<li><p><strong>task_class</strong> – The class of the <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>.</p></li>
<li><p><strong>work_class</strong> – The class of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p></li>
<li><p><strong>remove</strong> – attempt to remove working directory <cite>workdir</cite> if directory already exists.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.as_flow">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">as_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.as_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.as_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into a Flow. Accepts filepath, dict, or Flow object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON serialization, note that we only need to save
a string with the working directory since the object will be
reconstructed from the pickle file located in workdir</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.to_dict">
<code class="sig-name descname"><span class="pre">to_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.flowtk.flows.Flow.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON serialization, note that we only need to save
a string with the working directory since the object will be
reconstructed from the pickle file located in workdir</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct the flow from the pickle file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.temporary_flow">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">temporary_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.temporary_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.temporary_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Flow in a temporary directory. Useful for unit tests.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.set_workdir">
<code class="sig-name descname"><span class="pre">set_workdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chroot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.set_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.set_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the working directory. Cannot be set more than once unless chroot is True</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.reload">
<code class="sig-name descname"><span class="pre">reload</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.reload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload the flow from the pickle file. Used when we are monitoring the flow
executed by the scheduler. In this case, indeed, the flow might have been changed
by the scheduler and we have to reload the new flow in memory.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pickle_load">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">pickle_load</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectator_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.pickle_load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the object from a pickle file and performs initial setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> – Filename or directory name. It filepath is a directory, we
scan the directory tree starting from filepath and we
read the first pickle database. Raise RuntimeError if multiple
databases are found.</p></li>
<li><p><strong>spectator_mode</strong> – If True, the nodes of the flow are not connected by signals.
This option is usually used when we want to read a flow
in read-only mode and we want to avoid callbacks that can change the flow.</p></li>
<li><p><strong>remove_lock</strong> – True to remove the file lock if any (use it carefully).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.from_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectator_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_lock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.flowtk.flows.Flow.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the object from a pickle file and performs initial setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> – Filename or directory name. It filepath is a directory, we
scan the directory tree starting from filepath and we
read the first pickle database. Raise RuntimeError if multiple
databases are found.</p></li>
<li><p><strong>spectator_mode</strong> – If True, the nodes of the flow are not connected by signals.
This option is usually used when we want to read a flow
in read-only mode and we want to avoid callbacks that can change the flow.</p></li>
<li><p><strong>remove_lock</strong> – True to remove the file lock if any (use it carefully).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pickle_loads">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">pickle_loads</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.pickle_loads"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct the flow from a string.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_panel">
<code class="sig-name descname"><span class="pre">get_panel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_panel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_panel" title="Permalink to this definition">¶</a></dt>
<dd><p>Build panel with widgets to interact with the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> either in a notebook or in panel app.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.set_pyfile">
<code class="sig-name descname"><span class="pre">set_pyfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pyfile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.set_pyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.set_pyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the path of the python script used to generate the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pyfile">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pyfile</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.pyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the python script used to generate the flow. Set by <cite>set_pyfile</cite></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pid_file">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pid_file</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.pid_file" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the pid file created by PyFlowScheduler.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.has_scheduler">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_scheduler</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.has_scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>True if there’s a scheduler running the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.check_pid_file">
<code class="sig-name descname"><span class="pre">check_pid_file</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.check_pid_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.check_pid_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if we are already running the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> with a <code class="xref py py-class docutils literal notranslate"><span class="pre">PyFlowScheduler</span></code>.
Raises: Flow.Error if the pid file of the scheduler exists.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pickle_file">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pickle_file</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_file" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the pickle file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.mongo_id">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">mongo_id</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.mongo_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.validate_json_schema">
<code class="sig-name descname"><span class="pre">validate_json_schema</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.validate_json_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.validate_json_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the JSON schema. Return list of errors.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_mongo_info">
<code class="sig-name descname"><span class="pre">get_mongo_info</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_mongo_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_mongo_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a JSON dictionary with information on the flow.
Mainly used for constructing the info section in <cite>FlowEntry</cite>.
The default implementation is empty. Subclasses must implement it</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.mongo_assimilate">
<code class="sig-name descname"><span class="pre">mongo_assimilate</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.mongo_assimilate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.mongo_assimilate" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by client code when the flow is completed
Return a JSON dictionary with the most important results produced
by the flow. The default implementation is empty. Subclasses must implement it</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.works">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">works</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.works" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> objects contained in self..</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.all_ok">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">all_ok</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>True if all the tasks in works have reached <cite>S_OK</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.num_tasks">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_tasks</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.num_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of tasks</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.errored_tasks">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">errored_tasks</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.errored_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>List of errored tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.num_errored_tasks">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_errored_tasks</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.num_errored_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of tasks whose status is <cite>S_ERROR</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.unconverged_tasks">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">unconverged_tasks</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.unconverged_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>List of unconverged tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.num_unconverged_tasks">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_unconverged_tasks</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.num_unconverged_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of tasks whose status is <cite>S_UNCONVERGED</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.status_counter">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status_counter</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.status_counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code> object that counts the number of tasks with
given status (use the string representation of the status as key).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.ncores_reserved">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ncores_reserved</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.ncores_reserved" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of cores reserved in this moment.
A core is reserved if the task is not running but
we have submitted the task to the queue manager.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.ncores_allocated">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ncores_allocated</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.ncores_allocated" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of cores allocated in this moment.
A core is allocated if it’s running a task or if we have
submitted a task to the queue manager but the job is still pending.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.ncores_used">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ncores_used</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.ncores_used" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of cores used in this moment.
A core is used if there’s a job that is running on it.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.has_chrooted">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_chrooted</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.has_chrooted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string that evaluates to True if we have changed
the workdir for visualization purposes e.g. we are using sshfs.
to mount the remote directory where the <cite>Flow</cite> is located.
The string gives the previous workdir of the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.chroot">
<code class="sig-name descname"><span class="pre">chroot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.chroot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.chroot" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the workir of the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a>. Mainly used for
allowing the user to open the GUI on the local host
and access the flow from remote via sshfs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this method will make the flow go in read-only mode.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.groupby_status">
<code class="sig-name descname"><span class="pre">groupby_status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.groupby_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.groupby_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a ordered dictionary mapping the task status to
the list of named tuples (task, work_index, task_index).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.groupby_task_class">
<code class="sig-name descname"><span class="pre">groupby_task_class</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.groupby_task_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.groupby_task_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary mapping the task class to the list of tasks in the flow</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.iflat_nodes">
<code class="sig-name descname"><span class="pre">iflat_nodes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'=='</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.iflat_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.iflat_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generators that produces a flat sequence of nodes.
if status is not None, only the tasks with the specified status are selected.
nids is an optional list of node identifiers used to filter the nodes.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.node_from_nid">
<code class="sig-name descname"><span class="pre">node_from_nid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.node_from_nid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.node_from_nid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the node in the <cite>Flow</cite> with the given <cite>nid</cite> identifier</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.iflat_tasks_wti">
<code class="sig-name descname"><span class="pre">iflat_tasks_wti</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'=='</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.iflat_tasks_wti"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.iflat_tasks_wti" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator to iterate over all the tasks of the <cite>Flow</cite>.
:Yields: (task, work_index, task_index)</p>
<p>If status is not None, only the tasks whose status satisfies
the condition (task.status op status) are selected
status can be either one of the flags defined in the <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> class
(e.g Task.S_OK) or a string e.g “S_OK”
nids is an optional list of node identifiers used to filter the tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.iflat_tasks">
<code class="sig-name descname"><span class="pre">iflat_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'=='</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.iflat_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.iflat_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator to iterate over all the tasks of the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a>.</p>
<p>If status is not None, only the tasks whose status satisfies
the condition (task.status op status) are selected
status can be either one of the flags defined in the <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> class
(e.g Task.S_OK) or a string e.g “S_OK”
nids is an optional list of node identifiers used to filter the tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.abivalidate_inputs">
<code class="sig-name descname"><span class="pre">abivalidate_inputs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.abivalidate_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.abivalidate_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Run ABINIT in dry mode to validate all the inputs of the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>(isok, tuples)</p>
<p>isok is True if all inputs are ok.
tuples is List of <cite>namedtuple</cite> objects, one for each task in the flow.
Each namedtuple has the following attributes:</p>
<blockquote>
<div><p>retcode: Return code. 0 if OK.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><strong>RuntimeError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.check_dependencies">
<code class="sig-name descname"><span class="pre">check_dependencies</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.check_dependencies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.check_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the dependencies of the nodes for possible deadlocks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.find_deadlocks">
<code class="sig-name descname"><span class="pre">find_deadlocks</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.find_deadlocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.find_deadlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>This function detects deadlocks</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>deadlocks, runnables, running</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>named tuple with the tasks grouped in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.check_status">
<code class="sig-name descname"><span class="pre">check_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.check_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of the works in self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show</strong> – True to show the status of the flow.</p></li>
<li><p><strong>kwargs</strong> – keyword arguments passed to show_status</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> i.e. the minimum of the status of its tasks and its works</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.fix_abicritical">
<code class="sig-name descname"><span class="pre">fix_abicritical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.fix_abicritical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.fix_abicritical" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tries to fix critical events originating from ABINIT.
Returns the number of tasks that have been fixed.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.fix_queue_critical">
<code class="sig-name descname"><span class="pre">fix_queue_critical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.fix_queue_critical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.fix_queue_critical" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tries to fix critical events originating from the queue submission system.</p>
<p>Returns the number of tasks that have been fixed.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_info">
<code class="sig-name descname"><span class="pre">show_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print info on the flow i.e. total number of tasks, works, tasks grouped by class.</p>
<p class="rubric">Example</p>
<p>Task Class      Number
————  ——–
ScfTask              1
NscfTask             1
ScrTask              2
SigmaTask            6</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.compare_abivars">
<code class="sig-name descname"><span class="pre">compare_abivars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">varnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wslice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.compare_abivars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.compare_abivars" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the input of the tasks to the given stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>varnames</strong> – List of Abinit variables. If not None, only the variable in varnames
are selected and printed.</p></li>
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>printout</strong> – True to print dataframe.</p></li>
<li><p><strong>with_colors</strong> – True if task status should be colored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_dims_dataframe">
<code class="sig-name descname"><span class="pre">get_dims_dataframe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_dims_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_dims_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze output files produced by the tasks. Print pandas DataFrame with dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>printout</strong> – True to print dataframe.</p></li>
<li><p><strong>with_colors</strong> – True if task status should be colored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.compare_structures">
<code class="sig-name descname"><span class="pre">compare_structures</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_spglib</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'io'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.compare_structures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.compare_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze structures of the tasks (input and output structures if it’s a relaxation task.
Print pandas DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>with_spglib</strong> – If True, spglib is invoked to get the spacegroup symbol and number</p></li>
<li><p><strong>what</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – “i” for input structures, “o” for output structures.</p></li>
<li><p><strong>precision</strong> – Floating point output precision (number of significant digits).
This is only a suggestion</p></li>
<li><p><strong>printout</strong> – True to print dataframe.</p></li>
<li><p><strong>with_colors</strong> – True if task status should be colored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.compare_ebands">
<code class="sig-name descname"><span class="pre">compare_ebands</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_ibz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_spglib</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.compare_ebands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.compare_ebands" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze electron bands produced by the tasks.
Return pandas DataFrame and <a class="reference internal" href="electrons_api.html#abipy.electrons.ebands.ElectronBandsPlotter" title="abipy.electrons.ebands.ElectronBandsPlotter"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.electrons.ebands.ElectronBandsPlotter</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers. By default, all nodes are shown</p></li>
<li><p><strong>with_path</strong> – Select files with ebands along k-path.</p></li>
<li><p><strong>with_ibz</strong> – Select files with ebands in the IBZ.</p></li>
<li><p><strong>with_spglib</strong> – If True, spglib is invoked to get the spacegroup symbol and number</p></li>
<li><p><strong>precision</strong> – Floating point output precision (number of significant digits).
This is only a suggestion</p></li>
<li><p><strong>printout</strong> – True to print dataframe.</p></li>
<li><p><strong>with_colors</strong> – True if task status should be colored.</p></li>
</ul>
</dd>
</dl>
<p>Return: (df, ebands_plotter)</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.compare_hist">
<code class="sig-name descname"><span class="pre">compare_hist</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_spglib</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.compare_hist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.compare_hist" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze HIST nc files produced by the tasks. Print pandas DataFrame with final results.
Return: (df, hist_plotter)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>with_spglib</strong> – If True, spglib is invoked to get the spacegroup symbol and number</p></li>
<li><p><strong>precision</strong> – Floating point output precision (number of significant digits).
This is only a suggestion</p></li>
<li><p><strong>printout</strong> – True to print dataframe.</p></li>
<li><p><strong>with_colors</strong> – True if task status should be colored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_summary">
<code class="sig-name descname"><span class="pre">show_summary</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a short summary with the status of the flow and a counter task_status –&gt; number_of_tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stream</strong> – File-like object, Default: sys.stdout</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Status       Count
———  ——-
Completed       10</p>
<p>&lt;Flow, node_id=27163, workdir=flow_gwconv_ecuteps&gt;, num_tasks=10, all_ok=True</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_status">
<code class="sig-name descname"><span class="pre">show_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Report the status of the works and the status of the different tasks on the specified stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – File-like object, Default: sys.stdout</p></li>
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>verbose</strong> – Verbosity level (default 0). &gt; 0 to show only the works that are not finalized.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_events">
<code class="sig-name descname"><span class="pre">show_events</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">status=None</span></em>, <em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the Abinit events (ERRORS, WARNIING, COMMENTS) to stdout</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> – if not None, only the tasks with this status are select</p></li>
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>stream</strong> – File-like object, Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_corrections">
<code class="sig-name descname"><span class="pre">show_corrections</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">status=None</span></em>, <em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_corrections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_corrections" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the corrections applied to the flow at run-time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> – if not None, only the tasks with this status are select.</p></li>
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>stream</strong> – File-like object, Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
<p>Return: The number of corrections found.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_history">
<code class="sig-name descname"><span class="pre">show_history</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">status=None</span></em>, <em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">full_history=False</span></em>, <em class="sig-param"><span class="pre">metadata=False</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the history of the flow to stream</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> – if not None, only the tasks with this status are select</p></li>
<li><p><strong>full_history</strong> – Print full info set, including nodes with an empty history.</p></li>
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>metadata</strong> – print history metadata (experimental)</p></li>
<li><p><strong>stream</strong> – File-like object, Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_inputs">
<code class="sig-name descname"><span class="pre">show_inputs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">varnames=None</span></em>, <em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">wslice=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the input of the tasks to the given stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>varnames</strong> – List of Abinit variables. If not None, only the variable in varnames
are selected and printed.</p></li>
<li><p><strong>nids</strong> – List of node identifiers. By defaults all nodes are shown</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>stream</strong> – File-like object, Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.listext">
<code class="sig-name descname"><span class="pre">listext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ext</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.listext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.listext" title="Permalink to this definition">¶</a></dt>
<dd><p>Print to the given <cite>stream</cite> a table with the list of the output files
with the given <cite>ext</cite> produced by the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.select_tasks">
<code class="sig-name descname"><span class="pre">select_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wslice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.select_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.select_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list with a subset of tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers.</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>task_class</strong> – String or class used to select tasks. Ignored if None.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>nids and wslice are mutually exclusive.
If no argument is provided, the full list of tasks is returned.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_task_scfcycles">
<code class="sig-name descname"><span class="pre">get_task_scfcycles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wslice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_ok_tasks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_task_scfcycles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_task_scfcycles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of (taks, scfcycle) tuples for all the tasks in the flow with a SCF algorithm
e.g. electronic GS-SCF iteration, DFPT-SCF iterations etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers.</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>task_class</strong> – String or class used to select tasks. Ignored if None.</p></li>
<li><p><strong>exclude_ok_tasks</strong> – True if only running tasks should be considered.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of <cite>ScfCycle</cite> subclass instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_tricky_tasks">
<code class="sig-name descname"><span class="pre">show_tricky_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">verbose=0</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_tricky_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_tricky_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Print list of tricky tasks i.e. tasks that have been restarted or
launched more than once or tasks with corrections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>verbose</strong> – Verbosity level. If &gt; 0, task history and corrections (if any) are printed.</p></li>
<li><p><strong>stream</strong> – File-like object. Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.inspect">
<code class="sig-name descname"><span class="pre">inspect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wslice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.inspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect the tasks (SCF iterations, Structural relaxation …) and
produces matplotlib plots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – List of node identifiers.</p></li>
<li><p><strong>wslice</strong> – Slice object used to select works.</p></li>
<li><p><strong>kwargs</strong> – keyword arguments passed to <cite>task.inspect</cite> method.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>nids and wslice are mutually exclusive.
If nids and wslice are both None, all tasks in self are inspected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of <cite>matplotlib</cite> figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_dict_for_mongodb_queries">
<code class="sig-name descname"><span class="pre">get_dict_for_mongodb_queries</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_dict_for_mongodb_queries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_dict_for_mongodb_queries" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a dictionary with the attributes that will be
put in the mongodb document to facilitate the query.
Subclasses may want to replace or extend the default behaviour.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.look_before_you_leap">
<code class="sig-name descname"><span class="pre">look_before_you_leap</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.look_before_you_leap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.look_before_you_leap" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should be called before running the calculation to make
sure that the most important requirements are satisfied.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of strings with inconsistencies/errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.has_db">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_db</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.has_db" title="Permalink to this definition">¶</a></dt>
<dd><p>True if flow uses <cite>MongoDB</cite> to store the results.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.db_insert">
<code class="sig-name descname"><span class="pre">db_insert</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.db_insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.db_insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert results in the <cite>MongDB</cite> database.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.tasks_from_nids">
<code class="sig-name descname"><span class="pre">tasks_from_nids</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.tasks_from_nids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.tasks_from_nids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of tasks associated to the given list of node identifiers (nids).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Invalid ids are ignored</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.wti_from_nids">
<code class="sig-name descname"><span class="pre">wti_from_nids</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.wti_from_nids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.wti_from_nids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of (w, t) indices from the list of node identifiers nids.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.open_files">
<code class="sig-name descname"><span class="pre">open_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'o'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'=='</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">editor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.open_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.open_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the files of the flow inside an editor (command line interface).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>what</strong> – <p>string with the list of characters selecting the file type
Possible choices:</p>
<blockquote>
<div><p>i ==&gt; input_file,
o ==&gt; output_file,
f ==&gt; files_file,
j ==&gt; job_file,
l ==&gt; log_file,
e ==&gt; stderr_file,
q ==&gt; qout_file,
all ==&gt; all files.</p>
</div></blockquote>
</p></li>
<li><p><strong>status</strong> – if not None, only the tasks with this status are select</p></li>
<li><p><strong>op</strong> – status operator. Requires status. A task is selected
if task.status op status evaluates to true.</p></li>
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>editor</strong> – Select the editor. None to use the default editor ($EDITOR shell env var)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.parse_timing">
<code class="sig-name descname"><span class="pre">parse_timing</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.parse_timing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.parse_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the timer data in the main output file(s) of Abinit.
Requires timopt /= 0 in the input file (usually timopt = -1)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p>
</dd>
</dl>
<p>Return: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitTimerParser</span></code> instance, None if error.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_abierrors">
<code class="sig-name descname"><span class="pre">show_abierrors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_abierrors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_abierrors" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to the given stream the list of ABINIT errors for all tasks whose status is S_ABICRITICAL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>stream</strong> – File-like object. Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_qouts">
<code class="sig-name descname"><span class="pre">show_qouts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_qouts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_qouts" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to the given stream the content of the queue output file for all tasks whose status is S_QCRITICAL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>stream</strong> – File-like object. Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.debug">
<code class="sig-name descname"><span class="pre">debug</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">status=None</span></em>, <em class="sig-param"><span class="pre">nids=None</span></em>, <em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.debug"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is usually used when the flow didn’t completed succesfully
It analyzes the files produced the tasks to facilitate debugging.
Info are printed to stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> – If not None, only the tasks with this status are selected</p></li>
<li><p><strong>nids</strong> – optional list of node identifiers used to filter the tasks.</p></li>
<li><p><strong>stream</strong> – File-like object. Default: sys.stdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.cancel">
<code class="sig-name descname"><span class="pre">cancel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel all the tasks that are in the queue.
nids is an optional list of node identifiers used to filter the tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of jobs cancelled, negative value if error</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_njobs_in_queue">
<code class="sig-name descname"><span class="pre">get_njobs_in_queue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_njobs_in_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_njobs_in_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the number of jobs in the queue, None when the number of jobs cannot be determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>username</strong> – (str) the username of the jobs to count (default is to autodetect)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.rmtree">
<code class="sig-name descname"><span class="pre">rmtree</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onerror</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.rmtree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.rmtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove workdir (same API as shutil.rmtree).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.rm_and_build">
<code class="sig-name descname"><span class="pre">rm_and_build</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.rm_and_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.rm_and_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the workdir and rebuild the flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.build">
<code class="sig-name descname"><span class="pre">build</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Make directories and files of the <cite>Flow</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.build_and_pickle_dump">
<code class="sig-name descname"><span class="pre">build_and_pickle_dump</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abivalidate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.build_and_pickle_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.build_and_pickle_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Build dirs and file of the <cite>Flow</cite> and save the object in pickle format.
Returns 0 if success</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abivalidate</strong> – If True, all the input files are validate by calling
the abinit parser. If the validation fails, ValueError is raise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pickle_dump">
<code class="sig-name descname"><span class="pre">pickle_dump</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.pickle_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the status of the object in pickle format.
Returns 0 if success</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.pickle_dumps">
<code class="sig-name descname"><span class="pre">pickle_dumps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.pickle_dumps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.pickle_dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string with the pickle representation.
<cite>protocol</cite> selects the pickle protocol. self.pickle_protocol is used if <cite>protocol</cite> is None</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.register_task">
<code class="sig-name descname"><span class="pre">register_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.register_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.register_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function that generates a <cite>Work</cite> made of a single task</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a></p></li>
<li><p><strong>deps</strong> – List of <code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code> objects specifying the dependency of this node.
An empy list of deps implies that this node has no dependencies.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task.
If manager is None, we use the <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> specified during the creation of the work.</p></li>
<li><p><strong>task_class</strong> – Task subclass to instantiate. Default: <a class="reference internal" href="#abipy.flowtk.tasks.AbinitTask" title="abipy.flowtk.tasks.AbinitTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AbinitTask</span></code></a></p></li>
<li><p><strong>append</strong> – If true, the task is added to the last work (a new Work is created if flow is empty)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The generated <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> for the task, work[0] is the actual task.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.new_work">
<code class="sig-name descname"><span class="pre">new_work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.new_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.new_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to add a new empty <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> and add it to the internal list.
Client code is responsible for filling the new work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deps</strong> – List of <code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code> objects specifying the dependency of this node.
An empy list of deps implies that this node has no dependencies.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task.
If manager is None, we use the <cite>TaskManager</cite> specified during the creation of the work.</p></li>
<li><p><strong>workdir</strong> – The name of the directory used for the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The registered <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.register_work">
<code class="sig-name descname"><span class="pre">register_work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.register_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.register_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> and add it to the internal list, taking into account
possible dependencies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>work</strong> – <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> object.</p></li>
<li><p><strong>deps</strong> – List of <code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code> objects specifying the dependency of this node.
An empy list of deps implies that this node has no dependencies.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task.
If manager is None, we use the <cite>TaskManager</cite> specified during the creation of the work.</p></li>
<li><p><strong>workdir</strong> – The name of the directory used for the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The registered <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.register_work_from_cbk">
<code class="sig-name descname"><span class="pre">register_work_from_cbk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cbk_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.register_work_from_cbk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.register_work_from_cbk" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a callback function that will generate the <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Work</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cbk_name</strong> – Name of the callback function (must be a bound method of self)</p></li>
<li><p><strong>cbk_data</strong> – Additional data passed to the callback function.</p></li>
<li><p><strong>deps</strong> – List of <code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code> objects specifying the dependency of the work.</p></li>
<li><p><strong>work_class</strong> – <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> class to instantiate.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task.
If manager is None, we use the <cite>TaskManager</cite> specified during the creation of the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> that will be finalized by the callback.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.allocated">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">allocated</span></code><a class="headerlink" href="#abipy.flowtk.flows.Flow.allocated" title="Permalink to this definition">¶</a></dt>
<dd><p>Numer of allocations. Set by <cite>allocate</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.allocate">
<code class="sig-name descname"><span class="pre">allocate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_smartio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.allocate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.allocate" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate the <cite>Flow</cite> i.e. assign the <cite>workdir</cite> and (optionally)
the <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> to the different tasks in the Flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> – Working directory of the flow. Must be specified here
if we haven’t initialized the workdir in the __init__.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.use_smartio">
<code class="sig-name descname"><span class="pre">use_smartio</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.use_smartio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.use_smartio" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should be called when the entire <cite>Flow</cite> has been built.
It tries to reduce the pressure on the hard disk by using Abinit smart-io
capabilities for those files that are not needed by other nodes.
Smart-io means that big files (e.g. WFK) are written only if the calculation
is unconverged so that we can restart from it. No output is produced if
convergence is achieved.</p>
<p>Return: self</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_dependencies">
<code class="sig-name descname"><span class="pre">show_dependencies</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_dependencies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes to the given stream the ASCII representation of the dependency tree.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the works in the flow have reached S_OK.
This method shall return True if the calculation is completed or
False if the execution should continue due to side-effects such as adding a new work to the flow.</p>
<p>This methods allows subclasses to implement customized logic such as extending the flow by adding new works.
The flow has an internal counter: on_all_ok_num_calls
that shall be incremented by client code when subclassing this method.
This counter can be used to decide if futher actions are needed or not.</p>
<p>An example of flow that adds a new work (only once) when all_ok is reached for the first time:</p>
<dl>
<dt>def on_all_ok(self):</dt><dd><p>if self.on_all_ok_num_calls &gt; 0: return True
self.on_all_ok_num_calls += 1</p>
<p><cite>implement_logic_to_create_new_work</cite></p>
<p>self.register_work(work)
self.allocate()
self.build_and_pickle_dump()</p>
<p>return False # The scheduler will keep on running the flow.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.on_dep_ok">
<code class="sig-name descname"><span class="pre">on_dep_ok</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.on_dep_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.on_dep_ok" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.finalize">
<code class="sig-name descname"><span class="pre">finalize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when the flow is completed. Return 0 if success</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.set_garbage_collector">
<code class="sig-name descname"><span class="pre">set_garbage_collector</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'task'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.set_garbage_collector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.set_garbage_collector" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable the garbage collector that will remove the big output files that are not needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exts</strong> – string or list with the Abinit file extensions to be removed. A default is
provided if exts is None</p></li>
<li><p><strong>policy</strong> – Either <cite>flow</cite> or <cite>task</cite>. If policy is set to ‘task’, we remove the output
files as soon as the task reaches S_OK. If ‘flow’, the files are removed
only when the flow is finalized. This option should be used when we are dealing
with a dynamic flow with callbacks generating other tasks since a <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>
might not be aware of its children when it reached S_OK.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.connect_signals">
<code class="sig-name descname"><span class="pre">connect_signals</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.connect_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.connect_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect the signals within the <cite>Flow</cite>.
The <cite>Flow</cite> is responsible for catching the important signals raised from its works.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.disconnect_signals">
<code class="sig-name descname"><span class="pre">disconnect_signals</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.disconnect_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.disconnect_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable the signals within the <cite>Flow</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.show_receivers">
<code class="sig-name descname"><span class="pre">show_receivers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.show_receivers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.show_receivers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.set_spectator_mode">
<code class="sig-name descname"><span class="pre">set_spectator_mode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.set_spectator_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.set_spectator_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>When the flow is in spectator_mode, we have to disable signals, pickle dump and possible callbacks
A spectator can still operate on the flow but the new status of the flow won’t be saved in
the pickle file. Usually the flow is in spectator mode when we are already running it via
the scheduler or other means and we should not interfere with its evolution.
This is the reason why signals and callbacks must be disabled.
Unfortunately preventing client-code from calling methods with side-effects when
the flow is in spectator mode is not easy (e.g. flow.cancel will cancel the tasks submitted to the
queue and the flow used by the scheduler won’t see this change!</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.rapidfire">
<code class="sig-name descname"><span class="pre">rapidfire</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nlaunch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_loops</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.rapidfire"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.rapidfire" title="Permalink to this definition">¶</a></dt>
<dd><p>Use <code class="xref py py-class docutils literal notranslate"><span class="pre">PyLauncher</span></code> to submits tasks in rapidfire mode.
kwargs contains the options passed to the launcher.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>check_status</strong> – </p></li>
<li><p><strong>max_nlaunch</strong> – Maximum number of launches. default: no limit.</p></li>
<li><p><strong>max_loops</strong> – Maximum number of loops</p></li>
<li><p><strong>sleep_time</strong> – seconds to sleep between rapidfire loop iterations</p></li>
</ul>
</dd>
</dl>
<p>Return: Number of tasks submitted.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.single_shot">
<code class="sig-name descname"><span class="pre">single_shot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.single_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.single_shot" title="Permalink to this definition">¶</a></dt>
<dd><p>Use <code class="xref py py-class docutils literal notranslate"><span class="pre">PyLauncher</span></code> to submit one task.
kwargs contains the options passed to the launcher.</p>
<p>Return: Number of tasks submitted.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.make_scheduler">
<code class="sig-name descname"><span class="pre">make_scheduler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.make_scheduler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.make_scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and return a <code class="xref py py-class docutils literal notranslate"><span class="pre">PyFlowScheduler</span></code> to run the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – if empty we use the user configuration file.
if <cite>filepath</cite> in kwargs we init the scheduler from filepath.
else pass kwargs to <code class="xref py py-class docutils literal notranslate"><span class="pre">PyFlowScheduler</span></code> __init__ method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.batch">
<code class="sig-name descname"><span class="pre">batch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timelimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the flow in batch mode, return exit status of the job script.
Requires a manager.yml file and a batch_adapter adapter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timelimit</strong> – Time limit (int with seconds or string with time given with the slurm convention:</p></li>
<li><p><strong>&quot;days-hours</strong> – minutes:seconds”). If timelimit is None, the default value specified in the</p></li>
<li><p><strong>entry of manager.yml is used.</strong> (<em>batch_adapter</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.make_light_tarfile">
<code class="sig-name descname"><span class="pre">make_light_tarfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.make_light_tarfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.make_light_tarfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Lightweight tarball file. Mainly used for debugging. Return the name of the tarball file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.make_tarfile">
<code class="sig-name descname"><span class="pre">make_tarfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_filesize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_exts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.make_tarfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.make_tarfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a tarball file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the tarball file. Set to os.path.basename(<cite>flow.workdir</cite>) + “tar.gz”` if name is None.</p></li>
<li><p><strong>max_filesize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><em>string with unit</em>) – a file is included in the tar file if its size &lt;= max_filesize
Can be specified in bytes e.g. <cite>max_files=1024</cite> or with a string with unit e.g. <cite>max_filesize=”1 Mb”</cite>.
No check is done if max_filesize is None.</p></li>
<li><p><strong>exclude_exts</strong> – List of file extensions to be excluded from the tar file.</p></li>
<li><p><strong>exclude_dirs</strong> – List of directory basenames to be excluded.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Verbosity level.</p></li>
<li><p><strong>kwargs</strong> – keyword arguments passed to the <code class="xref py py-class docutils literal notranslate"><span class="pre">TarFile</span></code> constructor.</p></li>
</ul>
</dd>
</dl>
<p>Returns: The name of the tarfile.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.get_graphviz">
<code class="sig-name descname"><span class="pre">get_graphviz</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'automatic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.get_graphviz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.get_graphviz" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate flow graph in the DOT language.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> – Layout command used. [‘dot’, ‘neato’, ‘twopi’, ‘circo’, ‘fdp’, ‘sfdp’, ‘patchwork’, ‘osage’]</p></li>
<li><p><strong>graph_attr</strong> – Mapping of (attribute, value) pairs for the graph.</p></li>
<li><p><strong>node_attr</strong> – Mapping of (attribute, value) pairs set for all nodes.</p></li>
<li><p><strong>edge_attr</strong> – Mapping of (attribute, value) pairs set for all edges.</p></li>
</ul>
</dd>
</dl>
<p>Returns: graphviz.Digraph &lt;<a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#digraph">https://graphviz.readthedocs.io/en/stable/api.html#digraph</a>&gt;</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.graphviz_imshow">
<code class="sig-name descname"><span class="pre">graphviz_imshow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'png'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.graphviz_imshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.graphviz_imshow" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate flow graph in the DOT language and plot it with matplotlib.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> – <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a> or None if a new figure should be created.</p></li>
<li><p><strong>figsize</strong> – matplotlib figure size (None to use default)</p></li>
<li><p><strong>dpi</strong> – DPI value.</p></li>
<li><p><strong>fmt</strong> – Select format for output image</p></li>
</ul>
</dd>
</dl>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>“abc.png” or “abc.eps” to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.plot_networkx">
<code class="sig-name descname"><span class="pre">plot_networkx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'network'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_edge_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'num_cores'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'name_class'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'spring'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.plot_networkx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.plot_networkx" title="Permalink to this definition">¶</a></dt>
<dd><p>Use networkx to draw the flow with the connections among the nodes and
the status of the tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> – <cite>networkx</cite> to show connections, <cite>status</cite> to group tasks by status.</p></li>
<li><p><strong>with_edge_labels</strong> – True to draw edge labels.</p></li>
<li><p><strong>ax</strong> – <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a> or None if a new figure should be created.</p></li>
<li><p><strong>arrows</strong> – if True draw arrowheads.</p></li>
<li><p><strong>node_size</strong> – By default, the size of the node is proportional to the number of cores used.</p></li>
<li><p><strong>node_label</strong> – By default, the task class is used to label node.</p></li>
<li><p><strong>layout_type</strong> – Get positions for all nodes using <cite>layout_type</cite>. e.g. pos = nx.spring_layout(g)</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Requires networkx package.</p>
</div>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>“abc.png” or “abc.eps” to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.flows.Flow.write_open_notebook">
<code class="sig-name descname"><span class="pre">write_open_notebook</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">foreground</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#Flow.write_open_notebook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.Flow.write_open_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an ipython notebook and open it in the browser.
Return system exit code.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.flows.G0W0WithQptdmFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.flows.</span></code><code class="sig-name descname"><span class="pre">G0W0WithQptdmFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scr_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#G0W0WithQptdmFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.G0W0WithQptdmFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<dl class="py method">
<dt id="abipy.flowtk.flows.G0W0WithQptdmFlow.cbk_qptdm_workflow">
<code class="sig-name descname"><span class="pre">cbk_qptdm_workflow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cbk</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#G0W0WithQptdmFlow.cbk_qptdm_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.G0W0WithQptdmFlow.cbk_qptdm_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is executed by the flow when bands_work.nscf_task reaches S_OK.</p>
<p>It computes the list of q-points for the W(q,G,G’), creates nqpt tasks
in the second work (QptdmWork), and connect the signals.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.flows.bandstructure_flow">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.flows.</span></code><code class="sig-name descname"><span class="pre">bandstructure_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">workdir</span></em>, <em class="sig-param"><span class="pre">scf_input</span></em>, <em class="sig-param"><span class="pre">nscf_input</span></em>, <em class="sig-param"><span class="pre">dos_inputs=None</span></em>, <em class="sig-param"><span class="pre">manager=None</span></em>, <em class="sig-param"><span class="pre">flow_class=&lt;class</span> <span class="pre">'abipy.flowtk.flows.Flow'&gt;</span></em>, <em class="sig-param"><span class="pre">allocate=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#bandstructure_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.bandstructure_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> for band structure calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory.</p></li>
<li><p><strong>scf_input</strong> – Input for the GS SCF run.</p></li>
<li><p><strong>nscf_input</strong> – Input for the NSCF run (band structure run).</p></li>
<li><p><strong>dos_inputs</strong> – Input(s) for the NSCF run (dos run).</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object used to submit the jobs. Initialized from manager.yml if manager is None.</p></li>
<li><p><strong>flow_class</strong> – Flow subclass</p></li>
<li><p><strong>allocate</strong> – True if the flow should be allocated before returning.</p></li>
</ul>
</dd>
</dl>
<p>Returns: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> object</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.flows.g0w0_flow">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.flows.</span></code><code class="sig-name descname"><span class="pre">g0w0_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">workdir</span></em>, <em class="sig-param"><span class="pre">scf_input</span></em>, <em class="sig-param"><span class="pre">nscf_input</span></em>, <em class="sig-param"><span class="pre">scr_input</span></em>, <em class="sig-param"><span class="pre">sigma_inputs</span></em>, <em class="sig-param"><span class="pre">manager=None</span></em>, <em class="sig-param"><span class="pre">flow_class=&lt;class</span> <span class="pre">'abipy.flowtk.flows.Flow'&gt;</span></em>, <em class="sig-param"><span class="pre">allocate=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/flows.html#g0w0_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.flows.g0w0_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> for one-shot $G_0W_0$ calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory.</p></li>
<li><p><strong>scf_input</strong> – Input for the GS SCF run.</p></li>
<li><p><strong>nscf_input</strong> – Input for the NSCF run (band structure run).</p></li>
<li><p><strong>scr_input</strong> – Input for the SCR run.</p></li>
<li><p><strong>sigma_inputs</strong> – List of inputs for the SIGMA run.</p></li>
<li><p><strong>flow_class</strong> – Flow class</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object used to submit the jobs. Initialized from manager.yml if manager is None.</p></li>
<li><p><strong>allocate</strong> – True if the flow should be allocated before returning.</p></li>
</ul>
</dd>
</dl>
<p>Returns: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> object</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.gruneisen">
<span id="gruneisen-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gruneisen</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.gruneisen" title="Permalink to this headline">¶</a></h2>
<p>Work for computing the Grüneisen parameters with finite differences of DFPT phonons.</p>
<p>WARNING: This code must be tested more carefully.</p>
<dl class="py class">
<dt id="abipy.flowtk.gruneisen.GruneisenWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.gruneisen.</span></code><code class="sig-name descname"><span class="pre">GruneisenWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gruneisen.html#GruneisenWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gruneisen.GruneisenWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work computes the Grüneisen parameters (derivative of frequencies wrt volume)
using finite differences and the phonons obtained with the DFPT part of Abinit.
The Anaddb input file needed to compute Grüneisen parameters will be generated
in the outdata directory of the flow.</p>
<p>It is necessary to run three DFPT phonon calculations.
One is calculated at the equilibrium volume and the remaining two are calculated
at the slightly larger volume and smaller volume than the equilibrium volume.
The unitcells at these volumes have to be fully relaxed under the constraint of each volume.
This Work automates the entire procedure starting from an input for GS calculations.</p>
<dl class="py method">
<dt id="abipy.flowtk.gruneisen.GruneisenWork.from_gs_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_gs_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gs_inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voldelta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gruneisen.html#GruneisenWork.from_gs_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gruneisen.GruneisenWork.from_gs_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gs_inp</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS calculation in the initial unit cell.</p></li>
<li><p><strong>voldelta</strong> – Absolute increment for unit cell volume. The three volumes are:
[v0 - voldelta, v0, v0 + voldelta] where v0 is taken from gs_inp.structure.</p></li>
<li><p><strong>ngqpt</strong> – three integers defining the q-mesh for phonon calculations.</p></li>
<li><p><strong>tolerance</strong> – dict {“varname”: value} with the tolerance to be used in the phonon run.
None to use AbiPy default.</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>ddk_tolerance</strong> – dict {“varname”: value} with the tolerance used in the DDK run if with_becs.
None to use AbiPy default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.gruneisen.GruneisenWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gruneisen.html#GruneisenWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gruneisen.GruneisenWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called once the <cite>Work</cite> is completed i.e. when all the tasks have reached status S_OK.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.gruneisen.GruneisenWork.add_phonon_works_and_build">
<code class="sig-name descname"><span class="pre">add_phonon_works_and_build</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gruneisen.html#GruneisenWork.add_phonon_works_and_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gruneisen.GruneisenWork.add_phonon_works_and_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Get relaxed structures from the tasks, build Phonons works with new structures.
Add works to the flow and build new directories.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.gs_works">
<span id="gs-works-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gs_works</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.gs_works" title="Permalink to this headline">¶</a></h2>
<p>Work subclasses related to GS calculations.</p>
<dl class="py class">
<dt id="abipy.flowtk.gs_works.EosWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.gs_works.</span></code><code class="sig-name descname"><span class="pre">EosWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gs_works.html#EosWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gs_works.EosWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for the computation of the Equation of State
The EOS is obtained by computing E(V) for several volumes around the input V0,
The initial volumes are obtained by rescaling the input lattice vectors so that
length proportions and angles are preserved.
This guess is exact for cubic materials while other Bravais lattices require
a constant-volume optimization of the cell geometry.</p>
<p>If lattice_type==”cubic” and atomic positions are fixed by symmetry.
use can use move_atoms=False to perform standard GS-SCF calculations.
In all the other cases, E(V) is obtained by relaxing the atomic positions at fixed volume.</p>
<p>The E(V) points are fitted at the end of the work and the results are saved in the
<cite>eos_data.json</cite> file produced in the <cite>outdata</cite> directory.
The file contains the energies, the volumes and the values of V0, B0, B1 obtained
with different EOS models.</p>
<dl class="py method">
<dt id="abipy.flowtk.gs_works.EosWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deltap_vol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecutsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">move_atoms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gs_works.html#EosWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gs_works.EosWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a EosWork from an AbinitInput representing a SCF-GS calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – AbinitInput for SCF-GS used as template to generate the other inputs.</p></li>
<li><p><strong>npoints</strong> – Number of volumes generated on the right (left) of the equilibrium volume
The total number of points is therefore 2 * n + 1.</p></li>
<li><p><strong>deltap_vol</strong> – Step of the linear mesh given in relative percentage of the equilibrium volume
The step is thus: v0 * deltap_vol / 100.</p></li>
<li><p><strong>ecutsm</strong> – Value of ecutsm input variable. If <cite>scf_input</cite> does not provide ecutsm, this
value will be used else the vale in <cite>scf_input</cite>.</p></li>
<li><p><strong>move_atoms</strong> – If True, a structural relaxation of ions is performed for each volume
This is needed if the atomic positions are non fixed by symmetry.</p></li>
<li><p><strong>manager</strong> – TaskManager instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
<p>Return: EosWork instance.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.gs_works.EosWork.getnwrite_eosdata">
<code class="sig-name descname"><span class="pre">getnwrite_eosdata</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_json</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gs_works.html#EosWork.getnwrite_eosdata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gs_works.EosWork.getnwrite_eosdata" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all tasks reach S_OK. It reads the energies
and the volumes from the GSR file, computes the EOS and produce a
JSON file <cite>eos_data.json</cite> in outdata.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.gs_works.EosWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/gs_works.html#EosWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.gs_works.EosWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all tasks reach S_OK. It reads the energies
and the volumes from the GSR file, computes the EOS and produce a
JSON file <cite>eos_data.json</cite> in outdata.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.launcher">
<span id="launcher-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">launcher</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.launcher" title="Permalink to this headline">¶</a></h2>
<p>Tools for the submission of Tasks.</p>
<dl class="py class">
<dt id="abipy.flowtk.launcher.ScriptEditor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.launcher.</span></code><code class="sig-name descname"><span class="pre">ScriptEditor</span></code><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Simple editor that simplifies the writing of shell scripts</p>
<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.shell">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">shell</span></code><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.shell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.reset">
<code class="sig-name descname"><span class="pre">reset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the editor.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.shebang">
<code class="sig-name descname"><span class="pre">shebang</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.shebang"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.shebang" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the shebang line.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.declare_var">
<code class="sig-name descname"><span class="pre">declare_var</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.declare_var"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.declare_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a env variable. If val is None the variable is unset.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.declare_vars">
<code class="sig-name descname"><span class="pre">declare_vars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.declare_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.declare_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare the variables defined in the dictionary d.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.export_envar">
<code class="sig-name descname"><span class="pre">export_envar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.export_envar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.export_envar" title="Permalink to this definition">¶</a></dt>
<dd><p>Export an environment variable.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.export_envars">
<code class="sig-name descname"><span class="pre">export_envars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.export_envars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.export_envars" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the environment variables contained in the dict env.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.add_emptyline">
<code class="sig-name descname"><span class="pre">add_emptyline</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.add_emptyline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.add_emptyline" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an empty line.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.add_comment">
<code class="sig-name descname"><span class="pre">add_comment</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.add_comment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.add_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a comment</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.load_modules">
<code class="sig-name descname"><span class="pre">load_modules</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.load_modules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.load_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the list of specified modules.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.load_module">
<code class="sig-name descname"><span class="pre">load_module</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.load_module"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.load_module" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.add_line">
<code class="sig-name descname"><span class="pre">add_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.add_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.add_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.add_lines">
<code class="sig-name descname"><span class="pre">add_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.add_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.add_lines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.ScriptEditor.get_script_str">
<code class="sig-name descname"><span class="pre">get_script_str</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#ScriptEditor.get_script_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.ScriptEditor.get_script_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with the script and reset the editor if reset is True</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.launcher.PyLauncher">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.launcher.</span></code><code class="sig-name descname"><span class="pre">PyLauncher</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyLauncher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyLauncher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object handle the submission of the tasks contained in a <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a>.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.launcher.PyLauncher.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyLauncher.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.launcher.PyLauncherError</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyLauncher.single_shot">
<code class="sig-name descname"><span class="pre">single_shot</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyLauncher.single_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyLauncher.single_shot" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the first <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> than is ready for execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of jobs launched.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyLauncher.rapidfire">
<code class="sig-name descname"><span class="pre">rapidfire</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_nlaunch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_loops</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyLauncher.rapidfire"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyLauncher.rapidfire" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps submitting <cite>Tasks</cite> until we are out of jobs or no job is ready to run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_nlaunch</strong> – Maximum number of launches. default: no limit.</p></li>
<li><p><strong>max_loops</strong> – Maximum number of loops</p></li>
<li><p><strong>sleep_time</strong> – seconds to sleep between rapidfire loop iterations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of tasks launched.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyLauncher.fetch_tasks_to_run">
<code class="sig-name descname"><span class="pre">fetch_tasks_to_run</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyLauncher.fetch_tasks_to_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyLauncher.fetch_tasks_to_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of tasks that can be submitted.
Empty list if no task has been found.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.launcher.PyFlowScheduler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.launcher.</span></code><code class="sig-name descname"><span class="pre">PyFlowScheduler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object schedules the submission of the tasks in a <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a>.
There are two types of errors that might occur during the execution of the jobs:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Python exceptions</p></li>
<li><p>Errors in the ab-initio code</p></li>
</ol>
</div></blockquote>
<p>Python exceptions are easy to detect and are usually due to a bug in the python code or random errors such as IOError.
The set of errors in the ab-initio is much much broader. It includes wrong input data, segmentation
faults, problems with the resource manager, etc. The flow tries to handle the most common cases
but there’s still a lot of room for improvement.
Note, in particular, that <cite>PyFlowScheduler</cite> will shutdown automatically in the following cases:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The number of python exceptions is &gt; max_num_pyexcs</p></li>
<li><p>The number of task errors (i.e. the number of tasks whose status is S_ERROR) is &gt; max_num_abierrs</p></li>
<li><p>The number of jobs launched becomes greater than (<cite>safety_ratio</cite> * total_number_of_tasks).</p></li>
<li><p>The scheduler will send an email to the user (specified by <cite>mailto</cite>) every <cite>remindme_s</cite> seconds.
If the mail cannot be sent, the scheduler will shutdown automatically.
This check prevents the scheduler from being trapped in an infinite loop.</p></li>
</ol>
</div></blockquote>
<dl class="py attribute">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.YAML_FILE">
<code class="sig-name descname"><span class="pre">YAML_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'scheduler.yml'</span></em><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.YAML_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.USER_CONFIG_DIR">
<code class="sig-name descname"><span class="pre">USER_CONFIG_DIR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'/Users/gmatteo/.abinit/abipy'</span></em><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.USER_CONFIG_DIR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.launcher.PyFlowSchedulerError</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.autodoc">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">autodoc</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.autodoc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.autodoc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.from_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the configuration parameters from a Yaml file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.from_string">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.from_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an istance from string s containing a YAML dictionary.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.from_user_config">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_user_config</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.from_user_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.from_user_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the <a class="reference internal" href="#abipy.flowtk.launcher.PyFlowScheduler" title="abipy.flowtk.launcher.PyFlowScheduler"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyFlowScheduler</span></code></a> from the YAML file ‘scheduler.yml’.
Search first in the working directory and then in the configuration directory of abipy.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><strong>RuntimeError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.pid">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pid</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.pid" title="Permalink to this definition">¶</a></dt>
<dd><p>The pid of the process associated to the scheduler.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.pid_file">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pid_file</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.pid_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the file with the pid.
The file is located in the workdir of the flow</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.flow">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">flow</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.flow" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>Flow</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.num_excs">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_excs</span></code><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.num_excs" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of exceptions raised so far.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.get_delta_etime">
<code class="sig-name descname"><span class="pre">get_delta_etime</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.get_delta_etime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.get_delta_etime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <cite>timedelta</cite> object representing with the elapsed time.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.add_flow">
<code class="sig-name descname"><span class="pre">add_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.add_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.add_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a flow to the scheduler.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.start">
<code class="sig-name descname"><span class="pre">start</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the scheduler in a new thread. Returns 0 if success.
In standalone mode, this method will block until there are no more scheduled jobs.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.callback">
<code class="sig-name descname"><span class="pre">callback</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.callback" title="Permalink to this definition">¶</a></dt>
<dd><p>The function that will be executed by the scheduler.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.cleanup">
<code class="sig-name descname"><span class="pre">cleanup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup routine: remove the pid file and save the pickle database</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.shutdown">
<code class="sig-name descname"><span class="pre">shutdown</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.shutdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown the scheduler.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.launcher.PyFlowScheduler.send_email">
<code class="sig-name descname"><span class="pre">send_email</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/launcher.html#PyFlowScheduler.send_email"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.launcher.PyFlowScheduler.send_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Send an e-mail before completing the shutdown.
Returns 0 if success.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.lumi_works">
<span id="lumi-works-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lumi_works</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.lumi_works" title="Permalink to this headline">¶</a></h2>
<p>Work subclasses for the computation of luminiscent properties.</p>
<dl class="py class">
<dt id="abipy.flowtk.lumi_works.LumiWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.lumi_works.</span></code><code class="sig-name descname"><span class="pre">LumiWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/lumi_works.html#LumiWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.lumi_works.LumiWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This Work implements Fig 1 of <a class="reference external" href="https://arxiv.org/abs/2010.00423">https://arxiv.org/abs/2010.00423</a>.</p>
<p>Client code is responsible for the preparation of the supercell and
of the GS SCF input files with the fixed electronic occupations associated to the two configurations.
By default, the work computes four total energies corresponding to the Ag, Ag*, Ae*, Ae configurations.
Optionally, one can activate the computation of four electronic band structures
and phonons for Ag and Ae. See docstring of from_scf_inputs for further info.</p>
<dl class="py method">
<dt id="abipy.flowtk.lumi_works.LumiWork.from_scf_inputs">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_inputs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gs_scf_inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_scf_inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relax_kwargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolwfr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/lumi_works.html#LumiWork.from_scf_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.lumi_works.LumiWork.from_scf_inputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gs_scf_inp</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS SCF run for the ground-state.</p></li>
<li><p><strong>exc_scf_inp</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS SCF run for the excited-state.</p></li>
<li><p><strong>relax_kwargs</strong> – Dictonary with input variables to be added to gs_scf_inp and exc_scf_inp.
when generating input files for structural relaxations.</p></li>
<li><p><strong>ndivsm</strong> – Activates the computation of band structure if different from zero.
if &gt; 0, it’s the number of divisions for the smallest segment of the path (Abinit variable).
if &lt; 0, it’s interpreted as the pymatgen <cite>line_density</cite> parameter in which the number of points
in the segment is proportional to its length. Typical value: -20.
This option is the recommended one if the k-path contains two high symmetry k-points that are very close
as ndivsm &gt; 0 may produce a very large number of wavevectors.</p></li>
<li><p><strong>nb_extra</strong> – Number of extra bands added to the input nband when computing band structures (ndivsm != 0).</p></li>
<li><p><strong>tolwfr</strong> – Tolerance on the residuals used for the NSCF band structure calculations.</p></li>
<li><p><strong>ngqpt</strong> – If not None, activates computation of phonons with DFPT using this q-mesh.
Usually Gamma-only that is ngqpt = [1, 1, 1].</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> of the work. If None, the manager is initialized from the config file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.lumi_works.LumiWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/lumi_works.html#LumiWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.lumi_works.LumiWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the tasks in the work have reached S_OK.</p>
<p>This is the section in which we implement most of the workflow logic at runtime.
since we need to generate input files with relaxed structures.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.mocks">
<span id="mocks-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mocks</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.mocks" title="Permalink to this headline">¶</a></h2>
<p>Mock objects for unit tests.</p>
<dl class="py function">
<dt id="abipy.flowtk.mocks.change_task_start">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.mocks.</span></code><code class="sig-name descname"><span class="pre">change_task_start</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mocked_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Error'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#change_task_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.change_task_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a AbinitTaskMockedStart object.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.mocks.AbinitTaskMockedStart">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.mocks.</span></code><code class="sig-name descname"><span class="pre">AbinitTaskMockedStart</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#AbinitTaskMockedStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.AbinitTaskMockedStart" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.tasks.AbinitTask" title="abipy.flowtk.tasks.AbinitTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AbinitTask</span></code></a></p>
<p>A Task whose status is always self.mocked_status.</p>
<dl class="py method">
<dt id="abipy.flowtk.mocks.AbinitTaskMockedStart.start">
<code class="sig-name descname"><span class="pre">start</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#AbinitTaskMockedStart.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.AbinitTaskMockedStart.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the calculation by performing the following steps:</p>
<blockquote>
<div><ul class="simple">
<li><p>build dirs and files</p></li>
<li><p>call the _setup method</p></li>
<li><p>execute the job file by executing/submitting the job script.</p></li>
</ul>
</div></blockquote>
<p>Main entry point for the <cite>Launcher</cite>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>autoparal</p></td>
<td><p>False to skip the autoparal step (default True)</p></td>
</tr>
<tr class="row-odd"><td><p>exec_args</p></td>
<td><p>List of arguments passed to executable.</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1 if task was started, 0 otherwise.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.mocks.infinite_flow">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.mocks.</span></code><code class="sig-name descname"><span class="pre">infinite_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#infinite_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.infinite_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an InfiniteFlow.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.mocks.InfiniteFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.mocks.</span></code><code class="sig-name descname"><span class="pre">InfiniteFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#InfiniteFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.InfiniteFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<p>A Flow that will never reach <cite>all_ok</cite></p>
<dl class="py method">
<dt id="abipy.flowtk.mocks.InfiniteFlow.check_status">
<code class="sig-name descname"><span class="pre">check_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/mocks.html#InfiniteFlow.check_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.mocks.InfiniteFlow.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of the works in self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show</strong> – True to show the status of the flow.</p></li>
<li><p><strong>kwargs</strong> – keyword arguments passed to show_status</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.netcdf">
<span id="netcdf-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">netcdf</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.netcdf" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-abipy.flowtk.nodes">
<span id="nodes-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nodes</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.nodes" title="Permalink to this headline">¶</a></h2>
<p>This module defines the Node base class inherited by Task, Work and Flow objects.</p>
<dl class="py class">
<dt id="abipy.flowtk.nodes.Status">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">Status</span></code><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Status" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
<p>This object is an integer representing the status of the <cite>Node</cite>.</p>
<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.as_status">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">as_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Status.as_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Status.as_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into Status.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.from_string">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Status.from_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Status.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <cite>Status</cite> instance from its string representation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.all_status_strings">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">all_status_strings</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Status.all_status_strings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Status.all_status_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>List of strings with all possible values status.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.is_critical">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_critical</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Status.is_critical" title="Permalink to this definition">¶</a></dt>
<dd><p>True if status is critical.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.color_opts">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">color_opts</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Status.color_opts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Status.colored">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">colored</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Status.colored" title="Permalink to this definition">¶</a></dt>
<dd><p>Return colorized text used to print the status if the stream supports it.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.Dependency">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">Dependency</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Dependency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Dependency" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object describes the dependencies among the nodes of a calculation.</p>
<p>A <cite>Dependency</cite> consists of a <cite>Node</cite> that produces a list of products (files)
that are used by the other nodes (<cite>Task</cite> or <cite>Work</cite>) to start the calculation.
One usually creates the object by calling work.register</p>
<p class="rubric">Example</p>
<p># Register the SCF task in work.
scf_task = work.register(scf_strategy)</p>
<p># Register the NSCF calculation and its dependency on the SCF run via deps.
nscf_task = work.register(nscf_strategy, deps={scf_task: “DEN”})</p>
<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.info">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">info</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.node">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">node</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.node" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> associated to the dependency.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the dependency, i.e. the status of the <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.products">
<code class="sig-name descname"><span class="pre">products</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Dependency.products"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.products" title="Permalink to this definition">¶</a></dt>
<dd><p>List of output files produces by self.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.apply_getters">
<code class="sig-name descname"><span class="pre">apply_getters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Dependency.apply_getters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.apply_getters" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called when we specify the task dependencies with the syntax:</p>
<blockquote>
<div><p>deps={node: “&#64;property”}</p>
</div></blockquote>
<p>In this case the task has to the get <cite>property</cite> from <cite>node</cite> before starting the calculation.</p>
<p>At present, the following properties are supported:</p>
<blockquote>
<div><ul class="simple">
<li><p>&#64;structure</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.connecting_vars">
<code class="sig-name descname"><span class="pre">connecting_vars</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Dependency.connecting_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.connecting_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary with the variables that must be added to the
input file in order to connect this <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> to its dependencies.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Dependency.get_filepaths_and_exts">
<code class="sig-name descname"><span class="pre">get_filepaths_and_exts</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Dependency.get_filepaths_and_exts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Dependency.get_filepaths_and_exts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the paths of the output files produced by self and its extensions</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.Product">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">Product</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Product"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Product" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A product represents an output file produced by ABINIT instance.
This file is needed to start another <cite>Task</cite> or another <cite>Work</cite>.</p>
<dl class="py method">
<dt id="abipy.flowtk.nodes.Product.from_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Product.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Product.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#abipy.flowtk.nodes.Product" title="abipy.flowtk.nodes.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">Product</span></code></a> instance from a filepath.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Product.filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filepath</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Product.filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Product.connecting_vars">
<code class="sig-name descname"><span class="pre">connecting_vars</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Product.connecting_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Product.connecting_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary with the ABINIT variables that
must be used to make the code use this file.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.GridFsFile">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">GridFsFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'b'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#GridFsFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.GridFsFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.collections.AttrDict" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.collections.AttrDict</span></code></a></p>
<p>Information on a file that will stored in the MongoDb gridfs collection.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.NodeResults">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">NodeResults</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>, <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>Dictionary used to store the most important results produced by a <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a>.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.nodes.NodeResults.JSON_SCHEMA">
<code class="sig-name descname"><span class="pre">JSON_SCHEMA</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'properties':</span> <span class="pre">{'exceptions':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'array'},</span> <span class="pre">'files':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'object'},</span> <span class="pre">'in':</span> <span class="pre">{'description':</span> <span class="pre">'dictionary</span> <span class="pre">with</span> <span class="pre">input</span> <span class="pre">parameters',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'object'},</span> <span class="pre">'node_class':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'string'},</span> <span class="pre">'node_finalized':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'boolean'},</span> <span class="pre">'node_history':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'array'},</span> <span class="pre">'node_id':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'integer'},</span> <span class="pre">'node_name':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'string'},</span> <span class="pre">'node_status':</span> <span class="pre">{'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'string'},</span> <span class="pre">'out':</span> <span class="pre">{'description':</span> <span class="pre">'dictionary</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">output</span> <span class="pre">results',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'type':</span> <span class="pre">'object'}},</span> <span class="pre">'type':</span> <span class="pre">'object'}</span></em><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.JSON_SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.from_node">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_node</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.from_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.from_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an instance of <cite>NodeResults</cite> from a <cite>Node</cite> subclass.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.exceptions">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">exceptions</span></code><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.exceptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.gridfs_files">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">gridfs_files</span></code><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.gridfs_files" title="Permalink to this definition">¶</a></dt>
<dd><p>List with the absolute paths of the files to be put in GridFs.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.register_gridfs_files">
<code class="sig-name descname"><span class="pre">register_gridfs_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.register_gridfs_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.register_gridfs_files" title="Permalink to this definition">¶</a></dt>
<dd><p>This function registers the files that will be saved in GridFS.
kwargs is a dictionary mapping the key associated to the file (usually the extension)
to the absolute path. By default, files are assumed to be in binary form, for formatted files
one should pass a tuple (“filepath”, “t”).</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">register_gridfs</span><span class="p">(</span><span class="n">GSR</span><span class="o">=</span><span class="s2">&quot;path/to/GSR.nc&quot;</span><span class="p">,</span> <span class="n">text_file</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;/path/to/txt_file&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>The GSR file is a binary file, whereas text_file is a text file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.push_exceptions">
<code class="sig-name descname"><span class="pre">push_exceptions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">exceptions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.push_exceptions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.push_exceptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Dict representation.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSONable class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.json_dump">
<code class="sig-name descname"><span class="pre">json_dump</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.json_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.json_dump" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.json_load">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">json_load</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.json_load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.json_load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.validate_json_schema">
<code class="sig-name descname"><span class="pre">validate_json_schema</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.validate_json_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.validate_json_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeResults.update_collection">
<code class="sig-name descname"><span class="pre">update_collection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeResults.update_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeResults.update_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a mongodb collection.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.nodes.check_spectator">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">check_spectator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_method</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#check_spectator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.check_spectator" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> methods. Raise <cite>SpectatorNodeError</cite>.</p>
</dd></dl>

<dl class="py exception">
<dt id="abipy.flowtk.nodes.NodeError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">NodeError</span></code><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Base Exception raised by <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> subclasses</p>
</dd></dl>

<dl class="py exception">
<dt id="abipy.flowtk.nodes.SpectatorNodeError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">SpectatorNodeError</span></code><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#SpectatorNodeError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.SpectatorNodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.nodes.NodeError" title="abipy.flowtk.nodes.NodeError"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.NodeError</span></code></a></p>
<p>Exception raised by <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> methods when the node is in spectator mode
and we are calling a method with side effects.</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.Node">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">Node</span></code><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Abstract base class defining the interface that must be
implemented by the nodes of the calculation.</p>
<p>Nodes are hashable and can be tested for equality</p>
<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.Results">
<code class="sig-name descname"><span class="pre">Results</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.Results" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.flowtk.nodes.NodeResults" title="abipy.flowtk.nodes.NodeResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.NodeResults</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.flowtk.nodes.NodeError" title="abipy.flowtk.nodes.NodeError"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.NodeError</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.SpectatorError">
<code class="sig-name descname"><span class="pre">SpectatorError</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.SpectatorError" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.flowtk.nodes.SpectatorNodeError" title="abipy.flowtk.nodes.SpectatorNodeError"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.SpectatorNodeError</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_INIT">
<code class="sig-name descname"><span class="pre">S_INIT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Initialized,</span> <span class="pre">at</span> <span class="pre">140603944704064&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_INIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_LOCKED">
<code class="sig-name descname"><span class="pre">S_LOCKED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Locked,</span> <span class="pre">at</span> <span class="pre">140603944704128&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_LOCKED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_READY">
<code class="sig-name descname"><span class="pre">S_READY</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Ready,</span> <span class="pre">at</span> <span class="pre">140603944704192&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_READY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_SUB">
<code class="sig-name descname"><span class="pre">S_SUB</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Submitted,</span> <span class="pre">at</span> <span class="pre">140603944704256&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_SUB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_RUN">
<code class="sig-name descname"><span class="pre">S_RUN</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Running,</span> <span class="pre">at</span> <span class="pre">140603944704320&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_RUN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_DONE">
<code class="sig-name descname"><span class="pre">S_DONE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Done,</span> <span class="pre">at</span> <span class="pre">140603944704384&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_DONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_ABICRITICAL">
<code class="sig-name descname"><span class="pre">S_ABICRITICAL</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">AbiCritical,</span> <span class="pre">at</span> <span class="pre">140603944704448&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_ABICRITICAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_QCRITICAL">
<code class="sig-name descname"><span class="pre">S_QCRITICAL</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">QCritical,</span> <span class="pre">at</span> <span class="pre">140603944704512&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_QCRITICAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_UNCONVERGED">
<code class="sig-name descname"><span class="pre">S_UNCONVERGED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Unconverged,</span> <span class="pre">at</span> <span class="pre">140603944704576&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_UNCONVERGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_ERROR">
<code class="sig-name descname"><span class="pre">S_ERROR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Error,</span> <span class="pre">at</span> <span class="pre">140603944704640&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.S_OK">
<code class="sig-name descname"><span class="pre">S_OK</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;Status:</span> <span class="pre">Completed,</span> <span class="pre">at</span> <span class="pre">140603944704704&gt;</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.S_OK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.ALL_STATUS">
<code class="sig-name descname"><span class="pre">ALL_STATUS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;Status:</span> <span class="pre">Initialized,</span> <span class="pre">at</span> <span class="pre">140603944704064&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Locked,</span> <span class="pre">at</span> <span class="pre">140603944704128&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Ready,</span> <span class="pre">at</span> <span class="pre">140603944704192&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Submitted,</span> <span class="pre">at</span> <span class="pre">140603944704256&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Running,</span> <span class="pre">at</span> <span class="pre">140603944704320&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Done,</span> <span class="pre">at</span> <span class="pre">140603944704384&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">AbiCritical,</span> <span class="pre">at</span> <span class="pre">140603944704448&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">QCritical,</span> <span class="pre">at</span> <span class="pre">140603944704512&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Unconverged,</span> <span class="pre">at</span> <span class="pre">140603944704576&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Error,</span> <span class="pre">at</span> <span class="pre">140603944704640&gt;,</span> <span class="pre">&lt;Status:</span> <span class="pre">Completed,</span> <span class="pre">at</span> <span class="pre">140603944704704&gt;]</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.ALL_STATUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.Node.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.41176471,</span> <span class="pre">0.41176471,</span> <span class="pre">0.41176471])</span></em><a class="headerlink" href="#abipy.flowtk.nodes.Node.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.color_hex">
<code class="sig-name descname"><span class="pre">color_hex</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.color_hex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.color_hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Node color as Hex Triplet <a class="reference external" href="https://en.wikipedia.org/wiki/Web_colors#Hex_triplet">https://en.wikipedia.org/wiki/Web_colors#Hex_triplet</a></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.isinstance">
<code class="sig-name descname"><span class="pre">isinstance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_or_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.isinstance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.isinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the node is a instance of <cite>class_or_string</cite>.
Unlinke the standard isinstance builtin, the method accepts either a class or a string.
In the later case, the string is compared with self.__class__.__name__ (case insensitive).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.as_node">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">as_node</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.as_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.as_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into a Node instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>obj if obj is a Node instance,
cast obj to <a class="reference internal" href="#abipy.flowtk.nodes.FileNode" title="abipy.flowtk.nodes.FileNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileNode</span></code></a> instance of obj is a string.
None if obj is None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.name">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">name</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the node
(only used for facilitating its identification in the user interface).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.relworkdir">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">relworkdir</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.relworkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a relative version of the workdir</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.set_name">
<code class="sig-name descname"><span class="pre">set_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.set_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.set_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the name of the Node.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.node_id">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">node_id</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.node_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Node identifier.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.set_node_id">
<code class="sig-name descname"><span class="pre">set_node_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.set_node_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.set_node_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the node identifier. Use it carefully!</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.finalized">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">finalized</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.finalized" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the <cite>Node</cite> has been finalized.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.in_spectator_mode">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">in_spectator_mode</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.in_spectator_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.corrections">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">corrections</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.corrections" title="Permalink to this definition">¶</a></dt>
<dd><p>List of dictionaries with infornation on the actions performed to solve <cite>AbiCritical</cite> Events.
Each dictionary contains the <cite>AbinitEvent</cite> who triggered the correction and
a human-readable message with the description of the operation performed.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.num_corrections">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_corrections</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.num_corrections" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.log_correction">
<code class="sig-name descname"><span class="pre">log_correction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.log_correction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.log_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should be called once we have fixed the problem associated to this event.
It adds a new entry in the correction history of the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitEvent</span></code> that triggered the correction.</p></li>
<li><p><strong>action</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Human-readable string with info on the action perfomed to solve the problem.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.is_file">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_file</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this node is a file</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.is_task">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_task</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.is_task" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this node is a Task</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.is_work">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_work</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.is_work" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this node is a Work</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.is_flow">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_flow</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.is_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this node is a Flow</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.deps">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">deps</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.deps" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="#abipy.flowtk.nodes.Dependency" title="abipy.flowtk.nodes.Dependency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code></a> objects defining the dependencies
of this <cite>Node</cite>. Empty list if this <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a> does not have dependencies.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.add_deps">
<code class="sig-name descname"><span class="pre">add_deps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.add_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.add_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of dependencies to the <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deps</strong> – List of <a class="reference internal" href="#abipy.flowtk.nodes.Dependency" title="abipy.flowtk.nodes.Dependency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code></a> objects specifying the dependencies of the node.
or dictionary mapping nodes to file extensions e.g. {task: “DEN”}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.merge_deps">
<code class="sig-name descname"><span class="pre">merge_deps</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.merge_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.merge_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Group all extensions associated to the same node in a single list.
Useful for cases in which we may end up with the same node appearing more than once
in self.deps. See e.g. <code class="docutils literal notranslate"><span class="pre">add_deps</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.remove_deps">
<code class="sig-name descname"><span class="pre">remove_deps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.remove_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.remove_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a list of dependencies from the <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deps</strong> – List of <a class="reference internal" href="#abipy.flowtk.nodes.Dependency" title="abipy.flowtk.nodes.Dependency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dependency</span></code></a> objects specifying the  dependencies of the node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.deps_status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">deps_status</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.deps_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list with the status of the dependencies.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.depends_on">
<code class="sig-name descname"><span class="pre">depends_on</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.depends_on"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.depends_on" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this node depends on the other node.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.find_parent_with_ext">
<code class="sig-name descname"><span class="pre">find_parent_with_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.find_parent_with_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.find_parent_with_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the parent (usually a <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>) that produces the file with extension <cite>ext</cite>.
Raises ValueError if multiple parents are found.
Return None if no parent is found.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.get_parents">
<code class="sig-name descname"><span class="pre">get_parents</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.get_parents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.get_parents" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of nodes in the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> required by this <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.get_children">
<code class="sig-name descname"><span class="pre">get_children</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.get_children"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.get_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of nodes in the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> that depends on this <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This routine assumes the entire flow has been allocated.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.str_deps">
<code class="sig-name descname"><span class="pre">str_deps</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.str_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.str_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the string representation of the dependencies of the node.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.get_vars_dataframe">
<code class="sig-name descname"><span class="pre">get_vars_dataframe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">varnames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.get_vars_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.get_vars_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return pandas DataFrame with the value of the variables specified in <cite>varnames</cite>.
Can be used for task/works/flow. It’s recursive!</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.get_graphviz_dirtree">
<code class="sig-name descname"><span class="pre">get_graphviz_dirtree</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'automatic'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.get_graphviz_dirtree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.get_graphviz_dirtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate directory graph in the DOT language. The graph show the files and directories
in the node workdir.</p>
<p>Returns: graphviz.Digraph &lt;<a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#digraph">https://graphviz.readthedocs.io/en/stable/api.html#digraph</a>&gt;</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.set_gc">
<code class="sig-name descname"><span class="pre">set_gc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.set_gc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.set_gc" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the garbage collector.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.gc">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">gc</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.gc" title="Permalink to this definition">¶</a></dt>
<dd><p>Garbage collector. None if garbage collection is deactivated.
Use flow.set_garbage_collector to initialize the object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.event_handlers">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">event_handlers</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.event_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of handlers registered for this node.
If the node is not a <cite>Flow</cite> and does not have its own list of
<cite>handlers</cite> the handlers registered at the level of the flow are returned.</p>
<p>This trick allows one to registered different handlers at the level of the Task
for testing purposes. By default, we have a common list of handlers for all the nodes in the flow.
This choice facilitates the automatic installation of the handlers when we use callbacks to generate
new Works and Tasks!</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.install_event_handlers">
<code class="sig-name descname"><span class="pre">install_event_handlers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">categories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handlers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.install_event_handlers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.install_event_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Install the <cite>EventHandlers for this `Node</cite>. If no argument is provided
the default list of handlers is installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>categories</strong> – List of categories to install e.g. base + can_change_physics</p></li>
<li><p><strong>handlers</strong> – explicit list of <code class="xref py py-class docutils literal notranslate"><span class="pre">EventHandler</span></code> instances.
This is the most flexible way to install handlers.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>categories and handlers are mutually exclusive.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.show_event_handlers">
<code class="sig-name descname"><span class="pre">show_event_handlers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">stream=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></em>, <em class="sig-param"><span class="pre">verbose=0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.show_event_handlers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.show_event_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Print to <cite>stream</cite> the event handlers installed for this flow.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.send_signal">
<code class="sig-name descname"><span class="pre">send_signal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.send_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.send_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Send signal from this node to all connected receivers unless the node is in spectator mode.</p>
<p>signal – (hashable) signal value, see <cite>dispatcher</cite> connect for details</p>
<p>Return a list of tuple pairs [(receiver, response), … ]
or None if the node is in spectator mode.</p>
<p>if any receiver raises an error, the error propagates back
through send, terminating the dispatch loop, so it is quite
possible to not have all receivers called if a raises an error.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.write_json_in_outdir">
<code class="sig-name descname"><span class="pre">write_json_in_outdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.write_json_in_outdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.write_json_in_outdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to json file of basename filename inside the outdir directory of the node.
Support MSONable objects. Return path of json file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.status">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#abipy.flowtk.nodes.Node.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the <cite>Node</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.Node.check_status">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">check_status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#Node.check_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.Node.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of the <cite>Node</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.FileNode">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">FileNode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.nodes.Node" title="abipy.flowtk.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.nodes.Node</span></code></a></p>
<p>A Node that consists of a file. May be not yet existing</p>
<p>Mainly used to connect <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> objects to external files produced in previous runs.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.nodes.FileNode.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.4,</span> <span class="pre">0.2,</span> <span class="pre">1.</span> <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.basename">
<code class="sig-name descname"><span class="pre">basename</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.basename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Basename of the file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.products">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">products</span></code><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.products" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.opath_from_ext">
<code class="sig-name descname"><span class="pre">opath_from_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.opath_from_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.opath_from_ext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the <cite>Node</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.check_status">
<code class="sig-name descname"><span class="pre">check_status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.check_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of the <cite>Node</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.get_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.add_filechild">
<code class="sig-name descname"><span class="pre">add_filechild</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.add_filechild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.add_filechild" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a node (usually Task) to the children of this FileNode.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.filechildren">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filechildren</span></code><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.filechildren" title="Permalink to this definition">¶</a></dt>
<dd><p>List with the children (nodes) of this FileNode.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.abiopen">
<code class="sig-name descname"><span class="pre">abiopen</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.abiopen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.abiopen" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.FileNode.open_gsr">
<code class="sig-name descname"><span class="pre">open_gsr</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#FileNode.open_gsr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.FileNode.open_gsr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.HistoryRecord">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">HistoryRecord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#HistoryRecord"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A <cite>HistoryRecord</cite> instance represents an entry in the <a class="reference internal" href="#abipy.flowtk.nodes.NodeHistory" title="abipy.flowtk.nodes.NodeHistory"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeHistory</span></code></a>.</p>
<p><cite>HistoryRecord</cite> instances are created every time something is logged.
They contain all the information pertinent to the event being logged.
The main information passed in is in msg and args, which are combined
using str(msg) % args to create the message field of the record.
The record also includes information such as when the record was created,
the source line where the logging call was made</p>
<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.levelno">
<code class="sig-name descname"><span class="pre">levelno</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.levelno" title="Permalink to this definition">¶</a></dt>
<dd><p>Numeric logging level for the message (DEBUG, INFO, WARNING, ERROR, CRITICAL)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.levelname">
<code class="sig-name descname"><span class="pre">levelname</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.levelname" title="Permalink to this definition">¶</a></dt>
<dd><p>Text logging level for the message (“DEBUG”, “INFO”, “WARNING”, “ERROR”, “CRITICAL”)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.pathname">
<code class="sig-name descname"><span class="pre">pathname</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.pathname" title="Permalink to this definition">¶</a></dt>
<dd><p>Full pathname of the source file where the logging call was issued (if available)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.filename">
<code class="sig-name descname"><span class="pre">filename</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Filename portion of pathname</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.module">
<code class="sig-name descname"><span class="pre">module</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.module" title="Permalink to this definition">¶</a></dt>
<dd><p>Module (name portion of filename)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.lineno">
<code class="sig-name descname"><span class="pre">lineno</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.lineno" title="Permalink to this definition">¶</a></dt>
<dd><p>Source line number where the logging call was issued (if available)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.func_name">
<code class="sig-name descname"><span class="pre">func_name</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.func_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Function name</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.created">
<code class="sig-name descname"><span class="pre">created</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.created" title="Permalink to this definition">¶</a></dt>
<dd><p>Time when the HistoryRecord was created (time.time() return value)</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.asctime">
<code class="sig-name descname"><span class="pre">asctime</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.asctime" title="Permalink to this definition">¶</a></dt>
<dd><p>Textual time when the HistoryRecord was created</p>
</dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.nodes.HistoryRecord.message">
<code class="sig-name descname"><span class="pre">message</span></code><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.message" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">The</span> <span class="pre">result</span> <span class="pre">of</span> <span class="pre">record.getMessage(),</span> <span class="pre">computed</span> <span class="pre">just</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">record</span> <span class="pre">is</span> <span class="pre">emitted</span></code></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.HistoryRecord.get_message">
<code class="sig-name descname"><span class="pre">get_message</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asctime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#HistoryRecord.get_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.get_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the message after merging any user-supplied arguments with the message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metadata</strong> – True if function and module name should be added.</p></li>
<li><p><strong>asctime</strong> – True if time string should be added.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.HistoryRecord.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#HistoryRecord.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.HistoryRecord.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#HistoryRecord.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.HistoryRecord.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.NodeHistory">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">NodeHistory</span></code><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.deque" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a></p>
<p>Logger-like object</p>
<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeHistory.to_string">
<code class="sig-name descname"><span class="pre">to_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory.to_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns  a string with the history. Set metadata to True to have info on function and module.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeHistory.info">
<code class="sig-name descname"><span class="pre">info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory.info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with the info severity level</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeHistory.warning">
<code class="sig-name descname"><span class="pre">warning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory.warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with the warning severity level</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeHistory.critical">
<code class="sig-name descname"><span class="pre">critical</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory.critical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory.critical" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with the critical severity level</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.nodes.NodeHistory.debug">
<code class="sig-name descname"><span class="pre">debug</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeHistory.debug"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeHistory.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Log ‘msg % args’ with the critical severity level</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.NodeCorrections">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">NodeCorrections</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#NodeCorrections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.NodeCorrections" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p>
<p>Iterable storing the correctios performed by the <code class="xref py py-class docutils literal notranslate"><span class="pre">EventHandler</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.nodes.GarbageCollector">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">GarbageCollector</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#GarbageCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.GarbageCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object stores information on the</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.nodes.init_counter">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">init_counter</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#init_counter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.init_counter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.nodes.get_newnode_id">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">get_newnode_id</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#get_newnode_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.get_newnode_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new node identifier used for <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>, <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> and <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> objects.</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.nodes.save_lastnode_id">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.nodes.</span></code><code class="sig-name descname"><span class="pre">save_lastnode_id</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/nodes.html#save_lastnode_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.nodes.save_lastnode_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the id of the last node created.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.pseudos">
<span id="pseudos-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pseudos</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.pseudos" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-abipy.flowtk.qadapters">
<span id="qadapters-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qadapters</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.qadapters" title="Permalink to this headline">¶</a></h2>
<p>The initial version of this module was based on a similar implementation
present in FireWorks (<a class="reference external" href="https://pypi.python.org/pypi/FireWorks">https://pypi.python.org/pypi/FireWorks</a>).
Work done by D. Waroquiers, A. Jain, and M. Kocher.</p>
<p>The main difference wrt the Fireworks implementation is that the QueueAdapter
objects provide a programmatic interface for setting important attributes
such as the number of MPI nodes, the number of OMP threads and the memory requirements.
This programmatic interface is used by the <cite>TaskManager</cite> for optimizing the parameters
of the run before submitting the job (Abinit provides the autoparal option that
allows one to get a list of parallel configuration and their expected efficiency).</p>
<dl class="py function">
<dt id="abipy.flowtk.qadapters.make_qadapter">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qadapters.</span></code><code class="sig-name descname"><span class="pre">make_qadapter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qadapters.html#make_qadapter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qadapters.make_qadapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the concrete <code class="xref py py-class docutils literal notranslate"><span class="pre">QueueAdapter</span></code> class from a string.
Note that one can register a customized version with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qadapters</span> <span class="kn">import</span> <span class="n">SlurmAdapter</span>

<span class="k">class</span> <span class="nc">MyAdapter</span><span class="p">(</span><span class="n">SlurmAdapter</span><span class="p">):</span>
    <span class="n">QTYPE</span> <span class="o">=</span> <span class="s2">&quot;myslurm&quot;</span>
    <span class="c1"># Add your customized code here</span>

<span class="c1"># Register your class.</span>
<span class="n">SlurmAdapter</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyAdapter</span><span class="p">)</span>

<span class="n">make_qadapter</span><span class="p">(</span><span class="n">qtype</span><span class="o">=</span><span class="s2">&quot;myslurm&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>MyAdapter should be pickleable, hence one should declare it
at the module level so that pickle can import it at run-time.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.qha">
<span id="qha-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qha</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.qha" title="Permalink to this headline">¶</a></h2>
<p>Workflows for calculations within the quasi-harmonic approximation.</p>
<dl class="py class">
<dt id="abipy.flowtk.qha.RelaxAndPhononWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qha.</span></code><code class="sig-name descname"><span class="pre">RelaxAndPhononWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#RelaxAndPhononWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.RelaxAndPhononWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work performs a structural relaxation for different volumes, then it uses
the relaxed structures to compute phonons, BECS and the dielectric tensor with DFPT.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-ed27549e143d68eaeb49fcd03340839f7147ad3d.png" alt="Inheritance diagram of RelaxAndPhononWork" usemap="#inheritance52aade09f2" class="inheritance graphviz" /></div>
<map id="inheritance52aade09f2" name="inheritance52aade09f2">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,137,23"/>
<area shape="rect" id="node2" href="#abipy.flowtk.qha.RelaxAndPhononWork" target="_top" title="This work performs a structural relaxation for different volumes, then it uses" alt="" coords="560,23,764,43"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="391,23,522,43"/>
</map><dl class="py method">
<dt id="abipy.flowtk.qha.RelaxAndPhononWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volumes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optcell</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ionmov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edos_ngkpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#RelaxAndPhononWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.RelaxAndPhononWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the work from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a GS-SCF calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF used as template to generate the other inputs.</p></li>
<li><p><strong>volumes</strong> – List of volumes in Ang**3</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>optcell</strong> – Abinit input variables.</p></li>
<li><p><strong>ionmov</strong> – Abinit input variables.</p></li>
<li><p><strong>edos_ngkpt</strong> – Three integers defining the the k-sampling for the computation of the
electron DOS with the relaxed structures. Useful for metals or small gap semiconductors
in which the electronic contribution should be included.
None disables the computation of the e-DOS.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qha.RelaxAndPhononWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#RelaxAndPhononWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.RelaxAndPhononWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is called when all tasks in the Work reach status <cite>S_OK</cite>.
Here are add a new PhononWork for each volume using the relaxed structure.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qha.QhaFlow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qha.</span></code><code class="sig-name descname"><span class="pre">QhaFlow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#QhaFlow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.QhaFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-fdee423e188be8a91c530db117504aa247cfc1f8.png" alt="Inheritance diagram of QhaFlow" usemap="#inheritance75b1b02d31" class="inheritance graphviz" /></div>
<map id="inheritance75b1b02d31" name="inheritance75b1b02d31">
<area shape="rect" id="node1" href="#abipy.flowtk.flows.Flow" target="_top" title="This object is a container of work. Its main task is managing the" alt="" coords="275,53,431,77"/>
<area shape="rect" id="node5" href="#abipy.flowtk.qha.QhaFlow" target="_top" title=".. rubric:: Inheritance Diagram" alt="" coords="479,53,652,77"/>
<area shape="rect" id="node2" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="33,5,199,29"/>
</map><dl class="py method">
<dt id="abipy.flowtk.qha.QhaFlow.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volumes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edos_ngkpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#QhaFlow.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.QhaFlow.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a> for QHA calculations from an <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir</strong> – Working directory of the flow.</p></li>
<li><p><strong>scf_input</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for GS-SCF run used as template to generate the other inputs.</p></li>
<li><p><strong>volumes</strong> – List of volumes in Ang**3.</p></li>
<li><p><strong>ngqpt</strong> – Three integers defining the q-mesh for phonon calculation.</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>edos_ngkpt</strong> – Three integers defining the the k-sampling for the computation of the
electron DOS with the relaxed structures. Useful for metals or small gap semiconductors
in which the electronic contribution should be included.
None disables the computation of the e-DOS.</p></li>
<li><p><strong>metadata</strong> – Dictionary with metadata to be be added to the final JSON file.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> instance. Use default if None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qha.QhaFlow.finalize">
<code class="sig-name descname"><span class="pre">finalize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qha.html#QhaFlow.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qha.QhaFlow.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when the flow is completed.
It performs some basic post-processing of the results to facilitate further analysis.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.qjobs">
<span id="qjobs-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qjobs</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.qjobs" title="Permalink to this headline">¶</a></h2>
<p>Objects and methods to contact the resource manager to get info on the status of the job and useful statistics.
Note that this is not a wrapper for the C API but a collection of simple wrappers around the shell commands
provided by the resource manager  (qsub, qdel and qstat for PBS, sinfo, squeue… for Slurm).
The main goal indeed is providing a simplified common interface for different resource managers without
having to rely on external libraries.</p>
<dl class="py class">
<dt id="abipy.flowtk.qjobs.JobStatus">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">JobStatus</span></code><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#JobStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.JobStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
<p>This object is an integer representing the status of a <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueueJob</span></code></a>.</p>
<p>Slurm API, see <cite>man squeue</cite>.</p>
<dl>
<dt>JOB STATE CODES</dt><dd><p>Jobs typically pass through several states in the course of their execution. The typical states are
PENDING, RUNNING, SUSPENDED, COMPLETING, and COMPLETED. An explanation of each state follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BF</span>  <span class="n">BOOT_FAIL</span>       <span class="n">Job</span>  <span class="n">terminated</span>  <span class="n">due</span>  <span class="n">to</span> <span class="n">launch</span> <span class="n">failure</span><span class="p">,</span> <span class="n">typically</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">hardware</span> <span class="n">failure</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span>
                    <span class="n">unable</span> <span class="n">to</span> <span class="n">boot</span> <span class="n">the</span> <span class="n">node</span> <span class="ow">or</span> <span class="n">block</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">job</span> <span class="n">can</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">requeued</span><span class="p">)</span><span class="o">.</span>
<span class="n">CA</span>  <span class="n">CANCELLED</span>       <span class="n">Job</span> <span class="n">was</span> <span class="n">explicitly</span> <span class="n">cancelled</span> <span class="n">by</span> <span class="n">the</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">system</span> <span class="n">administrator</span><span class="o">.</span>
                    <span class="n">The</span> <span class="n">job</span> <span class="n">may</span> <span class="ow">or</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">have</span> <span class="n">been</span> <span class="n">initiated</span><span class="o">.</span>
<span class="n">CD</span>  <span class="n">COMPLETED</span>       <span class="n">Job</span> <span class="n">has</span> <span class="n">terminated</span> <span class="nb">all</span> <span class="n">processes</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">nodes</span><span class="o">.</span>
<span class="n">CF</span>  <span class="n">CONFIGURING</span>     <span class="n">Job</span> <span class="n">has</span> <span class="n">been</span> <span class="n">allocated</span> <span class="n">resources</span><span class="p">,</span> <span class="n">but</span> <span class="n">are</span> <span class="n">waiting</span> <span class="k">for</span> <span class="n">them</span> <span class="n">to</span> <span class="n">become</span> <span class="n">ready</span> <span class="k">for</span> <span class="n">use</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">booting</span><span class="p">)</span><span class="o">.</span>
<span class="n">CG</span>  <span class="n">COMPLETING</span>      <span class="n">Job</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">process</span> <span class="n">of</span> <span class="n">completing</span><span class="o">.</span> <span class="n">Some</span> <span class="n">processes</span> <span class="n">on</span> <span class="n">some</span>  <span class="n">nodes</span> <span class="n">may</span> <span class="n">still</span> <span class="n">be</span> <span class="n">active</span><span class="o">.</span>
<span class="n">F</span>   <span class="n">FAILED</span>          <span class="n">Job</span> <span class="n">terminated</span> <span class="k">with</span> <span class="n">non</span><span class="o">-</span><span class="n">zero</span> <span class="n">exit</span> <span class="n">code</span> <span class="ow">or</span> <span class="n">other</span> <span class="n">failure</span> <span class="n">condition</span><span class="o">.</span>
<span class="n">NF</span>  <span class="n">NODE_FAIL</span>       <span class="n">Job</span> <span class="n">terminated</span> <span class="n">due</span> <span class="n">to</span> <span class="n">failure</span> <span class="n">of</span> <span class="n">one</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">allocated</span> <span class="n">nodes</span><span class="o">.</span>
<span class="n">PD</span>  <span class="n">PENDING</span>         <span class="n">Job</span> <span class="ow">is</span> <span class="n">awaiting</span> <span class="n">resource</span> <span class="n">allocation</span><span class="o">.</span>
<span class="n">PR</span>  <span class="n">PREEMPTED</span>       <span class="n">Job</span> <span class="n">terminated</span> <span class="n">due</span> <span class="n">to</span> <span class="n">preemption</span><span class="o">.</span>
<span class="n">R</span>   <span class="n">RUNNING</span>         <span class="n">Job</span> <span class="n">currently</span> <span class="n">has</span> <span class="n">an</span> <span class="n">allocation</span><span class="o">.</span>
<span class="n">S</span>   <span class="n">SUSPENDED</span>       <span class="n">Job</span> <span class="n">has</span> <span class="n">an</span> <span class="n">allocation</span><span class="p">,</span> <span class="n">but</span> <span class="n">execution</span> <span class="n">has</span> <span class="n">been</span> <span class="n">suspended</span><span class="o">.</span>
<span class="n">TO</span>  <span class="n">TIMEOUT</span>         <span class="n">Job</span> <span class="n">terminated</span> <span class="n">upon</span> <span class="n">reaching</span> <span class="n">its</span> <span class="n">time</span> <span class="n">limit</span><span class="o">.</span>
<span class="n">SE</span> <span class="n">SPECIAL_EXIT</span>     <span class="n">The</span> <span class="n">job</span> <span class="n">was</span> <span class="n">requeued</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">special</span> <span class="n">state</span><span class="o">.</span> <span class="n">This</span> <span class="n">state</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="n">by</span> <span class="n">users</span><span class="p">,</span> <span class="n">typically</span>
                    <span class="ow">in</span> <span class="n">EpilogSlurmctld</span><span class="p">,</span> <span class="k">if</span> <span class="n">the</span> <span class="n">job</span> <span class="n">has</span> <span class="n">terminated</span> <span class="k">with</span> <span class="n">a</span> <span class="n">particular</span> <span class="n">exit</span> <span class="n">value</span><span class="o">.</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt id="abipy.flowtk.qjobs.JobStatus.from_string">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#JobStatus.from_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.JobStatus.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#abipy.flowtk.qjobs.JobStatus" title="abipy.flowtk.qjobs.JobStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobStatus</span></code></a> instance from its string representation.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.QueueJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">QueueJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object provides methods to contact the resource manager to get info on the status
of the job and useful statistics. This is an abstract class.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_UNKNOWN">
<code class="sig-name descname"><span class="pre">S_UNKNOWN</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">UNKNOWN,</span> <span class="pre">at</span> <span class="pre">140603944348608&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_UNKNOWN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_PENDING">
<code class="sig-name descname"><span class="pre">S_PENDING</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">PENDING,</span> <span class="pre">at</span> <span class="pre">140603944348672&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_PENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_RUNNING">
<code class="sig-name descname"><span class="pre">S_RUNNING</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">RUNNING,</span> <span class="pre">at</span> <span class="pre">140603944348736&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_RUNNING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_RESIZING">
<code class="sig-name descname"><span class="pre">S_RESIZING</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">RESIZING,</span> <span class="pre">at</span> <span class="pre">140603944348800&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_RESIZING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_SUSPENDED">
<code class="sig-name descname"><span class="pre">S_SUSPENDED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">SUSPENDED,</span> <span class="pre">at</span> <span class="pre">140603944348864&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_SUSPENDED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_COMPLETED">
<code class="sig-name descname"><span class="pre">S_COMPLETED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">COMPLETED,</span> <span class="pre">at</span> <span class="pre">140603944348928&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_COMPLETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_CANCELLED">
<code class="sig-name descname"><span class="pre">S_CANCELLED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">CANCELLED,</span> <span class="pre">at</span> <span class="pre">140603944348992&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_CANCELLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_FAILED">
<code class="sig-name descname"><span class="pre">S_FAILED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">FAILED,</span> <span class="pre">at</span> <span class="pre">140603944349056&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_FAILED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_TIMEOUT">
<code class="sig-name descname"><span class="pre">S_TIMEOUT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">TIMEOUT,</span> <span class="pre">at</span> <span class="pre">140603944349120&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_PREEMPTED">
<code class="sig-name descname"><span class="pre">S_PREEMPTED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">PREEMPTED,</span> <span class="pre">at</span> <span class="pre">140603944349184&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_PREEMPTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.QueueJob.S_NODEFAIL">
<code class="sig-name descname"><span class="pre">S_NODEFAIL</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">NODEFAIL,</span> <span class="pre">at</span> <span class="pre">140603944349248&gt;</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.S_NODEFAIL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.from_qtype_and_id">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">from_qtype_and_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.from_qtype_and_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.from_qtype_and_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new istance of the appropriate subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qtype</strong> – String specifying the Resource manager type.</p></li>
<li><p><strong>queue_id</strong> – Job identifier.</p></li>
<li><p><strong>qname</strong> – Name of the queue (optional).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.is_completed">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_completed</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.is_completed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.is_running">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_running</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.is_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.is_failed">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_failed</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.is_failed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.timeout">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">timeout</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.has_node_failures">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_node_failures</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.has_node_failures" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.unknown_status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">unknown_status</span></code><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.unknown_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.set_status_exitcode_signal">
<code class="sig-name descname"><span class="pre">set_status_exitcode_signal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitcode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.set_status_exitcode_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.set_status_exitcode_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.likely_code_error">
<code class="sig-name descname"><span class="pre">likely_code_error</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.likely_code_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.likely_code_error" title="Permalink to this definition">¶</a></dt>
<dd><p>See &lt;<a class="reference external" href="http://man7.org/linux/man-pages/man7/signal.7.html">http://man7.org/linux/man-pages/man7/signal.7.html</a>&gt;</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 7%" />
<col style="width: 74%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>SIGHUP</p></td>
<td><p>1</p></td>
<td><p>Term</p></td>
<td><p>Hangup detected on controlling terminal or death of controlling process</p></td>
</tr>
<tr class="row-even"><td><p>SIGINT</p></td>
<td><p>2</p></td>
<td><p>Term</p></td>
<td><p>Interrupt from keyboard</p></td>
</tr>
<tr class="row-odd"><td><p>SIGQUIT</p></td>
<td><p>3</p></td>
<td><p>Core</p></td>
<td><p>Quit from keyboard</p></td>
</tr>
<tr class="row-even"><td><p>SIGILL</p></td>
<td><p>4</p></td>
<td><p>Core</p></td>
<td><p>Illegal Instruction</p></td>
</tr>
<tr class="row-odd"><td><p>SIGABRT</p></td>
<td><p>6</p></td>
<td><p>Core</p></td>
<td><p>Abort signal from abort(3)</p></td>
</tr>
<tr class="row-even"><td><p>SIGFPE</p></td>
<td><p>8</p></td>
<td><p>Core</p></td>
<td><p>Floating point exception</p></td>
</tr>
<tr class="row-odd"><td><p>SIGKILL</p></td>
<td><p>9</p></td>
<td><p>Term</p></td>
<td><p>Kill signal</p></td>
</tr>
<tr class="row-even"><td><p>SIGSEGV</p></td>
<td><p>11</p></td>
<td><p>Core</p></td>
<td><p>Invalid memory reference</p></td>
</tr>
<tr class="row-odd"><td><p>SIGPIPE</p></td>
<td><p>13</p></td>
<td><p>Term</p></td>
<td><p>Broken pipe: write to pipe with no readers</p></td>
</tr>
<tr class="row-even"><td><p>SIGALRM</p></td>
<td><p>14</p></td>
<td><p>Term</p></td>
<td><p>Timer signal from alarm(2)</p></td>
</tr>
<tr class="row-odd"><td><p>SIGTERM</p></td>
<td><p>15</p></td>
<td><p>Term</p></td>
<td><p>Termination signal</p></td>
</tr>
<tr class="row-even"><td><p>SIGUSR1</p></td>
<td><p>30,10,16</p></td>
<td><p>Term</p></td>
<td><p>User-defined signal 1</p></td>
</tr>
<tr class="row-odd"><td><p>SIGUSR2</p></td>
<td><p>31,12,17</p></td>
<td><p>Term</p></td>
<td><p>User-defined signal 2</p></td>
</tr>
<tr class="row-even"><td><p>SIGCHLD</p></td>
<td><p>20,17,18</p></td>
<td><p>Ign</p></td>
<td><p>Child stopped or terminated</p></td>
</tr>
<tr class="row-odd"><td><p>SIGCONT</p></td>
<td><p>19,18,25</p></td>
<td><p>Cont</p></td>
<td><p>Continue if stopped</p></td>
</tr>
<tr class="row-even"><td><p>SIGSTOP</p></td>
<td><p>17,19,23</p></td>
<td><p>Stop</p></td>
<td><p>Stop process</p></td>
</tr>
<tr class="row-odd"><td><p>SIGTSTP</p></td>
<td><p>18,20,24</p></td>
<td><p>Stop</p></td>
<td><p>Stop typed at terminal</p></td>
</tr>
<tr class="row-even"><td><p>SIGTTIN</p></td>
<td><p>21,21,26</p></td>
<td><p>Stop</p></td>
<td><p>Terminal input for background process</p></td>
</tr>
<tr class="row-odd"><td><p>SIGTTOU</p></td>
<td><p>22,22,27</p></td>
<td><p>Stop</p></td>
<td><p>Terminal output for background process</p></td>
</tr>
</tbody>
</table>
<p>The signals SIGKILL and SIGSTOP cannot be caught, blocked, or ignored.
Next the signals not in the POSIX.1-1990 standard but described in SUSv2 and POSIX.1-2001.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 13%" />
<col style="width: 12%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Signal</p></td>
<td><p>Value</p></td>
<td><p>Action</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-even"><td><p>SIGBUS</p></td>
<td><p>10,7,10</p></td>
<td><p>Core</p></td>
<td><p>Bus error (bad memory access)</p></td>
</tr>
<tr class="row-odd"><td><p>SIGPOLL</p></td>
<td></td>
<td><p>Term</p></td>
<td><p>Pollable event (Sys V).
Synonym for SIGIO</p></td>
</tr>
<tr class="row-even"><td><p>SIGPROF</p></td>
<td><p>27,27,29</p></td>
<td><p>Term</p></td>
<td><p>Profiling timer expired</p></td>
</tr>
<tr class="row-odd"><td><p>SIGSYS</p></td>
<td><p>12,31,12</p></td>
<td><p>Core</p></td>
<td><p>Bad argument to routine (SVr4)</p></td>
</tr>
<tr class="row-even"><td><p>SIGTRAP</p></td>
<td><p>5</p></td>
<td><p>Core</p></td>
<td><p>Trace/breakpoint trap</p></td>
</tr>
<tr class="row-odd"><td><p>SIGURG</p></td>
<td><p>16,23,21</p></td>
<td><p>Ign</p></td>
<td><p>Urgent condition on socket (4.2BSD)</p></td>
</tr>
<tr class="row-even"><td><p>SIGVTALRM</p></td>
<td><p>26,26,28</p></td>
<td><p>Term</p></td>
<td><p>Virtual alarm clock (4.2BSD)</p></td>
</tr>
<tr class="row-odd"><td><p>SIGXCPU</p></td>
<td><p>24,24,30</p></td>
<td><p>Core</p></td>
<td><p>CPU time limit exceeded (4.2BSD)</p></td>
</tr>
<tr class="row-even"><td><p>SIGXFSZ</p></td>
<td><p>25,25,31</p></td>
<td><p>Core</p></td>
<td><p>File size limit exceeded (4.2BSD)</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.received_signal">
<code class="sig-name descname"><span class="pre">received_signal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.received_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.received_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.estimated_start_time">
<code class="sig-name descname"><span class="pre">estimated_start_time</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.estimated_start_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.estimated_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return date with estimated start time. None if it cannot be detected</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.get_info">
<code class="sig-name descname"><span class="pre">get_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.get_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.get_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.get_nodes">
<code class="sig-name descname"><span class="pre">get_nodes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.get_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.get_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.QueueJob.get_stats">
<code class="sig-name descname"><span class="pre">get_stats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#QueueJob.get_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.QueueJob.get_stats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.ShellJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">ShellJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#ShellJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.ShellJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Handler for Shell jobs.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.ShellJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'shell'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.ShellJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.SlurmJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">SlurmJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#SlurmJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.SlurmJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Handler for Slurm jobs.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.SlurmJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'slurm'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.SlurmJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.SlurmJob.estimated_start_time">
<code class="sig-name descname"><span class="pre">estimated_start_time</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#SlurmJob.estimated_start_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.SlurmJob.estimated_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return date with estimated start time. None if it cannot be detected</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.SlurmJob.get_info">
<code class="sig-name descname"><span class="pre">get_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#SlurmJob.get_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.SlurmJob.get_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.SlurmJob.get_stats">
<code class="sig-name descname"><span class="pre">get_stats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#SlurmJob.get_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.SlurmJob.get_stats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.PbsProJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">PbsProJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#PbsProJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.PbsProJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Handler for PbsPro Jobs.</p>
<p>See also <a class="reference external" href="https://github.com/plediii/pbs_util">https://github.com/plediii/pbs_util</a> for a similar project.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.PbsProJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'pbspro'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.PbsProJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.PbsProJob.PBSSTAT_TO_SLURM">
<code class="sig-name descname"><span class="pre">PBSSTAT_TO_SLURM</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'E':</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">FAILED,</span> <span class="pre">at</span> <span class="pre">140603944349056&gt;,</span> <span class="pre">'F':</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">COMPLETED,</span> <span class="pre">at</span> <span class="pre">140603944348928&gt;,</span> <span class="pre">'Q':</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">PENDING,</span> <span class="pre">at</span> <span class="pre">140603944348672&gt;,</span> <span class="pre">'R':</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">RUNNING,</span> <span class="pre">at</span> <span class="pre">140603944348736&gt;,</span> <span class="pre">'S':</span> <span class="pre">&lt;JobStatus:</span> <span class="pre">SUSPENDED,</span> <span class="pre">at</span> <span class="pre">140603944348864&gt;}</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.PbsProJob.PBSSTAT_TO_SLURM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.PbsProJob.estimated_start_time">
<code class="sig-name descname"><span class="pre">estimated_start_time</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#PbsProJob.estimated_start_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.PbsProJob.estimated_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return date with estimated start time. None if it cannot be detected</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.qjobs.PbsProJob.get_info">
<code class="sig-name descname"><span class="pre">get_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#PbsProJob.get_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.PbsProJob.get_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.TorqueJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">TorqueJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#TorqueJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.TorqueJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Not supported</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.TorqueJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'torque'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.TorqueJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.SgeJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">SgeJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#SgeJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.SgeJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Not supported</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.SgeJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'sge'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.SgeJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.MoabJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">MoabJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#MoabJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.MoabJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Not supported</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.MoabJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'moab'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.MoabJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.qjobs.BlueGeneJob">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qjobs.</span></code><code class="sig-name descname"><span class="pre">BlueGeneJob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnknownQueue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qjobs.html#BlueGeneJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qjobs.BlueGeneJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.qjobs.QueueJob" title="abipy.flowtk.qjobs.QueueJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.qjobs.QueueJob</span></code></a></p>
<p>Not supported</p>
<dl class="py attribute">
<dt id="abipy.flowtk.qjobs.BlueGeneJob.QTYPE">
<code class="sig-name descname"><span class="pre">QTYPE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'bluegene'</span></em><a class="headerlink" href="#abipy.flowtk.qjobs.BlueGeneJob.QTYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.qutils">
<span id="qutils-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qutils</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.qutils" title="Permalink to this headline">¶</a></h2>
<p>Collection of low-level tools that faciliate the interface with resource managers.</p>
<p>The preferred way of importing this module is:</p>
<blockquote>
<div><p>import qutils as qu</p>
</div></blockquote>
<dl class="py function">
<dt id="abipy.flowtk.qutils.slurm_parse_timestr">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">slurm_parse_timestr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#slurm_parse_timestr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.slurm_parse_timestr" title="Permalink to this definition">¶</a></dt>
<dd><p>A slurm time parser. Accepts a string in one the following forms:</p>
<blockquote>
<div><p># “days-hours”,
# “days-hours:minutes”,
# “days-hours:minutes:seconds”.
# “minutes”,
# “minutes:seconds”,
# “hours:minutes:seconds”,</p>
</div></blockquote>
<p>Returns: Time in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.qutils.time2slurm">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">time2slurm</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'s'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#time2slurm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.time2slurm" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a number representing a time value in the given unit (Default: seconds)
to a string following the slurm convention: “days-hours:minutes:seconds”.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">time2slurm</span><span class="p">(</span><span class="mi">61</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;0-0:1:1&#39;</span> <span class="ow">and</span> <span class="n">time2slurm</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;0-1:0:1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">time2slurm</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;0-0:30:0&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.qutils.time2pbspro">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">time2pbspro</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'s'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#time2pbspro"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.time2pbspro" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a number representing a time value in the given unit (Default: seconds)
to a string following the PbsPro convention: “hours:minutes:seconds”.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">time2pbspro</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;48:0:0&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.qutils.time2loadlever">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">time2loadlever</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'s'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#time2loadlever"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.time2loadlever" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a number representing a time value in the given unit (Default: seconds)
to a string following the LoadLever convention. format hh:mm:ss (hours:minutes:seconds)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">time2loadlever</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;48:00:00&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.qutils.timelimit_parser">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">timelimit_parser</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#timelimit_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.timelimit_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a float or a string into time in seconds.</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.qutils.any2mb">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.qutils.</span></code><code class="sig-name descname"><span class="pre">any2mb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/qutils.html#any2mb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.qutils.any2mb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert string or number to memory in megabytes.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.tasks">
<span id="tasks-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tasks</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.tasks" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions and classes related to Task objects.</p>
<dl class="py class">
<dt id="abipy.flowtk.tasks.TaskManager">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">TaskManager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A <cite>TaskManager</cite> is responsible for the generation of the job script and the submission
of the task, as well as for the specification of the parameters passed to the resource manager
(e.g. Slurm, PBS …) and/or the run-time specification of the ABINIT variables governing the parallel execution.
A <cite>TaskManager</cite> delegates the generation of the submission script and the submission of the task to the <code class="xref py py-class docutils literal notranslate"><span class="pre">QueueAdapter</span></code>.
A <cite>TaskManager</cite> has a <code class="xref py py-class docutils literal notranslate"><span class="pre">TaskPolicy</span></code> that governs the specification of the parameters for the parallel executions.
Ideally, the TaskManager should be the <strong>main entry point</strong> used by the task to deal with job submission/optimization</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.TaskManager.YAML_FILE">
<code class="sig-name descname"><span class="pre">YAML_FILE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'manager.yml'</span></em><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.YAML_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.TaskManager.USER_CONFIG_DIR">
<code class="sig-name descname"><span class="pre">USER_CONFIG_DIR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'/Users/gmatteo/.abinit/abipy'</span></em><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.USER_CONFIG_DIR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.TaskManager.ENTRIES">
<code class="sig-name descname"><span class="pre">ENTRIES</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'batch_adapter',</span> <span class="pre">'db_connector',</span> <span class="pre">'policy',</span> <span class="pre">'qadapters'}</span></em><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.ENTRIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.autodoc">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">autodoc</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.autodoc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.autodoc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.get_simple_manager">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">get_simple_manager</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.get_simple_manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.get_simple_manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.from_user_config">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_user_config</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.from_user_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.from_user_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> from the YAML file ‘manager.yaml’.
Search first in the working directory and then in the AbiPy configuration directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError if file is not found.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.from_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the configuration parameters from the Yaml file filename.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.from_string">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.from_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an instance from string s containing a YAML dictionary.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.as_manager">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">as_manager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.as_manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.as_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into TaskManager instance. Accepts string, filepath, dictionary, <cite>TaskManager</cite> object.
If obj is None, the manager is initialized from the user config file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an instance from a dictionary.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.abinit_build">
<code class="sig-name descname"><span class="pre">abinit_build</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.abinit_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.abinit_build" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#abipy.flowtk.tasks.AbinitBuild" title="abipy.flowtk.tasks.AbinitBuild"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitBuild</span></code></a> object with Abinit version and options used to build the code</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.to_shell_manager">
<code class="sig-name descname"><span class="pre">to_shell_manager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.to_shell_manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.to_shell_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> with the same parameters as self but replace the <code class="xref py py-class docutils literal notranslate"><span class="pre">QueueAdapter</span></code>
with a <code class="xref py py-class docutils literal notranslate"><span class="pre">ShellAdapter</span></code> with mpi_procs so that we can submit the job without passing through the queue.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.new_with_fixed_mpi_omp">
<code class="sig-name descname"><span class="pre">new_with_fixed_mpi_omp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omp_threads</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.new_with_fixed_mpi_omp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.new_with_fixed_mpi_omp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <cite>TaskManager</cite> in which autoparal has been disabled.
The jobs will be executed with <cite>mpi_procs</cite> MPI processes and <cite>omp_threads</cite> OpenMP threads.
Useful for generating input files for benchmarks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.has_queue">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_queue</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.has_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>True if we are submitting jobs via a queue manager.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.qads">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">qads</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.qads" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <code class="xref py py-class docutils literal notranslate"><span class="pre">QueueAdapter</span></code> objects sorted according to priorities (highest comes first)</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.qadapter">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">qadapter</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.qadapter" title="Permalink to this definition">¶</a></dt>
<dd><p>The qadapter used to submit jobs.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.select_qadapter">
<code class="sig-name descname"><span class="pre">select_qadapter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pconfs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.select_qadapter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.select_qadapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of parallel configurations, pconfs, this method select an <cite>optimal</cite> configuration
according to some criterion as well as the <code class="xref py py-class docutils literal notranslate"><span class="pre">QueueAdapter</span></code> to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pconfs</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.ParalHints" title="abipy.flowtk.tasks.ParalHints"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParalHints</span></code></a> object with the list of parallel configurations</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ParallelConf</span></code> object with the <cite>optimal</cite> configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.has_db">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_db</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.has_db" title="Permalink to this definition">¶</a></dt>
<dd><p>True if we are using MongoDB database</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.has_omp">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">has_omp</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.has_omp" title="Permalink to this definition">¶</a></dt>
<dd><p>True if we are using OpenMP parallelization.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.num_cores">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">num_cores</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.num_cores" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of CPUs used to run the task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.mpi_procs">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">mpi_procs</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.mpi_procs" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of MPI processes.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.mem_per_proc">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">mem_per_proc</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.mem_per_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>Memory per MPI process.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.omp_threads">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">omp_threads</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.omp_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of OpenMP threads</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.deepcopy">
<code class="sig-name descname"><span class="pre">deepcopy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.deepcopy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.deepcopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy of self.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.set_mpi_procs">
<code class="sig-name descname"><span class="pre">set_mpi_procs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.set_mpi_procs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.set_mpi_procs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of MPI processes to use.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.set_omp_threads">
<code class="sig-name descname"><span class="pre">set_omp_threads</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">omp_threads</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.set_omp_threads"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.set_omp_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of OpenMp threads to use.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.set_mem_per_proc">
<code class="sig-name descname"><span class="pre">set_mem_per_proc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mem_mb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.set_mem_per_proc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.set_mem_per_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the memory (in Megabytes) per CPU.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.max_cores">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">max_cores</span></code><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.max_cores" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of cores that can be used.
This value is mainly used in the autoparal part to get the list of possible configurations.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.get_njobs_in_queue">
<code class="sig-name descname"><span class="pre">get_njobs_in_queue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.get_njobs_in_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.get_njobs_in_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the number of jobs in the queue,
returns None when the number of jobs cannot be determined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>username</strong> – (str) the username of the jobs to count (default is to autodetect)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.cancel">
<code class="sig-name descname"><span class="pre">cancel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the job. Returns exit status.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.write_jobfile">
<code class="sig-name descname"><span class="pre">write_jobfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.write_jobfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.write_jobfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the submission script. Return the path of the script</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exec_args</p></td>
<td><p>List of arguments passed to task.executable.
Default: no arguments.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.launch">
<code class="sig-name descname"><span class="pre">launch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.launch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the input files and submit the task via the <code class="xref py py-class docutils literal notranslate"><span class="pre">Qadapter</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Process object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.get_collection">
<code class="sig-name descname"><span class="pre">get_collection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.get_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.get_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the MongoDB collection used to store the results.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.increase_mem">
<code class="sig-name descname"><span class="pre">increase_mem</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.increase_mem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.increase_mem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.increase_ncpus">
<code class="sig-name descname"><span class="pre">increase_ncpus</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.increase_ncpus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.increase_ncpus" title="Permalink to this definition">¶</a></dt>
<dd><p>increase the number of cpus, first ask the current qadapter, if that one raises a QadapterIncreaseError
switch to the next qadapter. If all fail raise an ManagerIncreaseError</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.increase_resources">
<code class="sig-name descname"><span class="pre">increase_resources</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.increase_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.increase_resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.exclude_nodes">
<code class="sig-name descname"><span class="pre">exclude_nodes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.exclude_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.exclude_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.TaskManager.increase_time">
<code class="sig-name descname"><span class="pre">increase_time</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#TaskManager.increase_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.TaskManager.increase_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.AbinitBuild">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">AbinitBuild</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitBuild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object stores information on the options used to build Abinit</p>
<blockquote>
<div><dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.info">
<code class="sig-name descname"><span class="pre">info</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.info" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">String</span> <span class="pre">with</span> <span class="pre">build</span> <span class="pre">information</span> <span class="pre">as</span> <span class="pre">produced</span> <span class="pre">by</span> <span class="pre">`abinit</span> <span class="pre">-b`</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.version">
<code class="sig-name descname"><span class="pre">version</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.version" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">Abinit</span> <span class="pre">version</span> <span class="pre">number</span> <span class="pre">e.g</span> <span class="pre">8.0.1</span> <span class="pre">(string)</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.has_netcdf">
<code class="sig-name descname"><span class="pre">has_netcdf</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.has_netcdf" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">True</span> <span class="pre">if</span> <span class="pre">netcdf</span> <span class="pre">is</span> <span class="pre">enabled.</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.has_libxc">
<code class="sig-name descname"><span class="pre">has_libxc</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.has_libxc" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">True</span> <span class="pre">if</span> <span class="pre">libxc</span> <span class="pre">is</span> <span class="pre">enabled.</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.has_omp">
<code class="sig-name descname"><span class="pre">has_omp</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.has_omp" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">True</span> <span class="pre">if</span> <span class="pre">OpenMP</span> <span class="pre">is</span> <span class="pre">enabled.</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.has_mpi">
<code class="sig-name descname"><span class="pre">has_mpi</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.has_mpi" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">True</span> <span class="pre">if</span> <span class="pre">MPI</span> <span class="pre">is</span> <span class="pre">enabled.</span></code></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitBuild.has_mpiio">
<code class="sig-name descname"><span class="pre">has_mpiio</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.has_mpiio" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname"><span class="pre">True</span> <span class="pre">if</span> <span class="pre">MPI-IO</span> <span class="pre">is</span> <span class="pre">supported.</span></code></dt>
<dd></dd></dl>

</div></blockquote>
<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitBuild.version_ge">
<code class="sig-name descname"><span class="pre">version_ge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitBuild.version_ge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.version_ge" title="Permalink to this definition">¶</a></dt>
<dd><p>True is Abinit version is &gt;= version_string</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitBuild.compare_version">
<code class="sig-name descname"><span class="pre">compare_version</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitBuild.compare_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitBuild.compare_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare Abinit version to <cite>version_string</cite> with operator <cite>op</cite></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.ParalHintsParser">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">ParalHintsParser</span></code><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHintsParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHintsParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.ParalHintsParser.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.tasks.ParalHintsParser.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ParalHintsError</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHintsParser.add_error">
<code class="sig-name descname"><span class="pre">add_error</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errmsg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHintsParser.add_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHintsParser.add_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHintsParser.parse">
<code class="sig-name descname"><span class="pre">parse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHintsParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHintsParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the <cite>AutoParal</cite> section (YAML format) from filename.
Assumes the file contains only one section.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.ParalHints">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">ParalHints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code></a></p>
<p>Iterable with the hints for the parallel execution reported by ABINIT.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.ParalHints.Error">
<code class="sig-name descname"><span class="pre">Error</span></code><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ParalHintsError</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.from_mpi_omp_lists">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_mpi_omp_lists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omp_threads</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.from_mpi_omp_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.from_mpi_omp_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a list of Parallel configurations from two lists
containing the number of MPI processes and the number of OpenMP threads
i.e. product(mpi_procs, omp_threads).
The configuration have parallel efficiency set to 1.0 and no input variables.
Mainly used for preparing benchmarks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.max_cores">
<code class="sig-name descname"><span class="pre">max_cores</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.max_cores"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.max_cores" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of cores.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.max_mem_per_proc">
<code class="sig-name descname"><span class="pre">max_mem_per_proc</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.max_mem_per_proc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.max_mem_per_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum memory per MPI process.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.max_speedup">
<code class="sig-name descname"><span class="pre">max_speedup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.max_speedup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.max_speedup" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum speedup.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.max_efficiency">
<code class="sig-name descname"><span class="pre">max_efficiency</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.max_efficiency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.max_efficiency" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum parallel efficiency.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.copy">
<code class="sig-name descname"><span class="pre">copy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Shallow copy of self.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.select_with_condition">
<code class="sig-name descname"><span class="pre">select_with_condition</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.select_with_condition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.select_with_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the configurations that do not satisfy the given condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> – dict or <code class="xref py py-class docutils literal notranslate"><span class="pre">Condition</span></code> object with operators expressed with a Mongodb-like syntax</p></li>
<li><p><strong>key</strong> – Selects the sub-dictionary on which condition is applied, e.g. key=”vars”
if we have to filter the configurations depending on the values in vars</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.sort_by_efficiency">
<code class="sig-name descname"><span class="pre">sort_by_efficiency</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.sort_by_efficiency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.sort_by_efficiency" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the configurations in place. items with highest efficiency come first</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.sort_by_speedup">
<code class="sig-name descname"><span class="pre">sort_by_speedup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.sort_by_speedup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.sort_by_speedup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the configurations in place. items with highest speedup come first</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.sort_by_mem_per_proc">
<code class="sig-name descname"><span class="pre">sort_by_mem_per_proc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.sort_by_mem_per_proc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.sort_by_mem_per_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the configurations in place. items with lowest memory per proc come first.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.multidimensional_optimization">
<code class="sig-name descname"><span class="pre">multidimensional_optimization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">priorities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('speedup',</span> <span class="pre">'efficiency')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.multidimensional_optimization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.multidimensional_optimization" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ParalHints.get_ordered_with_policy">
<code class="sig-name descname"><span class="pre">get_ordered_with_policy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_ncpus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ParalHints.get_ordered_with_policy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ParalHints.get_ordered_with_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort and return a new list of configurations ordered according to the <code class="xref py py-class docutils literal notranslate"><span class="pre">TaskPolicy</span></code> policy.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.AbinitTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">AbinitTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code></p>
<p>Base class defining an ABINIT calculation</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AbinitTask.Results">
<code class="sig-name descname"><span class="pre">Results</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.Results" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskResults</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.from_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.from_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.from_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an instance of <cite>AbinitTask</cite> from an ABINIT input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ainput</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> object.</p></li>
<li><p><strong>workdir</strong> – Path to the working directory.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.temp_shell_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">temp_shell_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.temp_shell_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.temp_shell_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a Task with a temporary workdir. The task is executed via the shell with 1 MPI proc.
Mainly used for invoking Abinit to get important parameters needed to prepare the real task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mpi_procs</strong> – Number of MPI processes to use.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Abinit has the very <em>bad</em> habit of changing the file extension by appending the characters in [A,B …, Z]
to the output file, and this breaks a lot of code that relies of the use of a unique file extension.
Here we fix this issue by renaming run.abo to run.abo_[number] if the output file “run.abo” already
exists. A few lines of code in python, a lot of problems if you try to implement this trick in Fortran90.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.executable">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">executable</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the executable required for running the Task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.pseudos">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pseudos</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.pseudos" title="Permalink to this definition">¶</a></dt>
<dd><p>List of pseudos used in the calculation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.isnc">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">isnc</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.isnc" title="Permalink to this definition">¶</a></dt>
<dd><p>True if norm-conserving calculation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.ispaw">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ispaw</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.ispaw" title="Permalink to this definition">¶</a></dt>
<dd><p>True if PAW calculation</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.is_gs_task">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_gs_task</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.is_gs_task" title="Permalink to this definition">¶</a></dt>
<dd><p>True if task is GsTask subclass.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.is_dfpt_task">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_dfpt_task</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.is_dfpt_task" title="Permalink to this definition">¶</a></dt>
<dd><p>True if task is a DftpTask subclass.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.cycle_class">
<code class="sig-name descname"><span class="pre">cycle_class</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.cycle_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.cycle_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subclass of ScfCycle associated to the task or
None if no SCF algorithm if associated to the task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.filesfile_string">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filesfile_string</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.filesfile_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String with the list of files and prefixes needed to execute ABINIT.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.set_pconfs">
<code class="sig-name descname"><span class="pre">set_pconfs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pconfs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.set_pconfs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.set_pconfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the list of autoparal configurations.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.pconfs">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pconfs</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.pconfs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of autoparal configurations.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.uses_paral_kgb">
<code class="sig-name descname"><span class="pre">uses_paral_kgb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.uses_paral_kgb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.uses_paral_kgb" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the task is a GS Task and uses paral_kgb with the given value.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.autoparal_run">
<code class="sig-name descname"><span class="pre">autoparal_run</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.autoparal_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.autoparal_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an optimal set of parameters for the execution of the task
This method can change the ABINIT input variables and/or the
submission parameters e.g. the number of CPUs for MPI and OpenMp.</p>
<dl class="simple">
<dt>Set:</dt><dd><p>self.pconfs where pconfs is a <a class="reference internal" href="#abipy.flowtk.tasks.ParalHints" title="abipy.flowtk.tasks.ParalHints"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParalHints</span></code></a> object with the configuration reported by
autoparal and optimal is the optimal configuration selected.
Returns 0 if success</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.find_optconf">
<code class="sig-name descname"><span class="pre">find_optconf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pconfs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.find_optconf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.find_optconf" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the optimal Parallel configuration.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.select_files">
<code class="sig-name descname"><span class="pre">select_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'o'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.select_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.select_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function used to select the files of a task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>what</strong> – string with the list of characters selecting the file type
Possible choices:
i ==&gt; input_file,
o ==&gt; output_file,
f ==&gt; files_file,
j ==&gt; job_file,
l ==&gt; log_file,
e ==&gt; stderr_file,
q ==&gt; qout_file,
all ==&gt; all files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.restart">
<code class="sig-name descname"><span class="pre">restart</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>general restart used when scheduler problems have been taken care of</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.reset_from_scratch">
<code class="sig-name descname"><span class="pre">reset_from_scratch</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.reset_from_scratch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.reset_from_scratch" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart from scratch, this is to be used if a job is restarted with more resources after a crash</p>
<p>Move output files produced in workdir to _reset otherwise check_status continues
to see the task as crashed even if the job did not run</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.fix_abicritical">
<code class="sig-name descname"><span class="pre">fix_abicritical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.fix_abicritical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.fix_abicritical" title="Permalink to this definition">¶</a></dt>
<dd><p>method to fix crashes/error caused by abinit</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1 if task has been fixed else 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.fix_queue_critical">
<code class="sig-name descname"><span class="pre">fix_queue_critical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.fix_queue_critical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.fix_queue_critical" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tries to fix critical events originating from the queue submission system.</p>
<p>General strategy, first try to increase resources in order to fix the problem,
if this is not possible, call a task specific method to attempt to decrease the demands.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1 if task has been fixed else 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AbinitTask.parse_timing">
<code class="sig-name descname"><span class="pre">parse_timing</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AbinitTask.parse_timing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AbinitTask.parse_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the timer data in the main output file of Abinit.
Requires timopt /= 0 in the input file (usually timopt = -1)</p>
<p>Return: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitTimerParser</span></code> instance, None if error.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.ScfTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">ScfTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ScfTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.GsTask</span></code></p>
<p>Self-consistent ground-state calculations.
Provide support for in-place restart via (WFK|DEN) files</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.ScfTask.CRITICAL_EVENTS">
<code class="sig-name descname"><span class="pre">CRITICAL_EVENTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;class</span> <span class="pre">'abipy.flowtk.events.ScfConvergenceWarning'&gt;]</span></em><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.CRITICAL_EVENTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.ScfTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.,</span> <span class="pre">0.,</span> <span class="pre">0.])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ScfTask.restart">
<code class="sig-name descname"><span class="pre">restart</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ScfTask.restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>SCF calculations can be restarted if we have either the WFK file or the DEN file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ScfTask.inspect">
<code class="sig-name descname"><span class="pre">inspect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ScfTask.inspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the SCF cycle results with matplotlib.</p>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> or None if some error occurred.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ScfTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ScfTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.ScfTask.add_ebands_task_to_work">
<code class="sig-name descname"><span class="pre">add_ebands_task_to_work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndivsm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolwfr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_nband</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ScfTask.add_ebands_task_to_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ScfTask.add_ebands_task_to_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an NSCF task form band structure calculation from a GS SCF task and add it to the work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>work</strong> – </p></li>
<li><p><strong>ndivsm</strong> – if &gt; 0, it’s the number of divisions for the smallest segment of the path (Abinit variable).
if &lt; 0, it’s interpreted as the pymatgen <cite>line_density</cite> parameter in which the number of points
in the segment is proportional to its length. Typical value: -20.
This option is the recommended one if the k-path contains two high symmetry k-points that are very close
as ndivsm &gt; 0 may produce a very large number of wavevectors.</p></li>
<li><p><strong>tolwfr</strong> – Tolerance on residuals for NSCF calculation.</p></li>
<li><p><strong>nscf_nband</strong> – Number of bands for NSCF calculation. If None, use nband + nb_extra</p></li>
</ul>
</dd>
</dl>
<p>return: NscfTask object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.NscfTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">NscfTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#NscfTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.GsTask</span></code></p>
<p>Non-Self-consistent GS calculation. Provide in-place restart via WFK files</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.NscfTask.CRITICAL_EVENTS">
<code class="sig-name descname"><span class="pre">CRITICAL_EVENTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;class</span> <span class="pre">'abipy.flowtk.events.NscfConvergenceWarning'&gt;]</span></em><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask.CRITICAL_EVENTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.NscfTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.78431373,</span> <span class="pre">0.31372549,</span> <span class="pre">0.39215686])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.NscfTask.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#NscfTask.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>NSCF calculations should use the same FFT mesh as the one employed in the GS task
(in principle, it’s possible to interpolate inside Abinit but tests revealed some numerical noise
Here we change the input file of the NSCF task to have the same FFT mesh.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.NscfTask.restart">
<code class="sig-name descname"><span class="pre">restart</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#NscfTask.restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>NSCF calculations can be restarted only if we have the WFK file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.NscfTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#NscfTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.NscfTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.RelaxTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">RelaxTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.GsTask</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ProduceHist</span></code></p>
<p>Task for structural optimizations.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.RelaxTask.CRITICAL_EVENTS">
<code class="sig-name descname"><span class="pre">CRITICAL_EVENTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;class</span> <span class="pre">'abipy.flowtk.events.RelaxConvergenceWarning'&gt;]</span></em><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.CRITICAL_EVENTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.RelaxTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">,</span> <span class="pre">0.23921569,</span> <span class="pre">1.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.get_final_structure">
<code class="sig-name descname"><span class="pre">get_final_structure</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.get_final_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.get_final_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the final structure from the GSR file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.restart">
<code class="sig-name descname"><span class="pre">restart</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart the structural relaxation.</p>
<p>Structure relaxations can be restarted only if we have the WFK file or the DEN or the GSR file
from which we can read the last structure (mandatory) and the wavefunctions (not mandatory but useful).
Prefer WFK over other files since we can reuse the wavefunctions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The problem in the present approach is that some parameters in the input
are computed from the initial structure and may not be consistent with
the modification of the structure done during the structure relaxation.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.inspect">
<code class="sig-name descname"><span class="pre">inspect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.inspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the evolution of the structural relaxation with matplotlib.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>what</strong> – Either “hist” or “scf”. The first option (default) extracts data
from the HIST file and plot the evolution of the structural
parameters, forces, pressures and energies.
The second option, extracts data from the main output file and
plot the evolution of the SCF cycles (etotal, residuals, etc).</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> or None if some error occurred.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.reduce_dilatmx">
<code class="sig-name descname"><span class="pre">reduce_dilatmx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.01</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.reduce_dilatmx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.reduce_dilatmx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.RelaxTask.fix_ofiles">
<code class="sig-name descname"><span class="pre">fix_ofiles</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#RelaxTask.fix_ofiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.RelaxTask.fix_ofiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that ABINIT produces lots of out_TIM1_DEN files for each step.
Here we list all TIM*_DEN files, we select the last one and we rename it as out_DEN</p>
<p>This change is needed so that we can specify dependencies with the syntax {node: “DEN”}
without having to know the number of iterations needed to converge.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.DdkTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">DdkTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#DdkTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.DdkTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.DfptTask</span></code></p>
<p>Task for DDK calculations.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.DdkTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.</span> <span class="pre">,</span> <span class="pre">0.8,</span> <span class="pre">0.8])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.DdkTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.DdkTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#DdkTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.DdkTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.EffMassTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">EffMassTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#EffMassTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.EffMassTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.DfptTask</span></code></p>
<p>Task for effective mass calculations with DFPT.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.EffMassTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">,</span> <span class="pre">0.47843137,</span> <span class="pre">0.8</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.EffMassTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.PhononTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">PhononTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#PhononTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.PhononTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.DfptTask</span></code></p>
<p>DFPT calculations for a single atomic perturbation.
Provide support for in-place restart via (1WF|1DEN) files</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.PhononTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">,</span> <span class="pre">0.58823529,</span> <span class="pre">0.98039216])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.PhononTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.PhononTask.inspect">
<code class="sig-name descname"><span class="pre">inspect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#PhononTask.inspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.PhononTask.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the Phonon SCF cycle results with matplotlib.</p>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> or None if some error occurred.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.PhononTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#PhononTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.PhononTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.ElasticTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">ElasticTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#ElasticTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.ElasticTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.DfptTask</span></code></p>
<p>DFPT calculations for a single strain perturbation (uniaxial or shear strain).
Provide support for in-place restart via (1WF|1DEN) files</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.ElasticTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.</span> <span class="pre">,</span> <span class="pre">0.8,</span> <span class="pre">1.</span> <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.ElasticTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.SigmaTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">SigmaTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#SigmaTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ManyBodyTask</span></code></p>
<p>Tasks for SIGMA calculations. Provides support for in-place restart via QPS files</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.SigmaTask.CRITICAL_EVENTS">
<code class="sig-name descname"><span class="pre">CRITICAL_EVENTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;class</span> <span class="pre">'abipy.flowtk.events.QPSConvergenceWarning'&gt;]</span></em><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.CRITICAL_EVENTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="abipy.flowtk.tasks.SigmaTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.,</span> <span class="pre">1.,</span> <span class="pre">0.])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.SigmaTask.restart">
<code class="sig-name descname"><span class="pre">restart</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#SigmaTask.restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>general restart used when scheduler problems have been taken care of</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.SigmaTask.sigres_path">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">sigres_path</span></code><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.sigres_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the SIGRES file. Empty string if file is not present.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.SigmaTask.open_sigres">
<code class="sig-name descname"><span class="pre">open_sigres</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#SigmaTask.open_sigres"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.open_sigres" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the SIGRES file located in the in self.outdir.
Returns <a class="reference internal" href="electrons_api.html#abipy.electrons.gw.SigresFile" title="abipy.electrons.gw.SigresFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.electrons.gw.SigresFile</span></code></a> object, None if file could not be found or file is not readable.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.SigmaTask.get_scissors_builder">
<code class="sig-name descname"><span class="pre">get_scissors_builder</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#SigmaTask.get_scissors_builder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.get_scissors_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ScissorsBuilder</span></code> from the SIGRES file.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><strong>RuntimeError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.SigmaTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#SigmaTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.SigmaTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.EphTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">EphTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#EphTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.EphTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.tasks.AbinitTask" title="abipy.flowtk.tasks.AbinitTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AbinitTask</span></code></a></p>
<p>Class for electron-phonon calculations.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.EphTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">,</span> <span class="pre">0.50196078,</span> <span class="pre">0.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.EphTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.KerangeTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">KerangeTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#KerangeTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.KerangeTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.tasks.AbinitTask" title="abipy.flowtk.tasks.AbinitTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AbinitTask</span></code></a></p>
<p>Class for kerange calculations.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.KerangeTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">,</span> <span class="pre">0.50196078,</span> <span class="pre">0.50196078])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.KerangeTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.OpticTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">OpticTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optic_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_ddknc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code></p>
<p>Task for the computation of optical spectra with optic i.e.
RPA without local-field effects and velocity operator computed from DDK files.</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.OpticTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([1.</span> <span class="pre">,</span> <span class="pre">0.8,</span> <span class="pre">0.4])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.set_workdir">
<code class="sig-name descname"><span class="pre">set_workdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chroot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.set_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.set_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the working directory of the task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.set_vars">
<code class="sig-name descname"><span class="pre">set_vars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.set_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.set_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Optic does not use <cite>get</cite> or <cite>ird</cite> variables hence we should never try
to change the input when we connect this task</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.executable">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">executable</span></code><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the executable required for running the <a class="reference internal" href="#abipy.flowtk.tasks.OpticTask" title="abipy.flowtk.tasks.OpticTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpticTask</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.filesfile_string">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filesfile_string</span></code><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.filesfile_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String with the list of files and prefixes needed to execute ABINIT.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.wfk_filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">wfk_filepath</span></code><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.wfk_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the WFK file produced by the NSCF run.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.ddk_filepaths">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ddk_filepaths</span></code><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.ddk_filepaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the DDK files produced by the DDK runs.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.make_input">
<code class="sig-name descname"><span class="pre">make_input</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.make_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.make_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct and write the input file of the calculation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Public method called before submitting the task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.make_links">
<code class="sig-name descname"><span class="pre">make_links</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.make_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.make_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Optic allows the user to specify the paths of the input file.
hence we don’t need to create symbolic links.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.fix_abicritical">
<code class="sig-name descname"><span class="pre">fix_abicritical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.fix_abicritical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.fix_abicritical" title="Permalink to this definition">¶</a></dt>
<dd><p>Cannot fix abicritical errors for optic</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.reset_from_scratch">
<code class="sig-name descname"><span class="pre">reset_from_scratch</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.reset_from_scratch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.reset_from_scratch" title="Permalink to this definition">¶</a></dt>
<dd><p>restart from scratch, this is to be used if a job is restarted with more resources after a crash</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.fix_queue_critical">
<code class="sig-name descname"><span class="pre">fix_queue_critical</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.fix_queue_critical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.fix_queue_critical" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tries to fix critical events originating from the queue submission system.</p>
<p>General strategy, first try to increase resources in order to fix the problem,
if this is not possible, call a task specific method to attempt to decrease the demands.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1 if task has been fixed else 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.OpticTask.autoparal_run">
<code class="sig-name descname"><span class="pre">autoparal_run</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#OpticTask.autoparal_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.OpticTask.autoparal_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an optimal set of parameters for the execution of the Optic task
This method can change the submission parameters e.g. the number of CPUs for MPI and OpenMp.</p>
<p>Returns 0 if success</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.tasks.AnaddbTask">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">AnaddbTask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">anaddb_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddb_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gkk_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code></p>
<p>Task for Anaddb runs (post-processing of DFPT calculations).</p>
<dl class="py attribute">
<dt id="abipy.flowtk.tasks.AnaddbTask.color_rgb">
<code class="sig-name descname"><span class="pre">color_rgb</span></code><em class="property"> <span class="pre">=</span> <span class="pre">array([0.8,</span> <span class="pre">0.4,</span> <span class="pre">1.</span> <span class="pre">])</span></em><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.color_rgb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.temp_shell_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">temp_shell_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddb_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpi_procs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gkk_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.temp_shell_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.temp_shell_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#abipy.flowtk.tasks.AnaddbTask" title="abipy.flowtk.tasks.AnaddbTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AnaddbTask</span></code></a> with a temporary workdir. The task is executed via
the shell with 1 MPI proc. Mainly used for post-processing the DDB files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mpi_procs</strong> – Number of MPI processes to use.</p></li>
<li><p><strong>anaddb_input</strong> – string with the anaddb variables.</p></li>
<li><p><strong>ddb_node</strong> – The node that will produce the DDB file. Accept <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>, <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> or filepath.</p></li>
</ul>
</dd>
</dl>
<p>See <cite>AnaddbInit</cite> for the meaning of the other arguments.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.executable">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">executable</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the executable required for running the <a class="reference internal" href="#abipy.flowtk.tasks.AnaddbTask" title="abipy.flowtk.tasks.AnaddbTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.AnaddbTask</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.filesfile_string">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">filesfile_string</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.filesfile_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String with the list of files and prefixes needed to execute ABINIT.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.ddb_filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ddb_filepath</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.ddb_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the input DDB file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.md_filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">md_filepath</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.md_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the input MD file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.gkk_filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">gkk_filepath</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.gkk_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the input GKK file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.ddk_filepath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ddk_filepath</span></code><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.ddk_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (at runtime) the absolute path of the input DKK file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Public method called before submitting the task.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.make_links">
<code class="sig-name descname"><span class="pre">make_links</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.make_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.make_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Anaddb allows the user to specify the paths of the input file.
hence we don’t need to create symbolic links.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.outpath_from_ext">
<code class="sig-name descname"><span class="pre">outpath_from_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.outpath_from_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.outpath_from_ext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.open_phbst">
<code class="sig-name descname"><span class="pre">open_phbst</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.open_phbst"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.open_phbst" title="Permalink to this definition">¶</a></dt>
<dd><p>Open PHBST file produced by Anaddb and returns <a class="reference internal" href="dfpt_api.html#abipy.dfpt.phonons.PhbstFile" title="abipy.dfpt.phonons.PhbstFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.dfpt.phonons.PhbstFile</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.open_phdos">
<code class="sig-name descname"><span class="pre">open_phdos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.open_phdos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.open_phdos" title="Permalink to this definition">¶</a></dt>
<dd><p>Open PHDOS file produced by Anaddb and returns <a class="reference internal" href="dfpt_api.html#abipy.dfpt.phonons.PhdosFile" title="abipy.dfpt.phonons.PhdosFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.dfpt.phonons.PhdosFile</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.tasks.AnaddbTask.get_results">
<code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#AnaddbTask.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.AnaddbTask.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">NodeResults</span></code> instance.
Subclasses should extend this method (if needed) by adding
specialized code that performs some kind of post-processing.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.tasks.set_user_config_taskmanager">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.tasks.</span></code><code class="sig-name descname"><span class="pre">set_user_config_taskmanager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/tasks.html#set_user_config_taskmanager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.tasks.set_user_config_taskmanager" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the default manager returned by TaskManager.from_user_config.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.utils">
<span id="utils-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.utils" title="Permalink to this headline">¶</a></h2>
<p>Tools and helper functions for abinit calculations</p>
<dl class="py function">
<dt id="abipy.flowtk.utils.as_bool">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">as_bool</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#as_bool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.as_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a string into a boolean.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_bool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">as_bool</span><span class="p">(</span><span class="s2">&quot;Yes&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">as_bool</span><span class="p">(</span><span class="s2">&quot;false&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.File">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">File</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Very simple class used to store file basenames, absolute paths and directory names.
Provides wrappers for the most commonly used functions defined in os.path.</p>
<dl class="py method">
<dt id="abipy.flowtk.utils.File.path">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.basename">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">basename</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>File basename.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.relpath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">relpath</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.relpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative path.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.dirname">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">dirname</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.dirname" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the directory where the file is located.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.exists">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">exists</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>True if file exists.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.isncfile">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">isncfile</span></code><a class="headerlink" href="#abipy.flowtk.utils.File.isncfile" title="Permalink to this definition">¶</a></dt>
<dd><p>True if self is a NetCDF file</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.chmod">
<code class="sig-name descname"><span class="pre">chmod</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.chmod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.chmod" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the access permissions of a file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.read">
<code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.readlines">
<code class="sig-name descname"><span class="pre">readlines</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.readlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.readlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Read lines from files.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.write">
<code class="sig-name descname"><span class="pre">write</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write string to file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.writelines">
<code class="sig-name descname"><span class="pre">writelines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.writelines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.writelines" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a list of strings to file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.make_dir">
<code class="sig-name descname"><span class="pre">make_dir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.make_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.make_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the directory where the file is located.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.remove">
<code class="sig-name descname"><span class="pre">remove</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.move">
<code class="sig-name descname"><span class="pre">move</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively move a file or directory to another location. This is
similar to the Unix “mv” command.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.get_stat">
<code class="sig-name descname"><span class="pre">get_stat</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.get_stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.get_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Results from os.stat</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.File.getsize">
<code class="sig-name descname"><span class="pre">getsize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#File.getsize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.File.getsize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the size, in bytes, of path.
Return 0 if the file is empty or it does not exist.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.Directory">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">Directory</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Very simple class that provides helper functions
wrapping the most commonly used functions defined in os.path.</p>
<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.path">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#abipy.flowtk.utils.Directory.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the directory.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.relpath">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">relpath</span></code><a class="headerlink" href="#abipy.flowtk.utils.Directory.relpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative path.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.basename">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">basename</span></code><a class="headerlink" href="#abipy.flowtk.utils.Directory.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory basename.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.path_join">
<code class="sig-name descname"><span class="pre">path_join</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">p</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.path_join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.path_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting ‘/’ as needed.
If any component is an absolute path, all previous path components will be discarded.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.exists">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">exists</span></code><a class="headerlink" href="#abipy.flowtk.utils.Directory.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>True if file exists.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.makedirs">
<code class="sig-name descname"><span class="pre">makedirs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.makedirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.makedirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Super-mkdir; create a leaf directory and all intermediate ones.
Works like mkdir, except that any intermediate path segment (not
just the rightmost) will be created if it does not exist.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.rmtree">
<code class="sig-name descname"><span class="pre">rmtree</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.rmtree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.rmtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively delete the directory tree</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.copy_r">
<code class="sig-name descname"><span class="pre">copy_r</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.copy_r"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.copy_r" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements a recursive copy function similar to Unix’s “cp -r” command.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.clean">
<code class="sig-name descname"><span class="pre">clean</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all files in the directory tree while preserving the directory</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.path_in">
<code class="sig-name descname"><span class="pre">path_in</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_basename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.path_in"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.path_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path of filename in the directory.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.list_filepaths">
<code class="sig-name descname"><span class="pre">list_filepaths</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wildcard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.list_filepaths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.list_filepaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of absolute filepaths in the directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wildcard</strong> – <p>String of tokens separated by “|”. Each token represents a pattern.
If wildcard is not None, we return only those files whose basename matches
the given shell pattern (uses fnmatch).
.. rubric:: Example</p>
<p>wildcard=”<em>.nc|</em>.pdf” selects only those files that end with .nc or .pdf</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.has_abiext">
<code class="sig-name descname"><span class="pre">has_abiext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.has_abiext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.has_abiext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the absolute path of the ABINIT file with extension ext.
Support both Fortran files and netcdf files. In the later case,
we check whether a file with extension ext + “.nc” is present
in the directory. Returns empty string is file is not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – </p></li>
<li><p><strong>This implies that this method is not compatible with multiple datasets.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.symlink_abiext">
<code class="sig-name descname"><span class="pre">symlink_abiext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.symlink_abiext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.symlink_abiext" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a simbolic link (outext –&gt; inext). The file names are implicitly
given by the ABINIT file extension.</p>
<p class="rubric">Example</p>
<p>outdir.symlink_abiext(‘1WF’, ‘DDK’)</p>
<p>creates the link out_DDK that points to out_1WF</p>
<p>Return: 0 if success.</p>
<p>Raise: RuntimeError</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.rename_abiext">
<code class="sig-name descname"><span class="pre">rename_abiext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.rename_abiext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.rename_abiext" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename the Abinit file with extension inext with the new extension outext</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.copy_abiext">
<code class="sig-name descname"><span class="pre">copy_abiext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.copy_abiext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.copy_abiext" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the Abinit file with extension inext to a new file with the extension outext</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.remove_exts">
<code class="sig-name descname"><span class="pre">remove_exts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.remove_exts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.remove_exts" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the files with the given extensions. Unlike rmtree, this function preserves the directory path.
Return list with the absolute paths of the files that have been removed.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.find_last_timden_file">
<code class="sig-name descname"><span class="pre">find_last_timden_file</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.find_last_timden_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.find_last_timden_file" title="Permalink to this definition">¶</a></dt>
<dd><p>ABINIT produces lots of out_TIM1_DEN files for each step and we need to find the lat
one in order to prepare the restart or to connect other tasks to the structural relaxation.</p>
<p>This function finds all the TIM?_DEN files in self and return a namedtuple (path, step)
where <cite>path</cite> is the path of the last TIM?_DEN file and step is the iteration number.
Returns None if the directory does not contain TIM?_DEN files.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.find_1wf_files">
<code class="sig-name descname"><span class="pre">find_1wf_files</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.find_1wf_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.find_1wf_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Abinit adds the idir-ipert index at the end of the 1WF file and this breaks the extension
e.g. out_1WF4. This method scans the files in the directories and returns a list of namedtuple
Each named tuple gives the <cite>path</cite> of the 1FK file and the <cite>pertcase</cite> index.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Directory.find_1den_files">
<code class="sig-name descname"><span class="pre">find_1den_files</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Directory.find_1den_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Directory.find_1den_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Abinit adds the idir-ipert index at the end of the 1DEN file and this breaks the extension
e.g. out_DEN1. This method scans the files in the directories and returns a list of namedtuple
Each named tuple gives the <cite>path</cite> of the 1DEN file and the <cite>pertcase</cite> index.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.utils.irdvars_for_ext">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">irdvars_for_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#irdvars_for_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.irdvars_for_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary with the ABINIT variables
that must be used to read the file with extension ext.</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.utils.abi_extensions">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">abi_extensions</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#abi_extensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.abi_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>List with all the ABINIT extensions that are registered.</p>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.utils.abi_splitext">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">abi_splitext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#abi_splitext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.abi_splitext" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the ABINIT extension from a filename.
“Extension” are found by searching in an internal database.</p>
<p>Returns “(root, ext)” where ext is the registered ABINIT extension
The final “.nc” is included (if any)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">abi_splitext</span><span class="p">(</span><span class="s2">&quot;foo_WFK&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;foo_&#39;</span><span class="p">,</span> <span class="s1">&#39;WFK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">abi_splitext</span><span class="p">(</span><span class="s2">&quot;/home/guido/foo_bar_WFK.nc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;foo_bar_&#39;</span><span class="p">,</span> <span class="s1">&#39;WFK.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.FilepathFixer">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">FilepathFixer</span></code><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#FilepathFixer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.FilepathFixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object modifies the names of particular output files
produced by ABINIT so that the file extension is preserved.
Having a one-to-one mapping between file extension and data format
is indeed fundamental for the correct behaviour of abinit since:</p>
<blockquote>
<div><ul class="simple">
<li><p>We locate the output file by just inspecting the file extension</p></li>
<li><p>We select the variables that must be added to the input file
on the basis of the extension specified by the user during
the initialization of the <cite>AbinitFlow</cite>.</p></li>
</ul>
</div></blockquote>
<p>Unfortunately, ABINIT developers like to append extra stuff
to the initial extension and therefore we have to call
<cite>FilepathFixer</cite> to fix the output files produced by the run.</p>
<p class="rubric">Example</p>
<p>fixer = FilepathFixer()
fixer.fix_paths(‘/foo/out_1WF17’) == {‘/foo/out_1WF17’: ‘/foo/out_1WF’}
fixer.fix_paths(‘/foo/out_1WF5.nc’) == {‘/foo/out_1WF5.nc’: ‘/foo/out_1WF.nc’}</p>
<dl class="py method">
<dt id="abipy.flowtk.utils.FilepathFixer.fix_paths">
<code class="sig-name descname"><span class="pre">fix_paths</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#FilepathFixer.fix_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.FilepathFixer.fix_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix the filenames in the iterable paths</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Mapping old_path –&gt; new_path</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>old2new</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.utils.map2rpn">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">map2rpn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#map2rpn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.map2rpn" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Mongodb-like dictionary to a RPN list of operands and operators.</p>
<p>Reverse Polish notation (RPN) is a mathematical notation in which every
operator follows all of its operands, e.g.</p>
<p>3 - 4 + 5 –&gt;   3 4 - 5 +</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mf">2.0</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$eq&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">map2rpn</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;$eq&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="abipy.flowtk.utils.evaluate_rpn">
<code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">evaluate_rpn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rpn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#evaluate_rpn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.evaluate_rpn" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the RPN form produced my map2rpn.</p>
<p>Returns: bool</p>
</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.Condition">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">Condition</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Condition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object receives a dictionary that defines a boolean condition whose syntax is similar
to the one used in mongodb (albeit not all the operators available in mongodb are supported here).</p>
<p>Example:</p>
<p>$gt: {field: {$gt: value} }</p>
<p>$gt selects those documents where the value of the field is greater than (i.e. &gt;) the specified value.</p>
<p>$and performs a logical AND operation on an array of two or more expressions (e.g. &lt;expression1&gt;, &lt;expression2&gt;, etc.)
and selects the documents that satisfy all the expressions in the array.</p>
<p>{ $and: [ { &lt;expression1&gt; }, { &lt;expression2&gt; } , … , { &lt;expressionN&gt; } ] }</p>
<p>Consider the following example:</p>
<p>db.inventory.find( { qty: { $gt: 20 } } )
This query will select all documents in the inventory collection where the qty field value is greater than 20.
Consider the following example:</p>
<p>db.inventory.find( { qty: { $gt: 20 } } )
db.inventory.find({ $and: [ { price: 1.99 }, { qty: { $lt: 20 } }, { sale: true } ] } )</p>
<dl class="py method">
<dt id="abipy.flowtk.utils.Condition.as_condition">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">as_condition</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Condition.as_condition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Condition.as_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into <a class="reference internal" href="#abipy.flowtk.utils.Condition" title="abipy.flowtk.utils.Condition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Condition</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.Editor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">Editor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">editor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Editor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Editor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrapper class that calls the editor specified by the user
or the one specified in the $EDITOR env variable.</p>
<dl class="py method">
<dt id="abipy.flowtk.utils.Editor.edit_files">
<code class="sig-name descname"><span class="pre">edit_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_for_exit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Editor.edit_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Editor.edit_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Editor.edit_file">
<code class="sig-name descname"><span class="pre">edit_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Editor.edit_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Editor.edit_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.utils.Editor.user_wants_to_exit">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">user_wants_to_exit</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Editor.user_wants_to_exit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Editor.user_wants_to_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Show an interactive prompt asking if exit is wanted.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.SparseHistogram">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">SparseHistogram</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#SparseHistogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.SparseHistogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="abipy.flowtk.utils.SparseHistogram.plot">
<code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#SparseHistogram.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.SparseHistogram.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the histogram with matplotlib, returns <cite>matplotlib</cite> figure.</p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>“abc.png” or “abc.eps” to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.utils.Dirviz">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.utils.</span></code><code class="sig-name descname"><span class="pre">Dirviz</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Dirviz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Dirviz" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="abipy.flowtk.utils.Dirviz.get_cluster_graph">
<code class="sig-name descname"><span class="pre">get_cluster_graph</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fdp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/utils.html#Dirviz.get_cluster_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.utils.Dirviz.get_cluster_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate directory graph in the DOT language. Directories are shown as clusters</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function scans the entire directory tree starting from top so the resulting
graph can be really big.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>engine</strong> – Layout command used. [‘dot’, ‘neato’, ‘twopi’, ‘circo’, ‘fdp’, ‘sfdp’, ‘patchwork’, ‘osage’]</p></li>
<li><p><strong>graph_attr</strong> – Mapping of (attribute, value) pairs for the graph.</p></li>
<li><p><strong>node_attr</strong> – Mapping of (attribute, value) pairs set for all nodes.</p></li>
<li><p><strong>edge_attr</strong> – Mapping of (attribute, value) pairs set for all edges.</p></li>
</ul>
</dd>
</dl>
<p>Returns: graphviz.Digraph &lt;<a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#digraph">https://graphviz.readthedocs.io/en/stable/api.html#digraph</a>&gt;</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.works">
<span id="works-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">works</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.works" title="Permalink to this headline">¶</a></h2>
<p>Works for Abinit</p>
<dl class="py class">
<dt id="abipy.flowtk.works.Work">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">Work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.BaseWork</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.NodeContainer</span></code></p>
<p>A Work is a list of (possibly connected) tasks.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-e606baa5cf24a83f07795f83284b576a0127ef5f.png" alt="Inheritance diagram of Work" usemap="#inheritancefbd85d57fe" class="inheritance graphviz" /></div>
<map id="inheritancefbd85d57fe" name="inheritancefbd85d57fe">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="5,5,171,29"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="489,29,652,53"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.Work.set_manager">
<code class="sig-name descname"><span class="pre">set_manager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.set_manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.set_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> to use to launch the <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.flow">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">flow</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.flow" title="Permalink to this definition">¶</a></dt>
<dd><p>The flow containing this <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.set_flow">
<code class="sig-name descname"><span class="pre">set_flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.set_flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.set_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the flow associated to this <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.pos">
<code class="sig-name descname"><span class="pre">pos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.pos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.pos" title="Permalink to this definition">¶</a></dt>
<dd><p>The position of self in the <a class="reference internal" href="#abipy.flowtk.flows.Flow" title="abipy.flowtk.flows.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.flows.Flow</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.pos_str">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">pos_str</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.pos_str" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation of self.pos</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.set_workdir">
<code class="sig-name descname"><span class="pre">set_workdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chroot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.set_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.set_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the working directory. Cannot be set more than once unless chroot is True</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.chroot">
<code class="sig-name descname"><span class="pre">chroot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.chroot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.chroot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.postpone_on_all_ok">
<code class="sig-name descname"><span class="pre">postpone_on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.postpone_on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.postpone_on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should be called when additional tasks are added to the Work at runtime.
e.g inside an on_all_ok method. This call triggers the allocations of new tasks
so that the scheduler will continue execution since new tasks have been added
and the finalized flag is set to False.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.chunks">
<code class="sig-name descname"><span class="pre">chunks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.chunks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield successive chunks of tasks of lenght chunk_size.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.ipath_from_ext">
<code class="sig-name descname"><span class="pre">ipath_from_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.ipath_from_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.ipath_from_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the path of the output file with extension ext.
Use it when the file does not exist yet.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.opath_from_ext">
<code class="sig-name descname"><span class="pre">opath_from_ext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.opath_from_ext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.opath_from_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the path of the output file with extension ext.
Use it when the file does not exist yet.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.processes">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">processes</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.processes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of objects that support the <cite>subprocess.Popen</cite> protocol.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.all_done">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">all_done</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.all_done" title="Permalink to this definition">¶</a></dt>
<dd><p>True if all the <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> objects in the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a> are done.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.isnc">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">isnc</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.isnc" title="Permalink to this definition">¶</a></dt>
<dd><p>True if norm-conserving calculation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.ispaw">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ispaw</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.ispaw" title="Permalink to this definition">¶</a></dt>
<dd><p>True if PAW calculation.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.status_counter">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status_counter</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.status_counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <cite>Counter</cite> object that counts the number of task with
given status (use the string representation of the status as key).</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.allocate">
<code class="sig-name descname"><span class="pre">allocate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.allocate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.allocate" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called once we have completed the initialization
of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>. It sets the manager of each task (if not already done)
and defines the working directories of the tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.register">
<code class="sig-name descname"><span class="pre">register</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a new <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> and add it to the internal list, taking into account possible dependencies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> instance or <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> object.</p></li>
<li><p><strong>deps</strong> – Dictionary specifying the dependency of this node or list of dependencies
None means that this obj has no dependency.</p></li>
<li><p><strong>required_files</strong> – List of strings with the path of the files used by the task.
Note that the files must exist when the task is registered.
Use the standard approach based on Works, Tasks and deps
if the files will be produced in the future.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task. If manager is None, we use
the <cite>TaskManager</cite> specified during the creation of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p></li>
<li><p><strong>task_class</strong> – Task subclass to instantiate. Default: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitTask</span></code></p></li>
</ul>
</dd>
</dl>
<p>Returns: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> object</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.register_task">
<code class="sig-name descname"><span class="pre">register_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.flowtk.works.Work.register_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a new <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> and add it to the internal list, taking into account possible dependencies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – <a class="reference internal" href="abio_api.html#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> instance or <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> object.</p></li>
<li><p><strong>deps</strong> – Dictionary specifying the dependency of this node or list of dependencies
None means that this obj has no dependency.</p></li>
<li><p><strong>required_files</strong> – List of strings with the path of the files used by the task.
Note that the files must exist when the task is registered.
Use the standard approach based on Works, Tasks and deps
if the files will be produced in the future.</p></li>
<li><p><strong>manager</strong> – The <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> responsible for the submission of the task. If manager is None, we use
the <cite>TaskManager</cite> specified during the creation of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p></li>
<li><p><strong>task_class</strong> – Task subclass to instantiate. Default: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitTask</span></code></p></li>
</ul>
</dd>
</dl>
<p>Returns: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.Task</span></code> object</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.path_in_workdir">
<code class="sig-name descname"><span class="pre">path_in_workdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.path_in_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.path_in_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the absolute path of filename in the working directory.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.setup">
<code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Method called before running the calculations.
The default implementation is empty.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.build">
<code class="sig-name descname"><span class="pre">build</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the top level directory.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.status">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#abipy.flowtk.works.Work.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the status of the work i.e. the minimum of the status of the tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.get_all_status">
<code class="sig-name descname"><span class="pre">get_all_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">only_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.get_all_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.get_all_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list with the status of the tasks in self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>only_min</strong> – If True, the minimum of the status is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.check_status">
<code class="sig-name descname"><span class="pre">check_status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.check_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status of the tasks.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.rmtree">
<code class="sig-name descname"><span class="pre">rmtree</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exclude_wildcard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.rmtree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.rmtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all files and directories in the working directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exclude_wildcard</strong> – Optional string with regular expressions separated by <cite>|</cite>.
Files matching one of the regular expressions will be preserved.
example: exclude_wildard=”<em>.nc|</em>.txt” preserves all the files
whose extension is in [“nc”, “txt”].</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.rm_indatadir">
<code class="sig-name descname"><span class="pre">rm_indatadir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.rm_indatadir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.rm_indatadir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the indata directories.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.rm_outdatadir">
<code class="sig-name descname"><span class="pre">rm_outdatadir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.rm_outdatadir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.rm_outdatadir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the indata directories.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.rm_tmpdatadir">
<code class="sig-name descname"><span class="pre">rm_tmpdatadir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.rm_tmpdatadir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.rm_tmpdatadir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the tmpdata directories.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.move">
<code class="sig-name descname"><span class="pre">move</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isabspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively move self.workdir to another location. This is similar to the Unix “mv” command.
The destination path must not already exist. If the destination already exists
but is not a directory, it may be overwritten depending on os.rename() semantics.</p>
<p>Be default, dest is located in the parent directory of self.workdir, use isabspath=True
to specify an absolute path.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.submit_tasks">
<code class="sig-name descname"><span class="pre">submit_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.submit_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.submit_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits the task in self and wait.
TODO: change name.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.start">
<code class="sig-name descname"><span class="pre">start</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the work. Calls build and _setup first, then submit the tasks.
Non-blocking call unless wait is set to True</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.read_etotals">
<code class="sig-name descname"><span class="pre">read_etotals</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ha'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.read_etotals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.read_etotals" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the total energy from the GSR file produced by the task.</p>
<p>Return a numpy array with the total energies in Hartree
The array element is set to np.inf if an exception is raised while reading the GSR file.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.Work.parse_timers">
<code class="sig-name descname"><span class="pre">parse_timers</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#Work.parse_timers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.Work.parse_timers" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the TIMER section reported in the ABINIT output files.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AbinitTimerParser</span></code> object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.BandStructureWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">BandStructureWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dos_inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BandStructureWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BandStructureWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for band structure calculations.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-337d3eb24c27c4f9c98d398078ebbb0e77e8b7fa.png" alt="Inheritance diagram of BandStructureWork" usemap="#inheritanceafbed424b4" class="inheritance graphviz" /></div>
<map id="inheritanceafbed424b4" name="inheritanceafbed424b4">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,138,24"/>
<area shape="rect" id="node2" href="#abipy.flowtk.works.BandStructureWork" target="_top" title="Work for band structure calculations." alt="" coords="564,24,764,43"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="394,24,525,43"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.BandStructureWork.plot_ebands">
<code class="sig-name descname"><span class="pre">plot_ebands</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BandStructureWork.plot_ebands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BandStructureWork.plot_ebands" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the band structure. kwargs are passed to the plot method of <a class="reference internal" href="electrons_api.html#abipy.electrons.ebands.ElectronBands" title="abipy.electrons.ebands.ElectronBands"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.electrons.ebands.ElectronBands</span></code></a>.</p>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.BandStructureWork.plot_ebands_with_edos">
<code class="sig-name descname"><span class="pre">plot_ebands_with_edos</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gaussian'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BandStructureWork.plot_ebands_with_edos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BandStructureWork.plot_ebands_with_edos" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the band structure and the DOS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_pos</strong> – Index of the task from which the DOS should be obtained (note: 0 refers to the first DOS task).</p></li>
<li><p><strong>method</strong> – String defining the method for the computation of the DOS.</p></li>
<li><p><strong>step</strong> – Energy step (eV) of the linear mesh.</p></li>
<li><p><strong>width</strong> – Standard deviation (eV) of the gaussian.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments passed to <cite>plot_with_edos</cite> method to customize the plot.</p></li>
</ul>
</dd>
</dl>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.BandStructureWork.plot_edoses">
<code class="sig-name descname"><span class="pre">plot_edoses</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gaussian'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BandStructureWork.plot_edoses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BandStructureWork.plot_edoses" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the band structure and the DOS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_pos</strong> – Index of the task from which the DOS should be obtained.
None is all DOSes should be displayed. Accepts integer or list of integers.</p></li>
<li><p><strong>method</strong> – String defining the method for the computation of the DOS.</p></li>
<li><p><strong>step</strong> – Energy step (eV) of the linear mesh.</p></li>
<li><p><strong>width</strong> – Standard deviation (eV) of the gaussian.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments passed to <cite>plot</cite> method to customize the plot.</p></li>
</ul>
</dd>
</dl>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.RelaxWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">RelaxWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ion_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ioncell_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dilatmx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#RelaxWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.RelaxWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for structural relaxations. The first task relaxes the atomic position
while keeping the unit cell parameters fixed. The second task uses the final
structure to perform a structural relaxation in which both the atomic positions
and the lattice parameters are optimized.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-d5ea731bf87887a6dc974e33fc2968676919c594.png" alt="Inheritance diagram of RelaxWork" usemap="#inheritancef5a76b13ad" class="inheritance graphviz" /></div>
<map id="inheritancef5a76b13ad" name="inheritancef5a76b13ad">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="5,5,145,25"/>
<area shape="rect" id="node5" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="416,25,555,45"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.RelaxWork" target="_top" title="Work for structural relaxations. The first task relaxes the atomic position" alt="" coords="596,25,763,45"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.RelaxWork.on_ok">
<code class="sig-name descname"><span class="pre">on_ok</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#RelaxWork.on_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.RelaxWork.on_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is called when one task reaches status S_OK.
If sender == self.ion_task, we update the initial structure
used by self.ioncell_task and we unlock it so that the job can be submitted.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.RelaxWork.plot_ion_relaxation">
<code class="sig-name descname"><span class="pre">plot_ion_relaxation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#RelaxWork.plot_ion_relaxation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.RelaxWork.plot_ion_relaxation" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the history of the ion-cell relaxation.
kwargs are passed to the plot method of <a class="reference internal" href="dynamics_api.html#abipy.dynamics.hist.HistFile" title="abipy.dynamics.hist.HistFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.dynamics.hist.HistFile</span></code></a></p>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> or None if hist file is not found.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.RelaxWork.plot_ioncell_relaxation">
<code class="sig-name descname"><span class="pre">plot_ioncell_relaxation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#RelaxWork.plot_ioncell_relaxation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.RelaxWork.plot_ioncell_relaxation" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the history of the ion-cell relaxation.
kwargs are passed to the plot method of <a class="reference internal" href="dynamics_api.html#abipy.dynamics.hist.HistFile" title="abipy.dynamics.hist.HistFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.dynamics.hist.HistFile</span></code></a></p>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.4.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> or None if hist file is not found.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.G0W0Work">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">G0W0Work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scr_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#G0W0Work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.G0W0Work" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for generic G0W0 calculations.
All input can be either single inputs or lists of inputs</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-49ac6d04d55d1548c20094f1080603ccd55aeabf.png" alt="Inheritance diagram of G0W0Work" usemap="#inheritance11724564e4" class="inheritance graphviz" /></div>
<map id="inheritance11724564e4" name="inheritance11724564e4">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="5,5,145,25"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="414,25,553,45"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.G0W0Work" target="_top" title="Work for generic G0W0 calculations." alt="" coords="593,25,763,45"/>
</map></dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.QptdmWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">QptdmWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#QptdmWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.QptdmWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work parallelizes the calculation of the q-points of the screening.
It also provides the callback <cite>on_all_ok</cite> that calls mrgscr to merge
all the partial screening files produced.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-562d3ee1a355f8885cd249dfb3ba4534792190cf.png" alt="Inheritance diagram of QptdmWork" usemap="#inheritancea2761343ac" class="inheritance graphviz" /></div>
<map id="inheritancea2761343ac" name="inheritancea2761343ac">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="5,5,145,25"/>
<area shape="rect" id="node5" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="413,25,551,45"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.QptdmWork" target="_top" title="This work parallelizes the calculation of the q&#45;points of the screening." alt="" coords="592,25,763,45"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.QptdmWork.create_tasks">
<code class="sig-name descname"><span class="pre">create_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wfk_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scr_input</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#QptdmWork.create_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.QptdmWork.create_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the SCR tasks and register them in self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wfk_file</strong> – Path to the ABINIT WFK file to use for the computation of the screening.</p></li>
<li><p><strong>scr_input</strong> – Input for the screening calculation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.QptdmWork.merge_scrfiles">
<code class="sig-name descname"><span class="pre">merge_scrfiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">remove_scrfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#QptdmWork.merge_scrfiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.QptdmWork.merge_scrfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the q-points have been computed.
It runs <cite>mrgscr</cite> in sequential on the local machine to produce
the final SCR file in the outdir of the <cite>Work</cite>.
If remove_scrfiles is True, the partial SCR files are removed after the merge.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.QptdmWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#QptdmWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.QptdmWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the q-points have been computed.
It runs <cite>mrgscr</cite> in sequential on the local machine to produce
the final SCR file in the outdir of the <cite>Work</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.SigmaConvWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">SigmaConvWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wfk_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scr_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#SigmaConvWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.SigmaConvWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for self-energy convergence studies.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-9be492e0e0d7ca9a0c7464fb08b019817c669c7d.png" alt="Inheritance diagram of SigmaConvWork" usemap="#inheritance80499e7696" class="inheritance graphviz" /></div>
<map id="inheritance80499e7696" name="inheritance80499e7696">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,140,24"/>
<area shape="rect" id="node5" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="401,24,534,44"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.SigmaConvWork" target="_top" title="Work for self&#45;energy convergence studies." alt="" coords="574,24,764,44"/>
</map></dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.BseMdfWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">BseMdfWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bse_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BseMdfWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BseMdfWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Work for simple BSE calculations in which the self-energy corrections
are approximated by the scissors operator and the screening is modeled
with the model dielectric function.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-4c5dbfdc87f0c5078412faf7ca697edbf51f1a93.png" alt="Inheritance diagram of BseMdfWork" usemap="#inheritance557336f86a" class="inheritance graphviz" /></div>
<map id="inheritance557336f86a" name="inheritance557336f86a">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,144,25"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="411,25,548,45"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.BseMdfWork" target="_top" title="Work for simple BSE calculations in which the self&#45;energy corrections" alt="" coords="588,25,764,45"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.BseMdfWork.get_mdf_robot">
<code class="sig-name descname"><span class="pre">get_mdf_robot</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BseMdfWork.get_mdf_robot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BseMdfWork.get_mdf_robot" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds and returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">MdfRobot</span></code> for analyzing the results in the MDF files.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.PhononWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">PhononWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.MergeDdb</span></code></p>
<p>This work consists of nirred Phonon tasks where nirred is
the number of irreducible atomic perturbations for a given set of q-points.
It provides the callback method (on_all_ok) that calls mrgddb (mrgdv) to merge
all the partial DDB (POT) files produced.
The two files are available in the output directory of the Work.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-2151f9729e0ff720973f08109f73d5eaffce221b.png" alt="Inheritance diagram of PhononWork" usemap="#inheritancea4fc0eba9f" class="inheritance graphviz" /></div>
<map id="inheritancea4fc0eba9f" name="inheritancea4fc0eba9f">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,139,24"/>
<area shape="rect" id="node6" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="410,24,542,43"/>
<area shape="rect" id="node5" href="#abipy.flowtk.works.PhononWork" target="_top" title="This work consists of nirred Phonon tasks where nirred is" alt="" coords="594,43,764,63"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.PhononWork.from_scf_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qpoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_ngqpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prtwf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWork.from_scf_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWork.from_scf_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <cite>PhononWork</cite> from a <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.
The input file for phonons is automatically generated from the input of the ScfTask.
Each phonon task depends on the WFK file produced by the <cite>scf_task</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_task</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.</p></li>
<li><p><strong>qpoints</strong> – q-points in reduced coordinates. Accepts single q-point, list of q-points
or three integers defining the q-mesh if <cite>is_ngqpt</cite>.</p></li>
<li><p><strong>is_ngqpt</strong> – True if <cite>qpoints</cite> should be interpreted as divisions instead of q-points.</p></li>
<li><p><strong>tolerance</strong> – dict {“varname”: value} with the tolerance to be used in the phonon run.
None to use AbiPy default.</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>ddk_tolerance</strong> – dict {“varname”: value} with the tolerance used in the DDK run if with_becs.
None to use AbiPy default.</p></li>
<li><p><strong>prtwf</strong> – Controls the output of the first-order WFK.
By default we set it to -1 when q != 0 so that AbiPy is still able
to restart the DFPT task if the calculation is not converged (worst case scenario)
but we avoid the output of the 1-st WFK if the calculation converged successfully.
Non-linear DFT applications should not be affected since they assume q == 0.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.PhononWork.from_scf_input">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qpoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_ngqpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prtwf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWork.from_scf_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWork.from_scf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <cite>from_scf_task</cite>, the difference is that this method requires
an input for SCF calculation. A new <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> is created and added to the Work.
This API should be used if the DDB of the GS task should be merged.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.PhononWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the q-points have been computed.
It runs <cite>mrgddb</cite> in sequential on the local machine to produce
the final DDB file in the outdir of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.PhononWfkqWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">PhononWfkqWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWfkqWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWfkqWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.MergeDdb</span></code></p>
<p>This work computes phonons with DFPT on an arbitrary q-mesh (usually denser than the k-mesh for electrons)
by computing WKQ files for each q-point.
The number of irreducible atomic perturbations for each q-point is taken into account.
It provides the callback method (on_all_ok) that calls mrgddb (mrgdv) to merge
all the partial DDB (POT) files produced. The two files are available in the
output directory of the Work. The WKQ files are removed at runtime.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-b9100bf046218b57dff7b178d33cf5add8875424.png" alt="Inheritance diagram of PhononWfkqWork" usemap="#inheritance40972a65c9" class="inheritance graphviz" /></div>
<map id="inheritance40972a65c9" name="inheritance40972a65c9">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,135,23"/>
<area shape="rect" id="node6" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="397,23,525,42"/>
<area shape="rect" id="node5" href="#abipy.flowtk.works.PhononWfkqWork" target="_top" title="This work computes phonons with DFPT on an arbitrary q&#45;mesh (usually denser than the k&#45;mesh for electrons)" alt="" coords="575,42,764,61"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.PhononWfkqWork.from_scf_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngqpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ph_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolwfr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-22</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nband</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_becs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shiftq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_ngqpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_wfkq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepgkk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWfkqWork.from_scf_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWfkqWork.from_scf_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <cite>PhononWfkqWork</cite> from a <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.
The input files for WFQ and phonons are automatically generated from the input of the ScfTask.
Each phonon task depends on the WFK file produced by scf_task and the associated WFQ file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_task</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.</p></li>
<li><p><strong>ngqpt</strong> – three integers defining the q-mesh</p></li>
<li><p><strong>with_becs</strong> – Activate calculation of Electric field and Born effective charges.</p></li>
<li><p><strong>ph_tolerance</strong> – dict {“varname”: value} with the tolerance for the phonon run.
None to use AbiPy default.</p></li>
<li><p><strong>tolwfr</strong> – tolerance used to compute WFQ.</p></li>
<li><p><strong>ddk_tolerance</strong> – dict {“varname”: value} with the tolerance used in the DDK run if with_becs.
None to use AbiPy default.</p></li>
<li><p><strong>shiftq</strong> – Q-mesh shift. Multiple shifts are not supported.</p></li>
<li><p><strong>is_ngqpt</strong> – the ngqpt is interpreted as a set of integers defining the q-mesh, otherwise
is an explicit list of q-points</p></li>
<li><p><strong>remove_wfkq</strong> – Remove WKQ files when the children are completed.</p></li>
<li><p><strong>prepgkk</strong> – 1 to activate computation of all 3*natom perts (debugging option).</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.PhononWfkqWork.on_ok">
<code class="sig-name descname"><span class="pre">on_ok</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWfkqWork.on_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWfkqWork.on_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is called when one task reaches status <cite>S_OK</cite>.
It removes the WFKQ file if all its children have reached <cite>S_OK</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.PhononWfkqWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#PhononWfkqWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.PhononWfkqWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all the q-points have been computed.
Ir runs <cite>mrgddb</cite> in sequential on the local machine to produce
the final DDB file in the outdir of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.GKKPWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">GKKPWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#GKKPWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.GKKPWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>This work computes electron-phonon matrix elements for all the q-points
present in a DVDB and DDB file</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-6707532791d54887bbf1b9966103f02cf74a5375.png" alt="Inheritance diagram of GKKPWork" usemap="#inheritance04738cf680" class="inheritance graphviz" /></div>
<map id="inheritance04738cf680" name="inheritance04738cf680">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="5,5,145,25"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="415,25,553,45"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.GKKPWork" target="_top" title="This work computes electron&#45;phonon matrix elements for all the q&#45;points" alt="" coords="594,25,763,45"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.GKKPWork.from_den_ddb_dvdb">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_den_ddb_dvdb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">den_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddb_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dvdb_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpiprocs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_wfkq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_ddk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#GKKPWork.from_den_ddb_dvdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.GKKPWork.from_den_ddb_dvdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <cite>PhononWfkqWork</cite> from a DDB and DVDB file.
For each q found, a WFQ task and an EPH task computing the matrix elements are created.</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.GKKPWork.from_phononwfkq_work">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_phononwfkq_work</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phononwfkq_work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nscf_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_wfkq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_ddk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#GKKPWork.from_phononwfkq_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.GKKPWork.from_phononwfkq_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <cite>GKKPWork</cite> from a <cite>PhononWfkqWork</cite> object.
The WFQ are the ones used for PhononWfkqWork so in principle have only valence bands</p>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.GKKPWork.on_ok">
<code class="sig-name descname"><span class="pre">on_ok</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#GKKPWork.on_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.GKKPWork.on_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is called when one task reaches status <cite>S_OK</cite>.
It removes the WFKQ file if all its children have reached <cite>S_OK</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.BecWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">BecWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BecWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BecWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.MergeDdb</span></code></p>
<p>Work for the computation of the Born effective charges.</p>
<p>This work consists of DDK tasks and phonon + electric field perturbation
It provides the callback method (on_all_ok) that calls mrgddb to merge the
partial DDB files produced by the work.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-52314042a73c0e7b0519c798d989f8f8dade36f2.png" alt="Inheritance diagram of BecWork" usemap="#inheritancec4cab8b911" class="inheritance graphviz" /></div>
<map id="inheritancec4cab8b911" name="inheritancec4cab8b911">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,142,24"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="420,24,556,44"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.BecWork" target="_top" title="Work for the computation of the Born effective charges." alt="" coords="609,44,764,64"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.BecWork.from_scf_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ph_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BecWork.from_scf_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BecWork.from_scf_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Build tasks for the computation of Born effective charges from a ground-state task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_task</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.</p></li>
<li><p><strong>ddk_tolerance</strong> – tolerance used in the DDK run if with_becs. None to use AbiPy default.</p></li>
<li><p><strong>ph_tolerance</strong> – dict {“varname”: value} with the tolerance used in the phonon run.
None to use AbiPy default.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.BecWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#BecWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.BecWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all tasks reach S_OK
Ir runs <cite>mrgddb</cite> in sequential on the local machine to produce
the final DDB file in the outdir of the <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.DteWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">DteWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#DteWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.DteWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.MergeDdb</span></code></p>
<p>Work for the computation of the third derivative of the energy.</p>
<p>This work consists of DDK tasks and electric field perturbation.
It provides the callback method (on_all_ok) that calls mrgddb to merge the partial DDB files produced</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-1d5be751018bd8335a81c26c4edf246e626be80e.png" alt="Inheritance diagram of DteWork" usemap="#inheritance1fae034e1b" class="inheritance graphviz" /></div>
<map id="inheritance1fae034e1b" name="inheritance1fae034e1b">
<area shape="rect" id="node1" href="#abipy.flowtk.nodes.Node" target="_top" title="Abstract base class defining the interface that must be" alt="" coords="4,4,143,24"/>
<area shape="rect" id="node4" href="#abipy.flowtk.works.Work" target="_top" title="A Work is a list of (possibly connected) tasks." alt="" coords="421,24,557,44"/>
<area shape="rect" id="node3" href="#abipy.flowtk.works.DteWork" target="_top" title="Work for the computation of the third derivative of the energy." alt="" coords="610,44,764,65"/>
</map><dl class="py method">
<dt id="abipy.flowtk.works.DteWork.from_scf_task">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_scf_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scf_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddk_tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#DteWork.from_scf_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.DteWork.from_scf_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a DteWork from a ground-state task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scf_task</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.ScfTask" title="abipy.flowtk.tasks.ScfTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.ScfTask</span></code></a> object.</p></li>
<li><p><strong>ddk_tolerance</strong> – tolerance used in the DDK run if with_becs. None to use AbiPy default.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.DteWork.on_all_ok">
<code class="sig-name descname"><span class="pre">on_all_ok</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#DteWork.on_all_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.DteWork.on_all_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called when all tasks reach S_OK
It runs <cite>mrgddb</cite> in sequential on the local machine to produce
the final DDB file in the outdir of the <cite>Work</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.works.ConducWork">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.works.</span></code><code class="sig-name descname"><span class="pre">ConducWork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#ConducWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.ConducWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.flowtk.works.Work" title="abipy.flowtk.works.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.Work</span></code></a></p>
<p>Workflow for the computation of electrical conductivity.</p>
<dl class="simple">
<dt>Can be called from:</dt><dd><ol class="arabic simple">
<li><p>MultiDataset and PhononWork</p></li>
<li><p>MultiDataset, DDB filepath and DVDB filepath.</p></li>
</ol>
</dd>
</dl>
<p>Can use Kerange Capability using withKerange=True</p>
<p>This work consists of 3 tasks or 5 tasks with kerange:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>SCF GS</p></li>
<li><p>NSCF</p></li>
<li><p>Kerange (Kerange only)</p></li>
<li><p>WFK Interpolation (Kerange only)</p></li>
<li><p>Electrical Conductivity Calculation.</p></li>
</ol>
</div></blockquote>
<dl class="py method">
<dt id="abipy.flowtk.works.ConducWork.from_phwork">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_phwork</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phwork</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbr_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kerange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omp_nbr_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#ConducWork.from_phwork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.ConducWork.from_phwork" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a ConducWork from a <a class="reference internal" href="#abipy.flowtk.works.PhononWork" title="abipy.flowtk.works.PhononWork"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.PhononWork</span></code></a> and <a class="reference internal" href="abio_api.html#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phwork</strong> – a <a class="reference internal" href="#abipy.flowtk.works.PhononWork" title="abipy.flowtk.works.PhononWork"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.works.PhononWork</span></code></a> object calculating the DDB and DVDB files.</p></li>
<li><p><strong>multi</strong> – a <a class="reference internal" href="abio_api.html#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object containing a list of 3 datasets or 5 with Kerange.
See abipy/abio/factories.py -&gt; conduc_from_scf_nscf_inputs for details about multi.</p></li>
<li><p><strong>nbr_proc</strong> – Required if with_kerange since autoparal doesn’t work with optdriver=8.</p></li>
<li><p><strong>flow</strong> – The flow calling the work. Used for  with_fixed_mpi_omp.</p></li>
<li><p><strong>with_kerange</strong> – True if using Kerange.</p></li>
<li><p><strong>omp_nbr_thread</strong> – Number of omp_thread to use.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="abipy.flowtk.works.ConducWork.from_filepath">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_filepath</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ddb_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dvdb_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbr_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_kerange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omp_nbr_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/works.html#ConducWork.from_filepath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.works.ConducWork.from_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a ConducWork from previously calculated DDB/DVDB file and <a class="reference internal" href="abio_api.html#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>multi</strong> – a <a class="reference internal" href="abio_api.html#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object containing a list of 3 datasets or 5 with Kerange.
See abipy/abio/factories.py -&gt; conduc_from_scf_nscf_inputs for details about multi.</p></li>
<li><p><strong>ddb_path</strong> – a string containing the path to the DDB file.</p></li>
<li><p><strong>dvdb_path</strong> – a string containing the path to the DVDB file.</p></li>
<li><p><strong>nbr_proc</strong> – Required if with_kerange since autoparal doesn’t work with optdriver=8.</p></li>
<li><p><strong>flow</strong> – The flow calling the work, only needed if with_kerange.</p></li>
<li><p><strong>with_kerange</strong> – True if using Kerange.</p></li>
<li><p><strong>omp_nbr_thread</strong> – Number of omp_thread to use.</p></li>
<li><p><strong>manager</strong> – <a class="reference internal" href="#abipy.flowtk.tasks.TaskManager" title="abipy.flowtk.tasks.TaskManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.flowtk.wrappers">
<span id="wrappers-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wrappers</span></code> Module</a><a class="headerlink" href="#module-abipy.flowtk.wrappers" title="Permalink to this headline">¶</a></h2>
<p>Wrappers for ABINIT main executables</p>
<dl class="py class">
<dt id="abipy.flowtk.wrappers.Mrgscr">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.wrappers.</span></code><code class="sig-name descname"><span class="pre">Mrgscr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgscr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgscr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.wrappers.ExecWrapper</span></code></p>
<dl class="py method">
<dt id="abipy.flowtk.wrappers.Mrgscr.merge_qpoints">
<code class="sig-name descname"><span class="pre">merge_qpoints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files_to_merge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_prefix</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgscr.merge_qpoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgscr.merge_qpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute mrgscr inside directory <cite>workdir</cite> to merge <cite>files_to_merge</cite>.
Produce new file with prefix <cite>out_prefix</cite></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.wrappers.Mrgddb">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.wrappers.</span></code><code class="sig-name descname"><span class="pre">Mrgddb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgddb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgddb" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.wrappers.ExecWrapper</span></code></p>
<dl class="py method">
<dt id="abipy.flowtk.wrappers.Mrgddb.merge">
<code class="sig-name descname"><span class="pre">merge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddb_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_ddb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_source_ddbs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgddb.merge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgddb.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge DDB file, return the absolute path of the new database in workdir.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="abipy.flowtk.wrappers.Mrgdvdb">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">abipy.flowtk.wrappers.</span></code><code class="sig-name descname"><span class="pre">Mrgdvdb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgdvdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgdvdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.flowtk.wrappers.ExecWrapper</span></code></p>
<dl class="py method">
<dt id="abipy.flowtk.wrappers.Mrgdvdb.merge">
<code class="sig-name descname"><span class="pre">merge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pot_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_dvdb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/flowtk/wrappers.html#Mrgdvdb.merge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#abipy.flowtk.wrappers.Mrgdvdb.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge POT files containing 1st order DFPT potential
return the absolute path of the new database in workdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delete_source</strong> – True if POT1 files should be removed after (successful) merge.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="iotools_api.html" class="btn btn-neutral float-right" title="iotools Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="eph_api.html" class="btn btn-neutral float-left" title="eph Package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, M. Giantomassi and the AbiPy group.
      <span class="lastupdated">
        Last updated on Jun 16, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>