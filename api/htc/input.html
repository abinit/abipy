<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Input &#8212; abipy 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="input">
<h1>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-abipy.htc.input">
<span id="input-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">input</span></code> Module<a class="headerlink" href="#module-abipy.htc.input" title="Permalink to this headline">¶</a></h2>
<p>This module defines objects that faciliate the creation of the
ABINIT input files. The syntax is similar to the one used
in ABINIT with small differences.</p>
<dl class="class">
<dt id="abipy.htc.input.AbiInput">
<em class="property">class </em><code class="descclassname">abipy.htc.input.</code><code class="descname">AbiInput</code><span class="sig-paren">(</span><em>pseudos</em>, <em>pseudo_dir=u''</em>, <em>structure=None</em>, <em>ndtset=1</em>, <em>comment=u''</em>, <em>decorators=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">abipy.htc.input.Input</span></code>, <a class="reference internal" href="../core_api.html#abipy.core.mixins.Has_Structure" title="abipy.core.mixins.Has_Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.Has_Structure</span></code></a></p>
<p>This object represents an ABINIT input file. It supports multi-datasets a
and provides an easy-to-use interface for defining the variables of the calculation.</p>
<p>Usage example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">inp</span> <span class="o">=</span> <span class="n">AbiInput</span><span class="p">(</span><span class="n">pseudos</span><span class="o">=</span><span class="s2">&quot;si.pspnc&quot;</span><span class="p">,</span> <span class="n">pseudo_dir</span><span class="o">=</span><span class="s2">&quot;directory_with_pseudos&quot;</span><span class="p">)</span>
<span class="n">inp</span><span class="o">.</span><span class="n">set_structure</span><span class="p">(</span><span class="s2">&quot;si.cif&quot;</span><span class="p">)</span>
<span class="n">inp</span><span class="o">.</span><span class="n">set_vars</span><span class="p">(</span><span class="n">ecut</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nband</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># Print it to get the final input.</span>
<span class="k">print</span><span class="p">(</span><span class="n">inp</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.htc.input.AbiInput.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">AbinitInputError</span></code></p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.arange">
<code class="descname">arange</code><span class="sig-paren">(</span><em>varname</em>, <em>start</em>, <em>stop</em>, <em>step</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.arange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return evenly spaced values within a given interval.</p>
<p>Values are generated within the half-open interval <code class="docutils literal"><span class="pre">[start,</span> <span class="pre">stop)</span></code>
(in other words, the interval including <cite>start</cite> but excluding <cite>stop</cite>).</p>
<p>When using a non-integer step, such as 0.1, the results will often not
be consistent.  It is better to use <code class="docutils literal"><span class="pre">linspace</span></code> for these cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> &#8211; Start of interval. The interval includes this value. The default start value is 0.</li>
<li><strong>stop</strong> &#8211; End of interval.  The interval does not include this value, except
in some cases where <cite>step</cite> is not an integer and floating point</li>
<li><strong>step</strong> &#8211; Spacing between values.  For any output <cite>out</cite>, this is the distance
between two adjacent values, <code class="docutils literal"><span class="pre">out[i+1]</span> <span class="pre">-</span> <span class="pre">out[i]</span></code>.  The default
step size is 1.  If <cite>step</cite> is specified, <cite>start</cite> must also be given.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.decorators">
<code class="descname">decorators</code><a class="headerlink" href="#abipy.htc.input.AbiInput.decorators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.htc.input.AbiInput.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.generate">
<code class="descname">generate</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate new inputs by replacing the variables specified in kwargs.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># To generate two input files with different values of ecut:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">gs_inp</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>

<span class="c1"># To generate four input files with all the possible combinations of ecut and nsppol:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">gs_inp</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">nsppol</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.get_ibz">
<code class="descname">get_ibz</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>qpoint=None</em>, <em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.get_ibz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.get_ibz" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of points in the IBZ and the corresponding weights.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> &#8211; Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> &#8211; Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>qpoint</strong> &#8211; qpoint in reduced coordinates. Used to shift the k-mesh (default None i.e no shift)</li>
<li><strong>workdir</strong> &#8211; Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> &#8211; <code class="xref py py-class docutils literal"><span class="pre">TaskManager</span></code> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">points: <cite>ndarray</cite> with points in the IBZ in reduced coordinates.
weights: <cite>ndarray</cite> with weights of the points.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>namedtuple</cite> with attributes</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Multiple datasets are ignored. Only the list of k-points for dataset 1 are returned.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.get_irred_perts">
<code class="descname">get_irred_perts</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>qpoint=None</em>, <em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.get_irred_perts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.get_irred_perts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of irreducible perturbations for DFPT.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> &#8211; Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> &#8211; Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>qpoint</strong> &#8211; qpoint in reduced coordinates. Used to shift the k-mesh (default None i.e no shift)</li>
<li><strong>workdir</strong> &#8211; Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> &#8211; <code class="xref py py-class docutils literal"><span class="pre">TaskManager</span></code> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>List of dictionaries with the Abinit variables defining the irreducible perturbation
.. rubric:: Example</p>
<dl class="docutils">
<dt>[{&#8216;idir&#8217;: 1, &#8216;ipert&#8217;: 1, &#8216;qpt&#8217;: [0.25, 0.0, 0.0]},</dt>
<dd><p class="first last">{&#8216;idir&#8217;: 2, &#8216;ipert&#8217;: 1, &#8216;qpt&#8217;: [0.25, 0.0, 0.0]}]</p>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Multiple datasets are ignored. Only the list of k-points for dataset 1 are returned.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.is_abivar">
<code class="descname">is_abivar</code><span class="sig-paren">(</span><em>varname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.is_abivar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.is_abivar" title="Permalink to this definition">¶</a></dt>
<dd><p>True if varname is a valid Abinit variable.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.isnc">
<code class="descname">isnc</code><a class="headerlink" href="#abipy.htc.input.AbiInput.isnc" title="Permalink to this definition">¶</a></dt>
<dd><p>True if norm-conserving calculation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.ispaw">
<code class="descname">ispaw</code><a class="headerlink" href="#abipy.htc.input.AbiInput.ispaw" title="Permalink to this definition">¶</a></dt>
<dd><p>True if PAW calculation.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.linspace">
<code class="descname">linspace</code><span class="sig-paren">(</span><em>varname</em>, <em>start</em>, <em>stop</em>, <em>endpoint=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.linspace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.linspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <cite>ndtset</cite> evenly spaced samples, calculated over the interval [<cite>start</cite>, <cite>stop</cite>].</p>
<p>The endpoint of the interval can optionally be excluded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> &#8211; The starting value of the sequence.</li>
<li><strong>stop</strong> &#8211; The end value of the sequence, unless <cite>endpoint</cite> is set to False.
In that case, the sequence consists of all but the last of <code class="docutils literal"><span class="pre">ndtset</span> <span class="pre">+</span> <span class="pre">1</span></code>
evenly spaced samples, so that <cite>stop</cite> is excluded.  Note that the step
size changes when <cite>endpoint</cite> is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.mnemonics">
<code class="descname">mnemonics</code><a class="headerlink" href="#abipy.htc.input.AbiInput.mnemonics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if mnemonics should be printed</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.ndtset">
<code class="descname">ndtset</code><a class="headerlink" href="#abipy.htc.input.AbiInput.ndtset" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of datasets.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.new_from_decorators">
<code class="descname">new_from_decorators</code><span class="sig-paren">(</span><em>decorators</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.new_from_decorators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.new_from_decorators" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receives a list of <code class="xref py py-class docutils literal"><span class="pre">AbinitInputDecorator</span></code> objects or just a single object,
applyes the decorators to the input and returns a new <a class="reference internal" href="#abipy.htc.input.AbiInput" title="abipy.htc.input.AbiInput"><code class="xref py py-class docutils literal"><span class="pre">AbiInput</span></code></a> object.
self is not changed.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.new_with_vars">
<code class="descname">new_with_vars</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.new_with_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.new_with_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a new input (deep copy) with these variables</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.num_valence_electrons">
<code class="descname">num_valence_electrons</code><a class="headerlink" href="#abipy.htc.input.AbiInput.num_valence_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of valence electrons computed from the pseudos and the structure.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.product">
<code class="descname">product</code><span class="sig-paren">(</span><em>*items</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.product"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.product" title="Permalink to this definition">¶</a></dt>
<dd><p>Cartesian product of input iterables. Equivalent to nested for-loops.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">inp</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s2">&quot;tsmear&quot;</span><span class="p">,</span> <span class="s2">&quot;ngkpt&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.pseudos">
<code class="descname">pseudos</code><a class="headerlink" href="#abipy.htc.input.AbiInput.pseudos" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <code class="xref py py-class docutils literal"><span class="pre">Pseudo</span></code> objects.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.register_decorator">
<code class="descname">register_decorator</code><span class="sig-paren">(</span><em>decorator</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.register_decorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.register_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <code class="xref py py-class docutils literal"><span class="pre">AbinitInputDecorator</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.remove_variables">
<code class="descname">remove_variables</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.htc.input.AbiInput.remove_variables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.remove_vars">
<code class="descname">remove_vars</code><span class="sig-paren">(</span><em>keys</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.remove_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.remove_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the variables listed in keys</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dtset</strong> &#8211; Int with the index of the dataset, slice object of iterable</li>
<li><strong>keys</strong> &#8211; List of variables to remove.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_autokmesh">
<code class="descname">set_autokmesh</code><span class="sig-paren">(</span><em>nksmall</em>, <em>kptopt=1</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_autokmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_autokmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables (ngkpt, shift, kptopt) for the sampling of the BZ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nksmall</strong> &#8211; Number of k-points used to sample the smallest lattice vector.</li>
<li><strong>kptopt</strong> &#8211; Option for the generation of the mesh (ABINIT variable).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_autokpath">
<code class="descname">set_autokpath</code><span class="sig-paren">(</span><em>ndivsm</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_autokpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_autokpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set automatically the k-path from the lattice
and the number of divisions for the smallest segment (ndivsm)</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_comment">
<code class="descname">set_comment</code><span class="sig-paren">(</span><em>comment</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the main comment in the input file.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_kmesh">
<code class="descname">set_kmesh</code><span class="sig-paren">(</span><em>ngkpt</em>, <em>shiftk</em>, <em>kptopt=1</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_kmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_kmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables defining the k-point sampling for the specified dtset.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_kpath">
<code class="descname">set_kpath</code><span class="sig-paren">(</span><em>ndivsm</em>, <em>kptbounds=None</em>, <em>iscf=-2</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_kpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_kpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables defining the k-path for the specified dtset.
The list of K-points is taken from the pymatgen database if <cite>kptbounds</cite> is None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ndivsm</strong> &#8211; Number of divisions for the smallest segment.</li>
<li><strong>kptbounds</strong> &#8211; k-points defining the path in k-space.</li>
<li><strong>iscf</strong> &#8211; iscf variable.</li>
<li><strong>dtset</strong> &#8211; Index of the dataset. 0 for global variables.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_kptgw">
<code class="descname">set_kptgw</code><span class="sig-paren">(</span><em>kptgw</em>, <em>bdgw</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_kptgw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_kptgw" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables defining the k point for the GW corrections</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_mnemonics">
<code class="descname">set_mnemonics</code><span class="sig-paren">(</span><em>boolean</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_mnemonics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_mnemonics" title="Permalink to this definition">¶</a></dt>
<dd><p>True if mnemonics should be printed</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_structure">
<code class="descname">set_structure</code><span class="sig-paren">(</span><em>structure</em>, <em>dtset=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <code class="xref py py-class docutils literal"><span class="pre">Structure</span></code> object for the specified dtset.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_structure_from_file">
<code class="descname">set_structure_from_file</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.htc.input.AbiInput.set_structure_from_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_variables">
<code class="descname">set_variables</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.htc.input.AbiInput.set_variables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.set_vars">
<code class="descname">set_vars</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.set_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.set_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of a set of input variables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dtset</strong> &#8211; Int with the index of the dataset, slice object of iterable</li>
<li><strong>kwargs</strong> &#8211; Dictionary with the variables.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.split_datasets">
<code class="descname">split_datasets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.split_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.split_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Split an input file with multiple datasets into a  list of <cite>ndtset</cite> distinct input files.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.AbiInput.structure">
<code class="descname">structure</code><a class="headerlink" href="#abipy.htc.input.AbiInput.structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <code class="xref py py-class docutils literal"><span class="pre">Structure</span></code> associated to the ABINIT input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>ValueError if we have multi datasets with different</li>
<li>structure so that users will learn that multiple datasets are bad.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.htc.input.AbiInput.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#AbiInput.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.AbiInput.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run ABINIT in dry mode to validate the input file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">retcode: Return code. 0 if OK.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><cite>namedtuple</cite> with the following attributes</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><cite>RuntimeError</cite> if executable is not in $PATH.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.htc.input.LdauParams">
<em class="property">class </em><code class="descclassname">abipy.htc.input.</code><code class="descname">LdauParams</code><span class="sig-paren">(</span><em>usepawu</em>, <em>structure</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LdauParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LdauParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object stores the parameters for LDA+U calculations with the PAW method
It facilitates the specification of the U-J parameters in the Abinit input file.
(see <cite>to_abivars</cite>). The U-J operator will be applied only on the atomic species
that have been selected by calling <cite>lui_for_symbol</cite>.</p>
<p>To setup the Abinit variables for a LDA+U calculation in NiO with a
U value of 5 eV applied on the nickel atoms:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">luj_params</span> <span class="o">=</span> <span class="n">LdauParams</span><span class="p">(</span><span class="n">usepawu</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">nio_structure</span><span class="p">)</span>
<span class="c1"># Apply U-J on Ni only.</span>
<span class="n">u</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">luj_params</span><span class="o">.</span><span class="n">luj_for_symbol</span><span class="p">(</span><span class="s2">&quot;Ni&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mf">0.1</span><span class="o">*</span><span class="n">u</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;eV&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">luj_params</span><span class="o">.</span><span class="n">to_abivars</span><span class="p">())</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.htc.input.LdauParams.luj_for_symbol">
<code class="descname">luj_for_symbol</code><span class="sig-paren">(</span><em>symbol</em>, <em>l</em>, <em>u</em>, <em>j</em>, <em>unit=u'eV'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LdauParams.luj_for_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LdauParams.luj_for_symbol" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>symbol</strong> &#8211; Chemical symbol of the atoms on which LDA+U should be applied.</li>
<li><strong>l</strong> &#8211; Angular momentum.</li>
<li><strong>u</strong> &#8211; Value of U.</li>
<li><strong>j</strong> &#8211; Value of J.</li>
<li><strong>unit</strong> &#8211; Energy unit of U and J.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.LdauParams.symbols_by_typat">
<code class="descname">symbols_by_typat</code><a class="headerlink" href="#abipy.htc.input.LdauParams.symbols_by_typat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.LdauParams.to_abivars">
<code class="descname">to_abivars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LdauParams.to_abivars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LdauParams.to_abivars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with the Abinit variables.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.htc.input.LexxParams">
<em class="property">class </em><code class="descclassname">abipy.htc.input.</code><code class="descname">LexxParams</code><span class="sig-paren">(</span><em>structure</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LexxParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LexxParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object stores the parameters for local exact exchange calculations with the PAW method
It facilitates the specification of the LEXX parameters in the Abinit input file.
(see <cite>to_abivars</cite>). The LEXX operator will be applied only on the atomic species
that have been selected by calling <cite>lexx_for_symbol</cite>.</p>
<p>To perform a LEXX calculation for NiO in which the LEXX is computed only for the l=2
channel of the nickel atoms:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">lexx_params</span> <span class="o">=</span> <span class="n">LexxParams</span><span class="p">(</span><span class="n">nio_structure</span><span class="p">)</span>
<span class="n">lexx_params</span><span class="o">.</span><span class="n">lexx_for_symbol</span><span class="p">(</span><span class="s2">&quot;Ni&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">lexc_params</span><span class="o">.</span><span class="n">to_abivars</span><span class="p">())</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.htc.input.LexxParams.lexx_for_symbol">
<code class="descname">lexx_for_symbol</code><span class="sig-paren">(</span><em>symbol</em>, <em>l</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LexxParams.lexx_for_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LexxParams.lexx_for_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable LEXX for the given chemical symbol and the angular momentum l</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>symbol</strong> &#8211; Chemical symbol of the atoms on which LEXX should be applied.</li>
<li><strong>l</strong> &#8211; Angular momentum.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.htc.input.LexxParams.symbols_by_typat">
<code class="descname">symbols_by_typat</code><a class="headerlink" href="#abipy.htc.input.LexxParams.symbols_by_typat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.htc.input.LexxParams.to_abivars">
<code class="descname">to_abivars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#LexxParams.to_abivars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.LexxParams.to_abivars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with the Abinit variables.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.htc.input.input_gen">
<code class="descclassname">abipy.htc.input.</code><code class="descname">input_gen</code><span class="sig-paren">(</span><em>inp</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/abipy/htc/input.html#input_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.htc.input.input_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receives an <a class="reference internal" href="#abipy.htc.input.AbiInput" title="abipy.htc.input.AbiInput"><code class="xref py py-class docutils literal"><span class="pre">AbiInput</span></code></a> and generates
new inputs by replacing the variables specified in kwargs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inp</strong> &#8211; <a class="reference internal" href="#abipy.htc.input.AbiInput" title="abipy.htc.input.AbiInput"><code class="xref py py-class docutils literal"><span class="pre">AbiInput</span></code></a> file.</li>
<li><strong>kwargs</strong> &#8211; keyword arguments with the values used for each variable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">gs_inp</span> <span class="o">=</span> <span class="n">call_function_to_generate_initial_template</span><span class="p">()</span>

<span class="c1"># To generate two input files with different values of ecut:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">input_gen</span><span class="p">(</span><span class="n">gs_inp</span><span class="p">,</span> <span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>

<span class="c1"># To generate four input files with all the possible combinations of ecut and nsppol:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">input_gen</span><span class="p">(</span><span class="n">gs_inp</span><span class="p">,</span> <span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">nsppol</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/abipy_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Input</a><ul>
<li><a class="reference internal" href="#module-abipy.htc.input"><code class="docutils literal"><span class="pre">input</span></code> Module</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/htc/input.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, The ABINIT group.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/api/htc/input.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/abinit/abipy" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>