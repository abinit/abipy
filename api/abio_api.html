<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>abio Package &#8212; abipy 0.6.0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/my_style.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="core Package" href="core_api.html" />
    <link rel="prev" title="abilab" href="abilab_api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          abipy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.6.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow_gallery/index.html">Flow Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flows_howto.html">Flows How-To</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guide.html">Coding guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting AbiPy</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">abio Package</a><ul>
<li><a class="reference internal" href="#id1"><code class="docutils literal"><span class="pre">abio</span></code> Package</a></li>
<li><a class="reference internal" href="#module-abipy.abio.abivars"><code class="docutils literal"><span class="pre">abivars</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.abivars_db"><code class="docutils literal"><span class="pre">abivars_db</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.decorators"><code class="docutils literal"><span class="pre">decorators</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.factories"><code class="docutils literal"><span class="pre">factories</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.input_tags"><code class="docutils literal"><span class="pre">input_tags</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.inputs"><code class="docutils literal"><span class="pre">inputs</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.outputs"><code class="docutils literal"><span class="pre">outputs</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.robots"><code class="docutils literal"><span class="pre">robots</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.timer"><code class="docutils literal"><span class="pre">timer</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.variable"><code class="docutils literal"><span class="pre">variable</span></code> Module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="abilab_api.html" title="Previous Chapter: abilab"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; abilab</span>
    </a>
  </li>
  <li>
    <a href="core_api.html" title="Next Chapter: core Package"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">core Package &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/api/abio_api.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="abio-package">
<h1><a class="toc-backref" href="#contents">abio Package</a><a class="headerlink" href="#abio-package" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abio-package" id="id3">abio Package</a><ul>
<li><a class="reference internal" href="#id1" id="id4"><code class="xref py py-mod docutils literal"><span class="pre">abio</span></code> Package</a></li>
<li><a class="reference internal" href="#module-abipy.abio.abivars" id="id5"><code class="xref py py-mod docutils literal"><span class="pre">abivars</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.abivars_db" id="id6"><code class="xref py py-mod docutils literal"><span class="pre">abivars_db</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.decorators" id="id7"><code class="xref py py-mod docutils literal"><span class="pre">decorators</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.factories" id="id8"><code class="xref py py-mod docutils literal"><span class="pre">factories</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.input_tags" id="id9"><code class="xref py py-mod docutils literal"><span class="pre">input_tags</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.inputs" id="id10"><code class="xref py py-mod docutils literal"><span class="pre">inputs</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.outputs" id="id11"><code class="xref py py-mod docutils literal"><span class="pre">outputs</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.robots" id="id12"><code class="xref py py-mod docutils literal"><span class="pre">robots</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.timer" id="id13"><code class="xref py py-mod docutils literal"><span class="pre">timer</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.abio.variable" id="id14"><code class="xref py py-mod docutils literal"><span class="pre">variable</span></code> Module</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">abio</span></code> Package</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-abipy.abio"></span><p>This sub-package provides objects and methods to generate Input files.</p>
</div>
<div class="section" id="module-abipy.abio.abivars">
<span id="abivars-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">abivars</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.abivars" title="Permalink to this headline">¶</a></h2>
<p>This module contains lookup table with the name of the ABINIT variables.</p>
<dl class="function">
<dt id="abipy.abio.abivars.is_abivar">
<code class="descclassname">abipy.abio.abivars.</code><code class="descname">is_abivar</code><span class="sig-paren">(</span><em>varname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#is_abivar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.is_abivar" title="Permalink to this definition">¶</a></dt>
<dd><p>True if s is an ABINIT variable.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.abivars.is_abiunit">
<code class="descclassname">abipy.abio.abivars.</code><code class="descname">is_abiunit</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#is_abiunit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.is_abiunit" title="Permalink to this definition">¶</a></dt>
<dd><p>True if string is one of the units supported by the ABINIT parser</p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.abivars.AbinitInputFile">
<em class="property">class </em><code class="descclassname">abipy.abio.abivars.</code><code class="descname">AbinitInputFile</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.TextFile</span></code>, <a class="reference internal" href="core_api.html#abipy.core.mixins.Has_Structure" title="abipy.core.mixins.Has_Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.Has_Structure</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.NotebookWriter" title="abipy.core.mixins.NotebookWriter"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.NotebookWriter</span></code></a></p>
<p>This object parses the Abinit input file, stores the variables in
dict-like objects (Datasets) and build <cite>Structure</cite> objects from
the input variables. Mainly used for inspecting the structure
declared in the Abinit input file.</p>
<dl class="classmethod">
<dt id="abipy.abio.abivars.AbinitInputFile.from_string">
<em class="property">classmethod </em><code class="descname">from_string</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.from_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the object from string.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.abivars.AbinitInputFile.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.abivars.AbinitInputFile.has_multi_structures">
<code class="descname">has_multi_structures</code><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.has_multi_structures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.has_multi_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>True if input defines multiple structures.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.abivars.AbinitInputFile.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.close" title="Permalink to this definition">¶</a></dt>
<dd><p>NOP, required by ABC.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.abivars.AbinitInputFile.structure">
<code class="descname">structure</code><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.structure" title="Permalink to this definition">¶</a></dt>
<dd><p>The structure defined in the input file.</p>
<p>If the input file contains multiple datasets <strong>AND</strong> the datasets
have different structures, this property returns None.
In this case, one has to access the structure of the individual datasets.
For example:</p>
<blockquote>
<div>input.datasets[0].structure</div></blockquote>
<p>gives the structure of the first dataset.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.abivars.AbinitInputFile.yield_figs">
<code class="descname">yield_figs</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.yield_figs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.yield_figs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function <em>generates</em> a predefined list of matplotlib figures with minimal input from the user.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.abivars.AbinitInputFile.write_notebook">
<code class="descname">write_notebook</code><span class="sig-paren">(</span><em>nbpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputFile.write_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputFile.write_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an ipython notebook to nbpath. If nbpath is None, a temporay file in the current
working directory is created. Return path to the notebook.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.abivars.AbinitInputParser">
<em class="property">class </em><code class="descclassname">abipy.abio.abivars.</code><code class="descname">AbinitInputParser</code><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="attribute">
<dt id="abipy.abio.abivars.AbinitInputParser.verbose">
<code class="descname">verbose</code><em class="property"> = 0</em><a class="headerlink" href="#abipy.abio.abivars.AbinitInputParser.verbose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.abivars.AbinitInputParser.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputParser.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receives a string <cite>s</cite> with the Abinit input and return
a list of <code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code> objects.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="abipy.abio.abivars.AbinitInputParser.eval_abinit_operators">
<em class="property">static </em><code class="descname">eval_abinit_operators</code><span class="sig-paren">(</span><em>tokens</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputParser.eval_abinit_operators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputParser.eval_abinit_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a list of strings, find the occurences of operators supported
in the input file (e.g. sqrt), evalute the expression and return new list of strings.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="abipy.abio.abivars.AbinitInputParser.varname_dtindex">
<em class="property">static </em><code class="descname">varname_dtindex</code><span class="sig-paren">(</span><em>tok</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars.html#AbinitInputParser.varname_dtindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars.AbinitInputParser.varname_dtindex" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">AbinitInputParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">varname_dtindex</span><span class="p">(</span><span class="s2">&quot;acell1&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;acell&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">varname_dtindex</span><span class="p">(</span><span class="s2">&quot;fa1k2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;fa1k&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.abio.abivars_db">
<span id="abivars-db-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">abivars_db</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.abivars_db" title="Permalink to this headline">¶</a></h2>
<p>Database with the names of the input variables used in Abinit and in other main programs.</p>
<dl class="function">
<dt id="abipy.abio.abivars_db.get_abinit_variables">
<code class="descclassname">abipy.abio.abivars_db.</code><code class="descname">get_abinit_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars_db.html#get_abinit_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars_db.get_abinit_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the database with the description of the ABINIT variables.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.abivars_db.docvar">
<code class="descclassname">abipy.abio.abivars_db.</code><code class="descname">docvar</code><span class="sig-paren">(</span><em>varname</em>, <em>executable='abinit'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars_db.html#docvar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars_db.docvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <cite>Variable</cite> object associated to this name.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.abivars_db.abinit_help">
<code class="descclassname">abipy.abio.abivars_db.</code><code class="descname">abinit_help</code><span class="sig-paren">(</span><em>varname</em>, <em>info=True</em>, <em>stream=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars_db.html#abinit_help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars_db.abinit_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the abinit documentation on the ABINIT input variable <cite>varname</cite></p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.abivars_db.repr_html_from_abinit_string">
<code class="descclassname">abipy.abio.abivars_db.</code><code class="descname">repr_html_from_abinit_string</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/abivars_db.html#repr_html_from_abinit_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.abivars_db.repr_html_from_abinit_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string <cite>text</cite> with an Abinit input file, replace all variables
with HTML links pointing to the official documentation. Return new string.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.abio.decorators">
<span id="decorators-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">decorators</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.decorators" title="Permalink to this headline">¶</a></h2>
<p>Decorators for AbinitInput or MultiDataset objects.</p>
<dl class="exception">
<dt id="abipy.abio.decorators.InputDecoratorError">
<em class="property">exception </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">InputDecoratorError</code><a class="reference internal" href="../_modules/abipy/abio/decorators.html#InputDecoratorError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.InputDecoratorError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Error class raised by <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">AbinitInputDecorator</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.AbinitInputDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">AbinitInputDecorator</code><a class="reference internal" href="../_modules/abipy/abio/decorators.html#AbinitInputDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.AbinitInputDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>An <cite>AbinitInputDecorator</cite> adds new options to an existing <code class="xref py py-class docutils literal"><span class="pre">AbinitInput</span></code>
or an existing <code class="xref py py-class docutils literal"><span class="pre">MultiDataset</span></code> without altering its structure. This is an abstract Base class.</p>
<p class="rubric">Example</p>
<p>decorator = MyDecorator(arguments)</p>
<p>new_abinit_input = decorator(abinit_input)
new_multidataset = decorator(multidataset)</p>
<p>Note that a decorator does not modify the object on which it acts.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please avoid introducing decorators acting on the structure (in particular the lattice)
since the initial input may use the initial structure to  compute important variables.
For instance, the list of k-points for band structure calculation depend on the bravais lattice
and a decorator that changes it should recompute the path.
This should  not represent a serious limitation because it’s always possible to change the structure
with its methods and then call the factory function without having to decorate an already existing object.</p>
</div>
<dl class="attribute">
<dt id="abipy.abio.decorators.AbinitInputDecorator.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.abio.decorators.AbinitInputDecorator.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.abio.decorators.InputDecoratorError" title="abipy.abio.decorators.InputDecoratorError"><code class="xref py py-class docutils literal"><span class="pre">InputDecoratorError</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.SpinDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">SpinDecorator</code><span class="sig-paren">(</span><em>spinmode</em>, <em>kptopt_ifspinor=4</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SpinDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SpinDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.decorators.AbinitInputDecorator</span></code></a></p>
<p>This decorator changes the spin polarization.</p>
<dl class="method">
<dt id="abipy.abio.decorators.SpinDecorator.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SpinDecorator.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SpinDecorator.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.decorators.SpinDecorator.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SpinDecorator.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SpinDecorator.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.SmearingDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">SmearingDecorator</code><span class="sig-paren">(</span><em>smearing</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SmearingDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SmearingDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.decorators.AbinitInputDecorator</span></code></a></p>
<p>This decorator changes the electronic smearing.</p>
<dl class="method">
<dt id="abipy.abio.decorators.SmearingDecorator.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SmearingDecorator.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SmearingDecorator.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.decorators.SmearingDecorator.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#SmearingDecorator.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.SmearingDecorator.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.XcDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">XcDecorator</code><span class="sig-paren">(</span><em>ixc</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#XcDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.XcDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.decorators.AbinitInputDecorator</span></code></a></p>
<p>Change the exchange-correlation functional.</p>
<dl class="method">
<dt id="abipy.abio.decorators.XcDecorator.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#XcDecorator.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.XcDecorator.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.decorators.XcDecorator.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#XcDecorator.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.XcDecorator.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.LdaUDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">LdaUDecorator</code><span class="sig-paren">(</span><em>symbols_luj</em>, <em>usepawu=1</em>, <em>unit='eV'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LdaUDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LdaUDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.decorators.AbinitInputDecorator</span></code></a></p>
<p>This decorator adds LDA+U parameters to an <code class="xref py py-class docutils literal"><span class="pre">AbinitInput</span></code> object.</p>
<dl class="method">
<dt id="abipy.abio.decorators.LdaUDecorator.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LdaUDecorator.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LdaUDecorator.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.decorators.LdaUDecorator.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LdaUDecorator.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LdaUDecorator.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.decorators.LexxDecorator">
<em class="property">class </em><code class="descclassname">abipy.abio.decorators.</code><code class="descname">LexxDecorator</code><span class="sig-paren">(</span><em>symbols_lexx</em>, <em>exchmix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LexxDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LexxDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.decorators.AbinitInputDecorator" title="abipy.abio.decorators.AbinitInputDecorator"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.decorators.AbinitInputDecorator</span></code></a></p>
<p>This decorator add local exact exchange to an <code class="xref py py-class docutils literal"><span class="pre">AbinitInput</span></code> object.</p>
<dl class="classmethod">
<dt id="abipy.abio.decorators.LexxDecorator.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LexxDecorator.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LexxDecorator.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.decorators.LexxDecorator.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/decorators.html#LexxDecorator.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.decorators.LexxDecorator.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.abio.factories">
<span id="factories-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">factories</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.factories" title="Permalink to this headline">¶</a></h2>
<p>Factory functions for Abinit input files</p>
<dl class="function">
<dt id="abipy.abio.factories.gs_input">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">gs_input</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa=None</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>scf_nband=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#gs_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.gs_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> for ground-state calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the SCF run. Defaults to 1000 if not given.</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized from the pseudos
according to accuracy)</li>
<li><strong>scf_nband</strong> – Number of bands for SCF run. If scf_nband is None, nband is automatically initialized
from the list of pseudos, the structure and the smearing option.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.ebands_input">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">ebands_input</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa=None</em>, <em>nscf_nband=None</em>, <em>ndivsm=15</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>scf_nband=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>dos_kppa=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#ebands_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.ebands_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object for band structure calculations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the SCF run. Defaults to 1000 if not given.</li>
<li><strong>nscf_nband</strong> – Number of bands included in the NSCF run. Set to scf_nband + 10 if None.</li>
<li><strong>ndivsm</strong> – Number of divisions used to sample the smallest segment of the k-path.
if 0, only the GS input is returned in multi[0].</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized from the pseudos
according to accuracy)</li>
<li><strong>scf_nband</strong> – Number of bands for SCF run. If scf_nband is None, nband is automatically initialized
from the list of pseudos, the structure and the smearing option.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
<li><strong>dos_kppa</strong> – Scalar or List of integers with the number of k-points per atom
to be used for the computation of the DOS (None if DOS is not wanted).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.ion_ioncell_relax_input">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">ion_ioncell_relax_input</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa=None</em>, <em>nband=None</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>shift_mode='Monkhorst-pack'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#ion_ioncell_relax_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.ion_ioncell_relax_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> for a structural relaxation. The first dataset optmizes the
atomic positions at fixed unit cell. The second datasets optimizes both ions and unit cell parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the Brillouin zone.</li>
<li><strong>nband</strong> – Number of bands included in the SCF run.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for the solution of the SCF cycle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.ion_ioncell_relax_and_ebands_input">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">ion_ioncell_relax_and_ebands_input</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa=None</em>, <em>nband=None</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#ion_ioncell_relax_and_ebands_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.ion_ioncell_relax_and_ebands_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> for a structural relaxation followed by a band structure run.
The first dataset optimizes the atomic positions at fixed unit cell.
The second datasets optimizes both ions and unit cell parameters.
The other datasets perform a band structure calculation.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Client code is responsible for propagating the relaxed structure obtained with the
second dataset to the inputs used for the band structure calculation.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the Brillouin zone.</li>
<li><strong>nband</strong> – Number of bands included in the SCF run.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object</p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.g0w0_with_ppmodel_inputs">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">g0w0_with_ppmodel_inputs</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa</em>, <em>nscf_nband</em>, <em>ecuteps</em>, <em>ecutsigx</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>shifts=(0.0</em>, <em>0.0</em>, <em>0.0)</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>ppmodel='godby'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>inclvkb=2</em>, <em>scr_nband=None</em>, <em>sigma_nband=None</em>, <em>gw_qprange=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#g0w0_with_ppmodel_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.g0w0_with_ppmodel_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object that performs G0W0 calculations with the plasmon pole approximation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the SCF run.</li>
<li><strong>nscf_nband</strong> – Number of bands included in the NSCF run.</li>
<li><strong>ecuteps</strong> – Cutoff energy [Ha] for the screening matrix.</li>
<li><strong>ecutsigx</strong> – Cutoff energy [Ha] for the exchange part of the self-energy.</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized
from the pseudos according to accuracy)</li>
<li><strong>shifts</strong> – Shifts for k-mesh.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>ppmodel</strong> – Plasmonpole technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
<li><strong>inclvkb</strong> – Treatment of the dipole matrix elements (see abinit variable).</li>
<li><strong>scr_nband</strong> – Number of bands used to compute the screening (default is nscf_nband)</li>
<li><strong>sigma_nband</strong> – Number of bands used to compute the self-energy (default is nscf_nband)</li>
<li><strong>gw_qprange</strong> – Option for the automatic selection of k-points and bands for GW corrections.
See Abinit docs for more detail. The default value makes the code compute the
QP energies for all the point in the IBZ and one band above and one band below the Fermi level.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.g0w0_convergence_inputs">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">g0w0_convergence_inputs</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa</em>, <em>nscf_nband</em>, <em>ecuteps</em>, <em>ecutsigx</em>, <em>scf_nband</em>, <em>ecut</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>response_models=None</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>inclvkb=2</em>, <em>gw_qprange=1</em>, <em>gamma=True</em>, <em>nksmall=None</em>, <em>extra_abivars=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#g0w0_convergence_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.g0w0_convergence_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object to generate a G0W0 work for the given the material.
See also <a class="reference internal" href="../zzbiblio.html#setten2017" id="id2">[Setten2017]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object</li>
<li><strong>pseudos</strong> – List of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects.</li>
<li><strong>kppa</strong> – k points per reciprocal atom.</li>
<li><strong>scf_nband</strong> – number of scf bands</li>
<li><strong>ecut</strong> – ecut for all calcs that that are not ecut convergence  cals at scf level</li>
<li><strong>Defines the sampling used for the SCF run.</strong> (<em>scf</em>) – </li>
<li><strong>nscf_nband</strong> – a list of number of bands included in the screening and sigmaruns.
The NSCF run will be done with the maximum.</li>
<li><strong>ecuteps</strong> – list of Cutoff energy [Ha] for the screening matrix.</li>
<li><strong>ecutsigx</strong> – Cutoff energy [Ha] for the exchange part of the self-energy.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
<li><strong>inclvkb</strong> – Treatment of the dipole matrix elements (see abinit variable).</li>
<li><strong>response_models</strong> – List of response models</li>
<li><strong>gw_qprange</strong> – selectpr for the qpoint mesh</li>
<li><strong>gamma</strong> – is true a gamma centered mesh is enforced</li>
<li><strong>nksmall</strong> – Kpoint division for additional band and dos calculations</li>
<li><strong>extra_abivars</strong> – Dictionary with extra variables passed to ABINIT for all tasks.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>extra abivars that are provided with _s appended will be take as a list of values to be tested a scf level</p>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.bse_with_mdf_inputs">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">bse_with_mdf_inputs</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>scf_kppa</em>, <em>nscf_nband</em>, <em>nscf_ngkpt</em>, <em>nscf_shiftk</em>, <em>ecuteps</em>, <em>bs_loband</em>, <em>bs_nband</em>, <em>mbpt_sciss</em>, <em>mdf_epsinf</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>exc_type='TDA'</em>, <em>bs_algo='haydock'</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#bse_with_mdf_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.bse_with_mdf_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object that performs a GS + NSCF + Bethe-Salpeter calculation.
The self-energy corrections are approximated with the scissors operator.
The screening is modeled with the model dielectric function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>scf_kppa</strong> – Defines the sampling used for the SCF run.</li>
<li><strong>nscf_nband</strong> – Number of bands included in the NSCF run.</li>
<li><strong>nscf_ngkpt</strong> – Divisions of the k-mesh used for the NSCF and the BSE run.</li>
<li><strong>nscf_shiftk</strong> – Shifts used for the NSCF and the BSE run.</li>
<li><strong>ecuteps</strong> – Cutoff energy [Ha] for the screening matrix.</li>
<li><strong>bs_loband</strong> – Index of the first occupied band included the e-h basis set
(ABINIT convention i.e. first band starts at 1).
Can be scalar or array of shape (nsppol,)</li>
<li><strong>bs_nband</strong> – Highest band idex used for the construction of the e-h basis set.</li>
<li><strong>mbpt_sciss</strong> – Scissor energy in Hartree.</li>
<li><strong>mdf_epsinf</strong> – Value of the macroscopic dielectric function used in expression for the model dielectric function.</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized from the pseudos
according to accuracy)</li>
<li><strong>exc_type</strong> – Approximation used for the BSE Hamiltonian (Tamm-Dancoff or coupling).</li>
<li><strong>bs_algo</strong> – Algorith for the computatio of the macroscopic dielectric function.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving the SCF cycle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.scf_phonons_inputs">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">scf_phonons_inputs</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>scf_nband=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#scf_phonons_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.scf_phonons_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of input files for performing phonon calculations.
GS input + the input files for the phonon calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the SCF run.</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized from the
pseudos according to accuracy)</li>
<li><strong>scf_nband</strong> – Number of bands for SCF run. If scf_nband is None, nband is automatically initialized from the list of
pseudos, the structure and the smearing option.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.phonons_from_gsinput">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">phonons_from_gsinput</code><span class="sig-paren">(</span><em>gs_inp</em>, <em>ph_ngqpt=None</em>, <em>qpoints=None</em>, <em>with_ddk=True</em>, <em>with_dde=True</em>, <em>with_bec=False</em>, <em>ph_tol=None</em>, <em>ddk_tol=None</em>, <em>dde_tol=None</em>, <em>wfq_tol=None</em>, <em>qpoints_to_skip=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#phonons_from_gsinput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.phonons_from_gsinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of inputs in the form of a MultiDataset to perform phonon calculations, based on
a ground state <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a>.
It will determine if WFQ files should be calculated for some q points and add the NSCF AbinitInputs to the set.
The inputs have the following tags, according to their function: “ddk”, “dde”, “nscf”, “ph_q_pert”.
All of them have the tag “phonon”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gs_inp</strong> – an <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a ground state calculation, likely the SCF performed to get the WFK.</li>
<li><strong>ph_ngqpt</strong> – a list of three integers representing the gamma centered q-point grid used for the calculation.
If None and qpoint==None the ngkpt value present in the gs_input will be used.
Incompatible with qpoints.</li>
<li><strong>qpoints</strong> – a list of coordinates of q points in reduced coordinates for which the phonon perturbations will
be calculated. Incompatible with ph_ngqpt.</li>
<li><strong>with_ddk</strong> – If True, if Gamma is included in the list of qpoints it will add inputs for the calculations of
the DDK.</li>
<li><strong>with_dde</strong> – If True, if Gamma is included in the list of qpoints it will add inputs for the calculations of
the DDE. Automatically sets with_ddk=True.</li>
<li><strong>with_bec</strong> – If Truem if Gamma is included in the list of qpoints the DDE will be calculated in the same
input as the phonons. This will allow to determine the BECs.
Automatically sets with_ddk=True and with_dde=False.</li>
<li><strong>ph_tol</strong> – a dictionary with a single key defining the type of tolerance used for the phonon calculations and
its value. Default: {“tolvrs”: 1.0e-10}.</li>
<li><strong>ddk_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDK calculations and
its value. Default: {“tolwfr”: 1.0e-22}.</li>
<li><strong>dde_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDE calculations and
its value. Default: {“tolvrs”: 1.0e-10}.</li>
<li><strong>wfq_tol</strong> – a dictionary with a single key defining the type of tolerance used for the NSCF calculations of
the WFQ and its value. Default {“tolwfr”: 1.0e-22}.</li>
<li><strong>qpoints_to_skip</strong> – a list of coordinates of q points in reduced coordinates that will be skipped.
Useful when calculating multiple grids for the same system to avoid duplicate calculations.
If a DDB needs to be extended with more q points use e.g. ddb.qpoints.to_array().</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.piezo_elastic_inputs_from_gsinput">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">piezo_elastic_inputs_from_gsinput</code><span class="sig-paren">(</span><em>gs_inp</em>, <em>ddk_tol=None</em>, <em>rf_tol=None</em>, <em>ddk_split=False</em>, <em>rf_split=False</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#piezo_elastic_inputs_from_gsinput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.piezo_elastic_inputs_from_gsinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> for performing elastic and piezoelectric constants calculations.
GS input + the input files for the elastic and piezoelectric constants calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gs_inp</strong> – Ground State input to build piezo elastic inputs from.</li>
<li><strong>ddk_tol</strong> – Tolerance for the DDK calculation (i.e. {“tolwfr”: 1.0e-20}).</li>
<li><strong>rf_tol</strong> – Tolerance for the Strain RF calculations (i.e. {“tolvrs”: 1.0e-12}).</li>
<li><strong>ddk_split</strong> – Whether to split the DDK calculations.</li>
<li><strong>rf_split</strong> – whether to split the RF calculations.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.scf_piezo_elastic_inputs">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">scf_piezo_elastic_inputs</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>scf_nband=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>ddk_tol=None</em>, <em>rf_tol=None</em>, <em>ddk_split=False</em>, <em>rf_split=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#scf_piezo_elastic_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.scf_piezo_elastic_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> for performing elastic and piezoelectric constants calculations.
GS input + the input files for the elastic and piezoelectric constants calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>pseudos</strong> – List of filenames or list of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.PseudoTable" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.PseudoTable</span></code></a> object.</li>
<li><strong>kppa</strong> – Defines the sampling used for the SCF run.</li>
<li><strong>ecut</strong> – cutoff energy in Ha (if None, ecut is initialized from the pseudos according to accuracy)</li>
<li><strong>pawecutdg</strong> – cutoff energy in Ha for PAW double-grid (if None, pawecutdg is initialized from the
pseudos according to accuracy)</li>
<li><strong>scf_nband</strong> – Number of bands for SCF run. If scf_nband is None, nband is automatically initialized
from the list of pseudos, the structure and the smearing option.</li>
<li><strong>accuracy</strong> – Accuracy of the calculation.</li>
<li><strong>spin_mode</strong> – Spin polarization.</li>
<li><strong>smearing</strong> – Smearing technique.</li>
<li><strong>charge</strong> – Electronic charge added to the unit cell.</li>
<li><strong>scf_algorithm</strong> – Algorithm used for solving of the SCF cycle.</li>
<li><strong>ddk_tol</strong> – Tolerance for the Ddk calculation (i.e. {“tolwfr”: 1.0e-20}).</li>
<li><strong>rf_tol</strong> – Tolerance for the Strain RF calculations (i.e. {“tolvrs”: 1.0e-12}).</li>
<li><strong>ddk_split</strong> – Whether to split the ddk calculations.</li>
<li><strong>rf_split</strong> – whether to split the RF calculations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.scf_for_phonons">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">scf_for_phonons</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>kppa=None</em>, <em>ecut=None</em>, <em>pawecutdg=None</em>, <em>nband=None</em>, <em>accuracy='normal'</em>, <em>spin_mode='polarized'</em>, <em>smearing='fermi_dirac:0.1 eV'</em>, <em>charge=0.0</em>, <em>scf_algorithm=None</em>, <em>shift_mode='Symmetric'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#scf_for_phonons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.scf_for_phonons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.dte_from_gsinput">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">dte_from_gsinput</code><span class="sig-paren">(</span><em>gs_inp</em>, <em>use_phonons=True</em>, <em>ph_tol=None</em>, <em>ddk_tol=None</em>, <em>dde_tol=None</em>, <em>skip_dte_permutations=False</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#dte_from_gsinput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.dte_from_gsinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of inputs in the form of a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> to perform calculations of non-linear properties, based on
a ground state AbinitInput.</p>
<p>The inputs have the following tags, according to their function: “ddk”, “dde”, “ph_q_pert” and “dte”.
All of them have the tag “dfpt”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gs_inp</strong> – an <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a ground state calculation, likely the SCF performed to get the WFK.</li>
<li><strong>use_phonons</strong> – determine wether the phonon perturbations at gamma should be included or not</li>
<li><strong>ph_tol</strong> – a dictionary with a single key defining the type of tolerance used for the phonon calculations and
its value. Default: {“tolvrs”: 1.0e-22}.</li>
<li><strong>ddk_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDK calculations and
its value. Default: {“tolwfr”: 1.0e-22}.</li>
<li><strong>dde_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDE calculations and
its value. Default: {“tolvrs”: 1.0e-22}.</li>
<li><strong>skip_dte_permutations</strong> – Since the current version of abinit always performs all the permutations of the
perturbations, even if only one is asked, if True avoids the creation of inputs that will produce
duplicated outputs.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.abio.factories.dfpt_from_gsinput">
<code class="descclassname">abipy.abio.factories.</code><code class="descname">dfpt_from_gsinput</code><span class="sig-paren">(</span><em>gs_inp</em>, <em>ph_ngqpt=None</em>, <em>qpoints=None</em>, <em>do_ddk=True</em>, <em>do_dde=True</em>, <em>do_strain=True</em>, <em>do_dte=False</em>, <em>ph_tol=None</em>, <em>ddk_tol=None</em>, <em>dde_tol=None</em>, <em>wfq_tol=None</em>, <em>strain_tol=None</em>, <em>skip_dte_permutations=False</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/factories.html#dfpt_from_gsinput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.factories.dfpt_from_gsinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of inputs in the form of a MultiDataset to perform a set of calculations based on DFPT including
phonons, elastic and non-linear properties. Requires a ground state <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> as a starting point.</p>
<p>It will determine if WFQ files should be calculated for some q points and add the NSCF AbinitInputs to the set.
The original input is included and the inputs have the following tags, according to their function:
“scf”, “ddk”, “dde”, “nscf”, “ph_q_pert”, “strain”, “dte”, “dfpt”.</p>
<p>N.B. Currently (version 8.8.3) anaddb does not support a DDB containing both 2nd order derivatives with qpoints
different from gamma AND  3rd oreder derivatives. The calculations could be run, but the global DDB will not
be directly usable as is.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gs_inp</strong> – an <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> representing a ground state calculation, likely the SCF performed to get the WFK.</li>
<li><strong>ph_ngqpt</strong> – a list of three integers representing the gamma centered q-point grid used for the calculation.
If None and qpoint==None the ngkpt value present in the gs_input will be used.
Incompatible with qpoints.</li>
<li><strong>qpoints</strong> – a list of coordinates of q points in reduced coordinates for which the phonon perturbations will
be calculated. Incompatible with ph_ngqpt.</li>
<li><strong>do_ddk</strong> – If True, if Gamma is included in the list of qpoints it will add inputs for the calculations of
the DDK.</li>
<li><strong>do_dde</strong> – If True, if Gamma is included in the list of qpoints it will add inputs for the calculations of
the DDE. Automatically sets with_ddk=True.</li>
<li><strong>do_strain</strong> – If True inputs for the strain perturbations will be included.</li>
<li><strong>do_dte</strong> – If True inputs for the non-linear perturbations will be included. The phonon non-linear perturbations
will be included only if a phonon calculation at gamma is present. The caller is responsible for
adding it.</li>
<li><strong>ph_tol</strong> – a dictionary with a single key defining the type of tolerance used for the phonon calculations and
its value. Default: {“tolvrs”: 1.0e-10}.</li>
<li><strong>ddk_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDK calculations and
its value. Default: {“tolwfr”: 1.0e-22}.</li>
<li><strong>dde_tol</strong> – a dictionary with a single key defining the type of tolerance used for the DDE calculations and
its value. Default: {“tolvrs”: 1.0e-10}.</li>
<li><strong>wfq_tol</strong> – a dictionary with a single key defining the type of tolerance used for the NSCF calculations of
the WFQ and its value. Default {“tolwfr”: 1.0e-22}.</li>
<li><strong>strain_tol</strong> – dictionary with a single key defining the type of tolerance used for the strain calculations of
and its value. Default {“tolvrs”: 1.0e-12}.</li>
<li><strong>skip_dte_permutations</strong> – Since the current version of abinit always performs all the permutations of the
perturbations, even if only one is asked, if True avoids the creation of inputs that will produce
duplicated outputs.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-abipy.abio.input_tags">
<span id="input-tags-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">input_tags</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.input_tags" title="Permalink to this headline">¶</a></h2>
<p>This module contains a list of default tags for the AbinitInput object</p>
</div>
<div class="section" id="module-abipy.abio.inputs">
<span id="inputs-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">inputs</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.inputs" title="Permalink to this headline">¶</a></h2>
<p>This module defines objects to facilitate the creation of ABINIT input files.
The syntax is similar to the one used in ABINIT with small differences.</p>
<dl class="class">
<dt id="abipy.abio.inputs.AbstractInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AbstractInput</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">collections.abc.MutableMapping</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class defining the methods that must be implemented by Input objects.</p>
<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>filepath='run.abi'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the input file to file to <code class="docutils literal"><span class="pre">filepath</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.deepcopy">
<code class="descname">deepcopy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.deepcopy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.deepcopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy of the input.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.set_vars">
<code class="descname">set_vars</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.set_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.set_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the variables.
Return dict with the variables added to the input.</p>
<p class="rubric">Example</p>
<p>input.set_vars(ecut=10, ionmov=3)</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.set_vars_ifnotin">
<code class="descname">set_vars_ifnotin</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.set_vars_ifnotin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.set_vars_ifnotin" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the variables but only if the variable is not already present.
Return dict with the variables added to the input.</p>
<p class="rubric">Example</p>
<p>input.set_vars(ecut=10, ionmov=3)</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.pop_vars">
<code class="descname">pop_vars</code><span class="sig-paren">(</span><em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.pop_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.pop_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the variables listed in keys.
Return dictionary with the variables that have been removed.
Unlike remove_vars, no exception is raised if the variables are not in the input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keys</strong> – string or list of strings with variable names.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>inp.pop_vars([“ionmov”, “optcell”, “ntime”, “dilatmx”])</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.remove_vars">
<code class="descname">remove_vars</code><span class="sig-paren">(</span><em>keys</em>, <em>strict=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.remove_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.remove_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the variables listed in keys.
Return dictionary with the variables that have been removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keys</strong> – string or list of strings with variable names.</li>
<li><strong>strict</strong> – If True, KeyError is raised if at least one variable is not present.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbstractInput.vars">
<code class="descname">vars</code><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with the input variables. Used to implement dict-like interface.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with the input.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbstractInput.generate">
<code class="descname">generate</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbstractInput.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbstractInput.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates new inputs by replacing the variables specified in kwargs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> – keyword arguments with the values used for each variable.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">gs_inp</span> <span class="o">=</span> <span class="n">call_function_to_generate_initial_template</span><span class="p">()</span>

<span class="c1"># To generate two input files with different values of ecut:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">gs_inp</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>

<span class="c1"># To generate four input files with all the possible combinations of ecut and nsppol:</span>
<span class="k">for</span> <span class="n">inp_ecut</span> <span class="ow">in</span> <span class="n">gs_inpt</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">ecut</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">nsppol</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;do something with inp_ecut </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">inp_ecut</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.AbiAbstractInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AbiAbstractInput</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbiAbstractInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbiAbstractInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.inputs.AbstractInput" title="abipy.abio.inputs.AbstractInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbstractInput</span></code></a></p>
<p>Abstract class defining the methods that must be implemented by Input objects.
associated to Abinit executables.</p>
<dl class="method">
<dt id="abipy.abio.inputs.AbiAbstractInput.add_abiobjects">
<code class="descname">add_abiobjects</code><span class="sig-paren">(</span><em>*abi_objects</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbiAbstractInput.add_abiobjects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbiAbstractInput.add_abiobjects" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receive a list of <code class="docutils literal"><span class="pre">AbiVarable</span></code> objects and add
the corresponding variables to the input.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbiAbstractInput.abivalidate">
<code class="descname">abivalidate</code><span class="sig-paren">(</span><em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbiAbstractInput.abivalidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbiAbstractInput.abivalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>This method should invoke the executable associated to the input object.
to test whether the input variables are correct and consistent.
The executable is supposed to implemente some sort of <cite>–dry-run</cite> option
that invokes the parser to validate the input and exits.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">retcode: Return code. 0 if OK.
output_file: output file of the run.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.
task: Task object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">namedtuple</span></code> with the following attributes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="abipy.abio.inputs.AbinitInputError">
<em class="property">exception </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AbinitInputError</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInputError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInputError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Base error class for exceptions raised by <code class="docutils literal"><span class="pre">AbinitInput</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.AbinitInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AbinitInput</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>pseudo_dir=None</em>, <em>comment=None</em>, <em>decorators=None</em>, <em>abi_args=None</em>, <em>abi_kwargs=None</em>, <em>tags=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.inputs.AbiAbstractInput" title="abipy.abio.inputs.AbiAbstractInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbiAbstractInput</span></code></a>, <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">monty.json.MSONable</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.Has_Structure" title="abipy.core.mixins.Has_Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.Has_Structure</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object stores the ABINIT variables for a single dataset.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-bef8d6dd969f7eb59102f412b80a3c08ed729516.png" alt="Inheritance diagram of AbinitInput" usemap="#inheritancea477a00259" class="inheritance"/>
<map id="inheritancea477a00259" name="inheritancea477a00259">
<area shape="rect" id="node1" href="#abipy.abio.inputs.AbiAbstractInput" target="_top" title="Abstract class defining the methods that must be implemented by Input objects." alt="" coords="550,48,654,59"/>
<area shape="rect" id="node3" href="#abipy.abio.inputs.AbinitInput" target="_top" title="This object stores the ABINIT variables for a single dataset." alt="" coords="677,25,765,37"/>
<area shape="rect" id="node2" href="#abipy.abio.inputs.AbstractInput" target="_top" title="Abstract class defining the methods that must be implemented by Input objects." alt="" coords="431,48,527,59"/>
<area shape="rect" id="node4" title="This is a mix&#45;in base class specifying an API for msonable objects. MSON" alt="" coords="566,3,638,14"/>
<area shape="rect" id="node5" href="core_api.html#abipy.core.mixins.Has_Structure" target="_top" title="Mixin class for :class:`AbinitNcFile` containing crystallographic data." alt="" coords="552,25,652,37"/>
</map>
<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.abio.inputs.AbinitInputError" title="abipy.abio.inputs.AbinitInputError"><code class="xref py py-class docutils literal"><span class="pre">AbinitInputError</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.variable_checksum">
<code class="descname">variable_checksum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.variable_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.variable_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string with sha1 value in hexadecimal format.
This method is mainly used in unit tests to check the invariance
of the input objects. Note, indeed, that AbintInput is mutable and therefore
should not be used as keyword in dictionaries.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.vars">
<code class="descname">vars</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.vars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AbinitInput.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.runlevel">
<code class="descname">runlevel</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.runlevel" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of strings defining the type of run of the current input.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.decorators">
<code class="descname">decorators</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.decorators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.register_decorator">
<code class="descname">register_decorator</code><span class="sig-paren">(</span><em>decorator</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.register_decorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.register_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <code class="xref py py-class docutils literal"><span class="pre">AbinitInputDecorator</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_mnemonics">
<code class="descname">set_mnemonics</code><span class="sig-paren">(</span><em>boolean</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_mnemonics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_mnemonics" title="Permalink to this definition">¶</a></dt>
<dd><p>True if mnemonics should be printed</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.mnemonics">
<code class="descname">mnemonics</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.mnemonics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if mnemonics should be printed</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.uses_ktimereversal">
<code class="descname">uses_ktimereversal</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.uses_ktimereversal" title="Permalink to this definition">¶</a></dt>
<dd><p>True if time-reversal symmetry is used to generate k-points in the IBZ.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_spell_check">
<code class="descname">set_spell_check</code><span class="sig-paren">(</span><em>false_or_true</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_spell_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_spell_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Activate/Deactivate spell-checking</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.spell_check">
<code class="descname">spell_check</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.spell_check" title="Permalink to this definition">¶</a></dt>
<dd><p>True if spell checking is activated.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>sortmode='section'</em>, <em>post=None</em>, <em>with_mnemonics=False</em>, <em>mode='text'</em>, <em>with_structure=True</em>, <em>with_pseudos=True</em>, <em>exclude=None</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sortmode</strong> – “section” if variables should be grouped by sections.
“a” for alphabetical order, None if no sorting is wanted.</li>
<li><strong>with_mnemonics</strong> – True if mnemonics should be added.</li>
<li><strong>mode</strong> – Either <cite>text</cite> or <cite>html</cite> if HTML output with links is wanted.</li>
<li><strong>post</strong> – String that will be appended to the name of the variables
Note that post is usually autodetected when we have multiple datatasets
It is mainly used when we have an input file with a single dataset
so that we can prevent the code from adding “1” to the name of the variables
(In this case, indeed, Abinit complains if ndtset=1 is not specified
and we don’t want ndtset=1 simply because the code will start to add
_DS1_ to all the input and output files.</li>
<li><strong>with_structure</strong> – False if section with structure variables should not be printed.</li>
<li><strong>with_pseudos</strong> – False if JSON section with pseudo data should not be added.</li>
<li><strong>exclude</strong> – List of variable names that should be ignored.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.comment">
<code class="descname">comment</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional string with comment. None if comment is not set.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_comment">
<code class="descname">set_comment</code><span class="sig-paren">(</span><em>comment</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a comment to be included at the top of the file.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.structure">
<code class="descname">structure</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.structure" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object associated to this input.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_structure">
<code class="descname">set_structure</code><span class="sig-paren">(</span><em>structure</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set structure.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_kmesh">
<code class="descname">set_kmesh</code><span class="sig-paren">(</span><em>ngkpt</em>, <em>shiftk</em>, <em>kptopt=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_kmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_kmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables for the sampling of the BZ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ngkpt</strong> – Monkhorst-Pack divisions</li>
<li><strong>shiftk</strong> – List of shifts.</li>
<li><strong>kptopt</strong> – Option for the generation of the mesh.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_gamma_sampling">
<code class="descname">set_gamma_sampling</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_gamma_sampling"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_gamma_sampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Gamma-only sampling of the BZ.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_autokmesh">
<code class="descname">set_autokmesh</code><span class="sig-paren">(</span><em>nksmall</em>, <em>kptopt=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_autokmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_autokmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables (ngkpt, shift, kptopt) for the sampling of the BZ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nksmall</strong> – Number of k-points used to sample the smallest lattice vector.</li>
<li><strong>kptopt</strong> – Option for the generation of the mesh.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_phdos_qmesh">
<code class="descname">set_phdos_qmesh</code><span class="sig-paren">(</span><em>nqsmall</em>, <em>method='tetra'</em>, <em>ph_qshift=(0</em>, <em>0</em>, <em>0)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_phdos_qmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_phdos_qmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables (ngkpt, shift, kptopt) for the computation of the Phonon DOS in Abinit.
Remember that the Phdos is computed via Fourier interpolation so there’s no constraint
of the q-mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nqsmall</strong> – Number of k-points used to sample the smallest lattice vector.</li>
<li><strong>method</strong> – gaussian or tetra.</li>
<li><strong>ph_qshift</strong> – Shift for the mesh.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_kpath">
<code class="descname">set_kpath</code><span class="sig-paren">(</span><em>ndivsm</em>, <em>kptbounds=None</em>, <em>iscf=-2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_kpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_kpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables for the computation of the electronic band structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ndivsm</strong> – Number of divisions for the smallest segment.</li>
<li><strong>kptbounds</strong> – k-points defining the path in k-space.
If None, we use the default high-symmetry k-path defined in the pymatgen database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_qpath">
<code class="descname">set_qpath</code><span class="sig-paren">(</span><em>ndivsm</em>, <em>qptbounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_qpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_qpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables for the computation of the phonon band structure
and phonon linewidths.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ndivsm</strong> – Number of divisions for the smallest segment.</li>
<li><strong>qptbounds</strong> – q-points defining the path in q-space.
If None, we use the default high-symmetry q-path defined in the pymatgen database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_kptgw">
<code class="descname">set_kptgw</code><span class="sig-paren">(</span><em>kptgw</em>, <em>bdgw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_kptgw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_kptgw" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables (k-points, bands) for the computation of GW corrections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>kptgw</strong> – List of k-points in reduced coordinates.</li>
<li><strong>bdgw</strong> – Specifies the range of bands for the GW corrections.
Accepts iterable that be reshaped to (nkptgw, 2)
or a tuple of two integers if the extrema are the same for each k-point.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_spin_mode">
<code class="descname">set_spin_mode</code><span class="sig-paren">(</span><em>spin_mode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_spin_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_spin_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables used to the treat the spin degree of freedom.
Return dictionary with the variables that have been removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>spin_mode</strong> – <code class="xref py py-class docutils literal"><span class="pre">SpinMode</span></code> object or string. Possible values for string are:</li>
<li><strong>polarized</strong> (<em>-</em>) – </li>
<li><strong>unpolarized</strong> (<em>-</em>) – </li>
<li><strong>afm</strong> (<em>-</em>) – </li>
<li><strong>spinor</strong> (<em>-</em>) – </li>
<li><strong>spinor_nomag</strong> (<em>-</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.set_autospinat">
<code class="descname">set_autospinat</code><span class="sig-paren">(</span><em>default=0.6</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.set_autospinat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.set_autospinat" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variable spinat for collinear calculation in the format (0, 0, m) with the value of m determined
with the following order of preference:</p>
<ol class="arabic simple">
<li>If the site of the structure has a magmom setting, that is used.</li>
<li>If the species on the site has a spin setting, that is used.</li>
<li>If the species itself has a particular setting in the config file, that
is used, e.g., Mn3+ may have a different magmom than Mn4+.</li>
<li>The element symbol itself is checked in the config file.</li>
<li>If there are no settings, the default value is used.</li>
</ol>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.pseudos">
<code class="descname">pseudos</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.pseudos" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.pseudos.html#pymatgen.io.abinit.pseudos.Pseudo" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.pseudos.Pseudo</span></code></a> objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.ispaw">
<code class="descname">ispaw</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.ispaw" title="Permalink to this definition">¶</a></dt>
<dd><p>True if PAW calculation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.isnc">
<code class="descname">isnc</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.isnc" title="Permalink to this definition">¶</a></dt>
<dd><p>True if norm-conserving calculation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.num_valence_electrons">
<code class="descname">num_valence_electrons</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.num_valence_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of valence electrons computed from the pseudos and the structure.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.valence_electrons_per_atom">
<code class="descname">valence_electrons_per_atom</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.valence_electrons_per_atom" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of valence electrons for each atom in the structure.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.linspace">
<code class="descname">linspace</code><span class="sig-paren">(</span><em>varname</em>, <em>start</em>, <em>stop</em>, <em>num=50</em>, <em>endpoint=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.linspace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.linspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <cite>num</cite> evenly spaced samples, calculated over the interval [<cite>start</cite>, <cite>stop</cite>].</p>
<p>The endpoint of the interval can optionally be excluded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – The starting value of the sequence.</li>
<li><strong>stop</strong> – The end value of the sequence, unless <cite>endpoint</cite> is set to False.
In that case, the sequence consists of all but the last of <code class="docutils literal"><span class="pre">ndtset</span> <span class="pre">+</span> <span class="pre">1</span></code>
evenly spaced samples, so that <cite>stop</cite> is excluded.  Note that the step
size changes when <cite>endpoint</cite> is False.</li>
<li><strong>num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of samples to generate. Default is 50.</li>
<li><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – optional. If True, <cite>stop</cite> is the last sample. Otherwise, it is not included.
Default is True.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.arange">
<code class="descname">arange</code><span class="sig-paren">(</span><em>varname</em>, <em>start</em>, <em>stop</em>, <em>step</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.arange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.arange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return evenly spaced values within a given interval.</p>
<p>Values are generated within the half-open interval <code class="docutils literal"><span class="pre">[start,</span> <span class="pre">stop)</span></code>
(in other words, the interval including <cite>start</cite> but excluding <cite>stop</cite>).</p>
<p>When using a non-integer step, such as 0.1, the results will often not
be consistent.  It is better to use <code class="docutils literal"><span class="pre">linspace</span></code> for these cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – Start of interval. The interval includes this value. The default start value is 0.</li>
<li><strong>stop</strong> – End of interval.  The interval does not include this value, except
in some cases where <cite>step</cite> is not an integer and floating point</li>
<li><strong>step</strong> – Spacing between values.  For any output <cite>out</cite>, this is the distance
between two adjacent values, <code class="docutils literal"><span class="pre">out[i+1]</span> <span class="pre">-</span> <span class="pre">out[i]</span></code>.  The default
step size is 1.  If <cite>step</cite> is specified, <cite>start</cite> must also be given.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.product">
<code class="descname">product</code><span class="sig-paren">(</span><em>*items</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.product"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.product" title="Permalink to this definition">¶</a></dt>
<dd><p>Cartesian product of input iterables. Equivalent to nested for-loops.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">inp</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s2">&quot;ngkpt&quot;</span><span class="p">,</span> <span class="s2">&quot;tsmear&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.new_with_vars">
<code class="descname">new_with_vars</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.new_with_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.new_with_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new input with the given variables.</p>
<p class="rubric">Example</p>
<p>new = input.new_with_vars(ecut=20)</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.new_with_structure">
<code class="descname">new_with_structure</code><span class="sig-paren">(</span><em>new_structure</em>, <em>scdims=None</em>, <em>verbose=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.new_with_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.new_with_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> with different structure.
See notes below for the constraints that must be fulfilled by the new structure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>new_structure</strong> – Parameters defining the crystalline structure. Accepts <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object
file with structure (CIF, netcdf file, …) or dictionary with ABINIT geo variables.</li>
<li><strong>scdims</strong> – 3 integer giving with the number of cells in the supercell along the three reduced directions.
Must be used when <cite>new_structure</cite> represents a supercell of the initial structure defined
in the input file.</li>
<li><strong>verbose</strong> – Verbosity level.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If <code class="docutils literal"><span class="pre">scdims</span></code> is None (i.e. no supercell), the two structures must have the same value of
<cite>natom</cite> and <cite>typat</cite>, they can only differ at the level of the lattice and of the atomic positions.
When structure represents a supercell, <cite>scdims</cite> must be coherent with the <cite>new_structure</cite> passed
as argument.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.new_with_decorators">
<code class="descname">new_with_decorators</code><span class="sig-paren">(</span><em>decorators</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.new_with_decorators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.new_with_decorators" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receives a list of <code class="xref py py-class docutils literal"><span class="pre">AbinitInputDecorator</span></code> objects or just a single object,
applies the decorators to the input and returns a new <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> object. self is not changed.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.pop_tolerances">
<code class="descname">pop_tolerances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.pop_tolerances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.pop_tolerances" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the tolerance variables present in self.
Return dictionary with the variables that have been removed.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.pop_irdvars">
<code class="descname">pop_irdvars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.pop_irdvars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.pop_irdvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the <cite>ird*</cite> variables present in self.
Return dictionary with the variables that have been removed.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AbinitInput.scf_tolvar">
<code class="descname">scf_tolvar</code><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.scf_tolvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the tolerance variable and value relative to the SCF convergence.
If more than one is present raise an error</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_ph_inputs_qpoint">
<code class="descname">make_ph_inputs_qpoint</code><span class="sig-paren">(</span><em>qpt</em>, <em>tolerance=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_ph_inputs_qpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_ph_inputs_qpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds and returns a <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> list of input files
for the calculation of phonons at the given q-point <cite>qpt</cite>.
It should be called with an input the represents a GS run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>qpt</strong> – q-point in reduced coordinates.</li>
<li><strong>tolerance</strong> – dict {varname: value} with the tolerance to be used in the DFPT run.
Defaults to {“tolvrs”: 1.0e-10}.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The routine assumes the q-point is such that k + q belongs to the initial GS mesh.
so that the DFPT run can be started from the WFK file directly without having
to generate WFQ files.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_ddk_inputs">
<code class="descname">make_ddk_inputs</code><span class="sig-paren">(</span><em>tolerance=None</em>, <em>kptopt=2</em>, <em>only_vk=False</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_ddk_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_ddk_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return inputs for performing DDK calculations.
This functions should be called with an input the represents a GS run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tolerance</strong> – dict {varname: value} with the tolerance to be used in the DFPT run.
Defaults to {“tolwfr”: 1.0e-22}.</li>
<li><strong>kptopt</strong> – 2 to take into account time-reversal symmetry. note that kptopt 1 is not available.</li>
<li><strong>only_vk</strong> – If only matrix elements of the velocity operator are needed.
First-order wavefunctions won’t be converged –&gt; not usable for other DFPT calculations.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> objects for DFPT runs.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_dde_inputs">
<code class="descname">make_dde_inputs</code><span class="sig-paren">(</span><em>tolerance=None</em>, <em>use_symmetries=True</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_dde_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_dde_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> inputs for the calculation of the electric field perturbations.
This functions should be called with an input the represents a gs run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tolerance</strong> – dict {varname: value} with the tolerance to be used in the DFPT run.
Defaults to {“tolvrs”: 1.0e-22}.</li>
<li><strong>use_symmetries</strong> – boolean that computes the irreducible components of the perturbation.
Default to True. Should be set to False for nonlinear coefficients calculation.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_dte_inputs">
<code class="descname">make_dte_inputs</code><span class="sig-paren">(</span><em>phonon_pert=False</em>, <em>skip_permutations=False</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_dte_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_dte_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> inputs for DTE calculation.
This functions should be called with an input that represents a GS run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>phonon_pert</strong> – is True also the phonon perturbations will be considered. Default False.</li>
<li><strong>skip_permutations</strong> – Since the current version of abinit always performs all the permutations
of the perturbations, even if only one is asked, if True avoids the creation of inputs that
will produce duplicated outputs.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_bec_inputs">
<code class="descname">make_bec_inputs</code><span class="sig-paren">(</span><em>tolerance=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_bec_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_bec_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> inputs for the calculation of the Born effective charges.
This functions should be called with an input that represents a GS run.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.make_strain_perts_inputs">
<code class="descname">make_strain_perts_inputs</code><span class="sig-paren">(</span><em>tolerance=None</em>, <em>phonon_pert=True</em>, <em>kptopt=2</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.make_strain_perts_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.make_strain_perts_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> inputs for strain perturbation calculation.
This functions should be called with an input that represents a GS run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tolerance</strong> – dict {varname: value} with the tolerance to be used in the DFPT run.
Defaults to {“tolvrs”: 1.0e-12}.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
<li><strong>phonon_pert</strong> – is True also the phonon perturbations will be considered. Default False.</li>
<li><strong>kptopt</strong> – 2 to take into account time-reversal symmetry.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abivalidate">
<code class="descname">abivalidate</code><span class="sig-paren">(</span><em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abivalidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abivalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run ABINIT in dry-run mode to validate the input file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">retcode: Return code. 0 if OK.
output_file: output file of the run.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.
task: Task object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>namedtuple</cite> with the following attributes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_spacegroup">
<code class="descname">abiget_spacegroup</code><span class="sig-paren">(</span><em>tolsym=None</em>, <em>retdict=False</em>, <em>workdir=None</em>, <em>manager=None</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_spacegroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_spacegroup" title="Permalink to this definition">¶</a></dt>
<dd><p>This function invokes Abinit to get the space group (as detected by Abinit, not by spglib)
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tolsym</strong> – Abinit tolsym input variable. None correspondes to the default value.</li>
<li><strong>retdict</strong> – True to return dictionary with space group information instead of Structure.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
<li><strong>verbose</strong> – Verbosity level.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object with AbinitSpaceGroup obtained from the main output file if retdict is False
else dict with e.g. {‘bravais’: ‘Bravais cF (face-center cubic)’, ‘spg_number’: 227, ‘spg_symbol’: ‘Fd-3m’}.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_ibz">
<code class="descname">abiget_ibz</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>workdir=None</em>, <em>manager=None</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_ibz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_ibz" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the list of points in the IBZ and the corresponding weights.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> – Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> – List of shifts (default None i.e. use shiftk from self)</li>
<li><strong>kptopt</strong> – Option for k-point generation. If None, the value in self is used.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
<li><strong>verbose</strong> – verbosity level.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">points: <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.15)"><code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></a> with points in the IBZ in reduced coordinates.
weights: <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.15)"><code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></a> with weights of the points.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>namedtuple</cite> with attributes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_irred_phperts">
<code class="descname">abiget_irred_phperts</code><span class="sig-paren">(</span><em>qpt=None</em>, <em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_irred_phperts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_irred_phperts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of irreducible perturbations for DFPT.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>qpt</strong> – qpoint of the phonon in reduced coordinates. Used to shift the k-mesh
if qpt is not passed, self must already contain “qpt” otherwise an exception is raised.</li>
<li><strong>ngkpt</strong> – Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> – Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>kptopt</strong> – Option for k-point generation. If None, the value in self is used.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of dictionaries with the Abinit variables defining the irreducible perturbation</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<dl class="docutils">
<dt>[{‘idir’: 1, ‘ipert’: 1, ‘qpt’: [0.25, 0.0, 0.0]},</dt>
<dd>{‘idir’: 2, ‘ipert’: 1, ‘qpt’: [0.25, 0.0, 0.0]}]</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_irred_ddeperts">
<code class="descname">abiget_irred_ddeperts</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_irred_ddeperts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_irred_ddeperts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of irreducible perturbations for DFPT.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> – Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> – Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>kptopt</strong> – Option for k-point generation. If None, the value in self is used.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of dictionaries with the Abinit variables defining the irreducible perturbation</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<dl class="docutils">
<dt>[{‘idir’: 1, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]},</dt>
<dd>{‘idir’: 2, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]}]</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_irred_dteperts">
<code class="descname">abiget_irred_dteperts</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>workdir=None</em>, <em>manager=None</em>, <em>phonon_pert=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_irred_dteperts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_irred_dteperts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of irreducible perturbations for DFPT.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> – Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> – Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>kptopt</strong> – Option for k-point generation. If None, the value in self is used.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
<li><strong>phonon_pert</strong> – if True also the phonon perturbations will be considered. Default False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of dictionaries with the Abinit variables defining the irreducible perturbation</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<dl class="docutils">
<dt>[{‘idir’: 1, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]},</dt>
<dd>{‘idir’: 2, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]}]</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_irred_strainperts">
<code class="descname">abiget_irred_strainperts</code><span class="sig-paren">(</span><em>ngkpt=None</em>, <em>shiftk=None</em>, <em>kptopt=None</em>, <em>workdir=None</em>, <em>manager=None</em>, <em>phonon_pert=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_irred_strainperts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_irred_strainperts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function, computes the list of irreducible perturbations for strain perturbations in DFPT.
It should be called with an input file that contains all the mandatory variables required by ABINIT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngkpt</strong> – Number of divisions for the k-mesh (default None i.e. use ngkpt from self)</li>
<li><strong>shiftk</strong> – Shiftks (default None i.e. use shiftk from self)</li>
<li><strong>kptopt</strong> – Option for k-point generation. If None, the value in self is used.</li>
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
<li><strong>phonon_pert</strong> – if True the phonon perturbation at gamma will be included.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of dictionaries with the Abinit variables defining the irreducible perturbation</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<dl class="docutils">
<dt>[{‘idir’: 1, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]},</dt>
<dd>{‘idir’: 2, ‘ipert’: 4, ‘qpt’: [0.0, 0.0, 0.0]}]</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.pop_par_vars">
<code class="descname">pop_par_vars</code><span class="sig-paren">(</span><em>all=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.pop_par_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.pop_par_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the variables associated to parallelism from the input file.
Useful in case of a restart when we need to remove the parallel variables before rerunning autoparal</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.abiget_autoparal_pconfs">
<code class="descname">abiget_autoparal_pconfs</code><span class="sig-paren">(</span><em>max_ncpus</em>, <em>autoparal=1</em>, <em>workdir=None</em>, <em>manager=None</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.abiget_autoparal_pconfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.abiget_autoparal_pconfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the possible configurations up to <code class="docutils literal"><span class="pre">max_ncpus</span></code>.
Return list of parallel configurations.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.add_tags">
<code class="descname">add_tags</code><span class="sig-paren">(</span><em>tags</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.add_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.add_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Add tags to the input</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tags</strong> – A single tag or list/tuple/set of tags</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AbinitInput.remove_tags">
<code class="descname">remove_tags</code><span class="sig-paren">(</span><em>tags</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AbinitInput.remove_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AbinitInput.remove_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove tags from the input</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tags</strong> – A single tag or list/tuple/set of tags</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.MultiDataset">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">MultiDataset</code><span class="sig-paren">(</span><em>structure</em>, <em>pseudos</em>, <em>pseudo_dir=''</em>, <em>ndtset=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object is essentially a list of <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> objects.
that provides an easy-to-use interface to apply global changes to the
the inputs stored in the objects.</p>
<p>Let’s assume for example that multi contains two <code class="docutils literal"><span class="pre">AbinitInput</span></code> objects and we
want to set <cite>ecut</cite> to 1 in both dictionaries. The direct approach would be:</p>
<blockquote>
<div><dl class="docutils">
<dt>for inp in multi:</dt>
<dd>inp.set_vars(ecut=1)</dd>
</dl>
</div></blockquote>
<p>or alternatively:</p>
<blockquote>
<div><dl class="docutils">
<dt>for i in range(multi.ndtset):</dt>
<dd>multi[i].set_vars(ecut=1)</dd>
</dl>
</div></blockquote>
<p>MultiDataset provides its own implementaion of __getattr__ so that one can simply use:</p>
<blockquote>
<div><blockquote>
<div>multi.set_vars(ecut=1)</div></blockquote>
<p>multi.get(“ecut”) returns a list of values. It’s equivalent to:</p>
<blockquote>
<div>[inp[“ecut”] for inp in multi]</div></blockquote>
<p>Note that if “ecut” is not present in one of the input of multi, the corresponding entry is set to None.
A default value can be specified with:</p>
<blockquote>
<div>multi.get(“paral_kgb”, 0)</div></blockquote>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MultiDataset does not support calculations done with different sets of pseudopotentials.
The inputs can have different crystalline structures (as long as the atom types are equal)
but each input in MultiDataset must have the same set of pseudopotentials.</p>
</div>
<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.abio.inputs.AbinitInputError" title="abipy.abio.inputs.AbinitInputError"><code class="xref py py-class docutils literal"><span class="pre">AbinitInputError</span></code></a></p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.MultiDataset.from_inputs">
<em class="property">classmethod </em><code class="descname">from_inputs</code><span class="sig-paren">(</span><em>inputs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.from_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.from_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Build object from a list of <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.MultiDataset.replicate_input">
<em class="property">classmethod </em><code class="descname">replicate_input</code><span class="sig-paren">(</span><em>input</em>, <em>ndtset</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.replicate_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.replicate_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a multidataset with ndtset from the <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> input.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.ndtset">
<code class="descname">ndtset</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.ndtset" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of inputs in self.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.pseudos">
<code class="descname">pseudos</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.pseudos" title="Permalink to this definition">¶</a></dt>
<dd><p>Pseudopotential objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.ispaw">
<code class="descname">ispaw</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.ispaw" title="Permalink to this definition">¶</a></dt>
<dd><p>True if PAW calculation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.isnc">
<code class="descname">isnc</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.isnc" title="Permalink to this definition">¶</a></dt>
<dd><p>True if norm-conserving calculation.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>abinit_input</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> to the list.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>abinit_inputs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends self with a list of <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> objects.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.addnew_from">
<code class="descname">addnew_from</code><span class="sig-paren">(</span><em>dtindex</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.addnew_from"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.addnew_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new entry in the multidataset by copying the input with index <code class="docutils literal"><span class="pre">dtindex</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.split_datasets">
<code class="descname">split_datasets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.split_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.split_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of <a class="reference internal" href="#abipy.abio.inputs.AbinitInput" title="abipy.abio.inputs.AbinitInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbinitInput</span></code></a> objects..</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.deepcopy">
<code class="descname">deepcopy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.deepcopy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.deepcopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy of the MultiDataset.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.MultiDataset.has_same_structures">
<code class="descname">has_same_structures</code><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.has_same_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>True if all inputs in MultiDataset are equal.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>mode='text'</em>, <em>verbose=0</em>, <em>with_pseudos=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation i.e. the input file read by Abinit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mode</strong> – Either <code class="docutils literal"><span class="pre">text</span></code> or <code class="docutils literal"><span class="pre">html</span></code> if HTML output with links is wanted.</li>
<li><strong>with_pseudos</strong> – False if JSON section with pseudo data should not be added.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.get_vars_dataframe">
<code class="descname">get_vars_dataframe</code><span class="sig-paren">(</span><em>*varnames</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.get_vars_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.get_vars_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return pandas DataFrame with the value of the variables specified in <cite>varnames</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.filter_by_tags">
<code class="descname">filter_by_tags</code><span class="sig-paren">(</span><em>tags=None</em>, <em>exclude_tags=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.filter_by_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.filter_by_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the input according to the tags</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tags</strong> – A single tag or list/tuple/set of tags</li>
<li><strong>exclude_tags</strong> – A single tag or list/tuple/set of tags that should be excluded</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> containing the inputs containing all the requested tags.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.add_tags">
<code class="descname">add_tags</code><span class="sig-paren">(</span><em>tags</em>, <em>dtindeces=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.add_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.add_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Add tags to the selected inputs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tags</strong> – A single tag or list/tuple/set of tags</li>
<li><strong>dtindeces</strong> – a list of indices to which the tags will be added. None=all the inputs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.remove_tags">
<code class="descname">remove_tags</code><span class="sig-paren">(</span><em>tags</em>, <em>dtindeces=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.remove_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.remove_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove tags from the selected inputs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tags</strong> – A single tag or list/tuple/set of tags</li>
<li><strong>dtindeces</strong> – a list of indices from which the tags will be removed. None=all the inputs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.filter_by_runlevel">
<code class="descname">filter_by_runlevel</code><span class="sig-paren">(</span><em>runlevel</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.filter_by_runlevel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.filter_by_runlevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new <a class="reference internal" href="#abipy.abio.inputs.MultiDataset" title="abipy.abio.inputs.MultiDataset"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.MultiDataset</span></code></a> object in which only the inputs with the given runlevel are selected.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.MultiDataset.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>filepath='run.abi'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#MultiDataset.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.MultiDataset.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <code class="docutils literal"><span class="pre">ndset</span></code> input files to disk. The name of the file
is constructed from the dataset index e.g. run0.abi</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="abipy.abio.inputs.AnaddbInputError">
<em class="property">exception </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AnaddbInputError</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInputError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInputError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Base error class for exceptions raised by <cite>AnaddbInput</cite></p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.AnaddbInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">AnaddbInput</code><span class="sig-paren">(</span><em>structure</em>, <em>comment=''</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em>, <em>spell_check=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.inputs.AbiAbstractInput" title="abipy.abio.inputs.AbiAbstractInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbiAbstractInput</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.Has_Structure" title="abipy.core.mixins.Has_Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.Has_Structure</span></code></a></p>
<p>This object stores the anaddb variables.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-e64c4d071db4e87d75745f41633ec5b857e89aed.png" alt="Inheritance diagram of AnaddbInput" usemap="#inheritance53ec35adff" class="inheritance"/>
<map id="inheritance53ec35adff" name="inheritance53ec35adff">
<area shape="rect" id="node1" href="#abipy.abio.inputs.AbiAbstractInput" target="_top" title="Abstract class defining the methods that must be implemented by Input objects." alt="" coords="545,25,649,36"/>
<area shape="rect" id="node4" href="#abipy.abio.inputs.AnaddbInput" target="_top" title="This object stores the anaddb variables." alt="" coords="672,14,766,25"/>
<area shape="rect" id="node2" href="#abipy.abio.inputs.AbstractInput" target="_top" title="Abstract class defining the methods that must be implemented by Input objects." alt="" coords="428,25,523,36"/>
<area shape="rect" id="node5" href="core_api.html#abipy.core.mixins.Has_Structure" target="_top" title="Mixin class for :class:`AbinitNcFile` containing crystallographic data." alt="" coords="548,2,647,14"/>
</map>
<dl class="attribute">
<dt id="abipy.abio.inputs.AnaddbInput.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.abio.inputs.AnaddbInputError" title="abipy.abio.inputs.AnaddbInputError"><code class="xref py py-class docutils literal"><span class="pre">AnaddbInputError</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AnaddbInput.vars">
<code class="descname">vars</code><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.vars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AnaddbInput.set_spell_check">
<code class="descname">set_spell_check</code><span class="sig-paren">(</span><em>false_or_true</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.set_spell_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.set_spell_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Activate/Deactivate spell-checking</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AnaddbInput.spell_check">
<code class="descname">spell_check</code><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.spell_check" title="Permalink to this definition">¶</a></dt>
<dd><p>True if spell checking is activated.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.modes_at_qpoint">
<em class="property">classmethod </em><code class="descname">modes_at_qpoint</code><span class="sig-paren">(</span><em>structure</em>, <em>qpoint</em>, <em>asr=2</em>, <em>chneut=1</em>, <em>dipdip=1</em>, <em>ifcflag=0</em>, <em>lo_to_splitting=False</em>, <em>directions=None</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em>, <em>spell_check=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.modes_at_qpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.modes_at_qpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> for the calculation of the phonon frequencies at a given q-point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object</li>
<li><strong>qpoint</strong> – Reduced coordinates of the q-point where phonon frequencies and modes are wanted</li>
<li><strong>chneut</strong><strong>, </strong><strong>dipdp</strong><strong>, </strong><strong>ifcflag</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</li>
<li><strong>lo_to_splitting</strong> – if True calculation of the LO-TO splitting will be included if qpoint==Gamma</li>
<li><strong>directions</strong> – list of 3D directions along which the LO-TO splitting will be calculated. If None the three
cartesian direction will be used</li>
<li><strong>anaddb_args</strong> – List of tuples (key, value) with Anaddb input variables (default: empty)</li>
<li><strong>anaddb_kwargs</strong> – Dictionary with Anaddb input variables (default: empty)</li>
<li><strong>spell_check</strong> – False to disable spell checking for input variables.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.piezo_elastic">
<em class="property">classmethod </em><code class="descname">piezo_elastic</code><span class="sig-paren">(</span><em>structure</em>, <em>relaxed_ion=True</em>, <em>stress_correction=False</em>, <em>asr=2</em>, <em>chneut=1</em>, <em>dipdip=1</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.piezo_elastic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.piezo_elastic" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> for the calculation of piezoelectric and elastic tensor calculations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>chneut</strong><strong>, </strong><strong>dipdp</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.phbands_and_dos">
<em class="property">classmethod </em><code class="descname">phbands_and_dos</code><span class="sig-paren">(</span><em>structure</em>, <em>ngqpt</em>, <em>nqsmall</em>, <em>qppa=None</em>, <em>ndivsm=20</em>, <em>line_density=None</em>, <em>q1shft=(0</em>, <em>0</em>, <em>0)</em>, <em>qptbounds=None</em>, <em>asr=2</em>, <em>chneut=0</em>, <em>dipdip=1</em>, <em>dos_method='tetra'</em>, <em>lo_to_splitting=False</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em>, <em>spell_check=False</em>, <em>comment=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.phbands_and_dos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.phbands_and_dos" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> for the computation of phonon bands and phonon DOS.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object</li>
<li><strong>ngqpt</strong> – Monkhorst-Pack divisions for the phonon Q-mesh (coarse one)</li>
<li><strong>nqsmall</strong> – Used to generate the (dense) mesh for the DOS.
It defines the number of q-points used to sample the smallest lattice vector.</li>
<li><strong>qppa</strong> – Defines the homogeneous q-mesh used for the DOS in units of q-points per reciproval atom.
Overrides nqsmall.</li>
<li><strong>line_density</strong> – Defines the a density of k-points per reciprocal atom to plot the phonon dispersion.
Overrides ndivsm.</li>
<li><strong>ndivsm</strong> – Used to generate a normalized path for the phonon bands.
If gives the number of divisions for the smallest segment of the path.</li>
<li><strong>q1shft</strong> – Shifts used for the coarse Q-mesh</li>
<li><strong>Boundaries of the path. If None</strong><strong>, </strong><strong>the path is generated from an internal database</strong> (<em>qptbounds</em>) – depending on the input structure.</li>
<li><strong>chneut</strong><strong>, </strong><strong>dipdp</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</li>
<li><strong>dos_method</strong> – Possible choices: “tetra”, “gaussian” or “gaussian:0.001 eV”.
In the later case, the value 0.001 eV is used as gaussian broadening</li>
<li><strong>lo_to_splitting</strong> – if True calculation of the LO-TO splitting will be included</li>
<li><strong>anaddb_args</strong> – List of tuples (key, value) with Anaddb input variables (default: empty)</li>
<li><strong>anaddb_kwargs</strong> – Dictionary with Anaddb input variables (default: empty)</li>
<li><strong>spell_check</strong> – False to disable spell checking for input variables.</li>
<li><strong>comment</strong> – Optional string with a comment that will be placed at the beginning of the file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.modes">
<em class="property">classmethod </em><code class="descname">modes</code><span class="sig-paren">(</span><em>structure</em>, <em>enunit=2</em>, <em>asr=2</em>, <em>chneut=1</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.modes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.modes" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> for the computation of phonon modes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object</li>
<li><strong>ngqpt</strong> – Monkhorst-Pack divisions for the phonon Q-mesh (coarse one)</li>
<li><strong>nqsmall</strong> – Used to generate the (dense) mesh for the DOS.
It defines the number of q-points used to sample the smallest lattice vector.</li>
<li><strong>q1shft</strong> – Shifts used for the coarse Q-mesh</li>
<li><strong>Boundaries of the path. If None</strong><strong>, </strong><strong>the path is generated from an internal database</strong> (<em>qptbounds</em>) – depending on the input structure.</li>
<li><strong>chneut</strong><strong>, </strong><strong>dipdp</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</li>
<li><strong>anaddb_args</strong> – List of tuples (key, value) with Anaddb input variables (default: empty)</li>
<li><strong>anaddb_kwargs</strong> – Dictionary with Anaddb input variables (default: empty)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.ifc">
<em class="property">classmethod </em><code class="descname">ifc</code><span class="sig-paren">(</span><em>structure</em>, <em>ngqpt</em>, <em>ifcout=None</em>, <em>q1shft=(0</em>, <em>0</em>, <em>0)</em>, <em>asr=2</em>, <em>chneut=1</em>, <em>dipdip=1</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.ifc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.ifc" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> for the computation of interatomic force constants.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object</li>
<li><strong>ngqpt</strong> – Monkhorst-Pack divisions for the phonon Q-mesh (coarse one)</li>
<li><strong>ifcout</strong> – Number of neighbouring atoms for which the ifc’s will be output. If None all the atoms in the big box.</li>
<li><strong>q1shft</strong> – Shifts used for the coarse Q-mesh</li>
<li><strong>chneut</strong><strong>, </strong><strong>dipdip</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</li>
<li><strong>anaddb_args</strong> – List of tuples (key, value) with Anaddb input variables (default: empty)</li>
<li><strong>anaddb_kwargs</strong> – Dictionary with Anaddb input variables (default: empty)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.AnaddbInput.dfpt">
<em class="property">classmethod </em><code class="descname">dfpt</code><span class="sig-paren">(</span><em>structure</em>, <em>ngqpt=None</em>, <em>relaxed_ion=False</em>, <em>piezo=False</em>, <em>dde=False</em>, <em>strain=False</em>, <em>dte=False</em>, <em>stress_correction=False</em>, <em>nqsmall=None</em>, <em>qppa=None</em>, <em>ndivsm=20</em>, <em>line_density=None</em>, <em>q1shft=(0</em>, <em>0</em>, <em>0)</em>, <em>qptbounds=None</em>, <em>asr=2</em>, <em>chneut=1</em>, <em>dipdip=1</em>, <em>dos_method='tetra'</em>, <em>anaddb_args=None</em>, <em>anaddb_kwargs=None</em>, <em>comment=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.dfpt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.dfpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds an <a class="reference internal" href="#abipy.abio.inputs.AnaddbInput" title="abipy.abio.inputs.AnaddbInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AnaddbInput</span></code></a> to post-process a generic DFPT calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> – <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</li>
<li><strong>ngqpt</strong> – Monkhorst-Pack divisions for the phonon Q-mesh (coarse one)</li>
<li><strong>stress_correction</strong> – True to activate computation of  stress correction in elastic tensor.
Requires DDB with stress entries.</li>
<li><strong>relaxed_ion</strong> – True to activate computation of relaxed-ion elastic and piezoelectric tensors.
(assume the DDB has atomic perturbations at Gamma)</li>
<li><strong>piezo</strong> – if True the piezoelectric tensor are calculated (requires piezoelectric perturbations)</li>
<li><strong>dde</strong> – if True dielectric tensors will be calculated. If phonon band
structure is calculated will also enable the calculation of the lo_to splitting
(requires the DDE perturbations)</li>
<li><strong>strain</strong> – if True the elastic tensors will be calculated (requires the strain perturbations)</li>
<li><strong>dte</strong> – if True properties related to the nonlinear tensors will be calculated
(requires third orders perturbations)</li>
<li><strong>nqsmall</strong> – Used to generate the (dense) mesh for the DOS.
It defines the number of q-points used to sample the smallest lattice vector.</li>
<li><strong>qppa</strong> – Defines the homogeneous q-mesh used for the DOS in units of q-points per reciproval atom.
Overrides nqsmall.</li>
<li><strong>line_density</strong> – Defines the a density of k-points per reciprocal atom to plot the phonon dispersion.
Overrides ndivsm.</li>
<li><strong>ndivsm</strong> – Used to generate a normalized path for the phonon bands.
If gives the number of divisions for the smallest segment of the path.</li>
<li><strong>q1shft</strong> – Shifts used for the coarse Q-mesh</li>
<li><strong>Boundaries of the path. If None</strong><strong>, </strong><strong>the path is generated from an internal database</strong> (<em>qptbounds</em>) – depending on the input structure.</li>
<li><strong>chneut</strong><strong>, </strong><strong>dipdp</strong> (<em>asr</em><em>,</em>) – Anaddb input variable. See official documentation.</li>
<li><strong>dos_method</strong> – Possible choices: “tetra”, “gaussian” or “gaussian:0.001 eV”.
In the later case, the value 0.001 eV is used as gaussian broadening</li>
<li><strong>anaddb_args</strong> – List of tuples (key, value) with Anaddb input variables (default: empty)</li>
<li><strong>anaddb_kwargs</strong> – Dictionary with Anaddb input variables (default: empty)</li>
<li><strong>comment</strong> – Optional string with a comment that will be placed at the beginning of the file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.AnaddbInput.structure">
<code class="descname">structure</code><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.structure" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> object.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AnaddbInput.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>sortmode=None</em>, <em>mode='text'</em>, <em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sortmode</strong> – “a” for alphabetical order, None if no sorting is wanted</li>
<li><strong>mode</strong> – Either <cite>text</cite> or <cite>html</cite> if HTML output with links is wanted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AnaddbInput.set_qpath">
<code class="descname">set_qpath</code><span class="sig-paren">(</span><em>ndivsm</em>, <em>qptbounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.set_qpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.set_qpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variables for the computation of the phonon band structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ndivsm</strong> – Number of divisions for the smallest segment.</li>
<li><strong>qptbounds</strong> – q-points defining the path in k-space.
If None, we use the default high-symmetry k-path defined in the pymatgen database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AnaddbInput.set_autoqmesh">
<code class="descname">set_autoqmesh</code><span class="sig-paren">(</span><em>nqsmall</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.set_autoqmesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.set_autoqmesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variable nqpt for the sampling of the BZ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nqsmall</strong> – Number of divisions used to sample the smallest lattice vector.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.AnaddbInput.abivalidate">
<code class="descname">abivalidate</code><span class="sig-paren">(</span><em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#AnaddbInput.abivalidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.AnaddbInput.abivalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run ANADDB in dry-run mode to validate the input file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">retcode: Return code. 0 if OK.
output_file: output file of the run.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.
task: Task object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>namedtuple</cite> with the following attributes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.OpticVar">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">OpticVar</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.inputs.OpticVar" title="abipy.abio.inputs.OpticVar"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.OpticVar</span></code></a></p>
<dl class="attribute">
<dt id="abipy.abio.inputs.OpticVar.url">
<code class="descname">url</code><a class="headerlink" href="#abipy.abio.inputs.OpticVar.url" title="Permalink to this definition">¶</a></dt>
<dd><p>The url associated to the variable.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticVar.html_link">
<code class="descname">html_link</code><span class="sig-paren">(</span><em>label=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticVar.html_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticVar.html_link" title="Permalink to this definition">¶</a></dt>
<dd><p>String with the URL of the web page.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="abipy.abio.inputs.OpticError">
<em class="property">exception </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">OpticError</code><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Error class raised by OpticInput.</p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.OpticInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">OpticInput</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.inputs.AbiAbstractInput" title="abipy.abio.inputs.AbiAbstractInput"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.inputs.AbiAbstractInput</span></code></a>, <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>Input file for optic executable</p>
<dl class="attribute">
<dt id="abipy.abio.inputs.OpticInput.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.abio.inputs.OpticInput.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.abio.inputs.OpticError" title="abipy.abio.inputs.OpticError"><code class="xref py py-class docutils literal"><span class="pre">OpticError</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.inputs.OpticInput.vars">
<code class="descname">vars</code><a class="headerlink" href="#abipy.abio.inputs.OpticInput.vars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticInput.get_default">
<code class="descname">get_default</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.get_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.get_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the default value of variable <cite>key</cite>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.OpticInput.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticInput.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticInput.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticInput.only_independent_chi_components">
<code class="descname">only_independent_chi_components</code><span class="sig-paren">(</span><em>structure</em>, <em>assume_symmetric_tensor=False</em>, <em>symprec=0.001</em>, <em>angle_tolerance=5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.only_independent_chi_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.only_independent_chi_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the crystal system returned by spglib to find the independent components
of the linear susceptibility tensor and set the appropriate variables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>structure</strong> – Crystalline structure</li>
<li><strong>assume_symmetric_tensor</strong> – True if tensor can be assumed symmetric.
Note that the tensor is symmetric only for a lossless and non-optically active material.</li>
<li><strong>angle_tolerance</strong> (<a class="reference internal" href="core_api.html#abipy.core.skw.ElectronInterpolator.symprec" title="abipy.core.skw.ElectronInterpolator.symprec"><em>symprec</em></a><em>,</em>) – Parameters passed to spglib.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Set internal variables and return list of components to compute.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.OpticInput.abivalidate">
<code class="descname">abivalidate</code><span class="sig-paren">(</span><em>workdir=None</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#OpticInput.abivalidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.OpticInput.abivalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run OPTIC in dry-run mode to validate the input file.
Note: This method is a stub, it always return retcode 0</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workdir</strong> – Working directory of the fake task used to compute the ibz. Use None for temporary dir.</li>
<li><strong>manager</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.tasks.html#pymatgen.io.abinit.tasks.TaskManager" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.TaskManager</span></code></a> of the task. If None, the manager is initialized from the config file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">retcode: Return code. 0 if OK.
output_file: output file of the run.
log_file:  log file of the Abinit run, use log_file.read() to access its content.
stderr_file: stderr file of the Abinit run. use stderr_file.read() to access its content.
task: Task object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>namedtuple</cite> with the following attributes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.inputs.Cut3DInput">
<em class="property">class </em><code class="descclassname">abipy.abio.inputs.</code><code class="descname">Cut3DInput</code><span class="sig-paren">(</span><em>infile_path=None</em>, <em>output_filepath=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pythonhosted.org/monty/monty.html#monty.json.MSONable" title="(in monty v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">monty.json.MSONable</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object stores the options to run a single cut3d analysis.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Converters with nspden &gt; 1 won’t work since cut3d asks for the ispden index.</p>
</div>
<dl class="method">
<dt id="abipy.abio.inputs.Cut3DInput.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with the input.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.Cut3DInput.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the input to a file.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_3d_formatted">
<em class="property">classmethod </em><code class="descname">den_to_3d_formatted</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_3d_formatted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_3d_formatted" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to a 3D formatted format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit.
Can be None to be defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_3d_indexed">
<em class="property">classmethod </em><code class="descname">den_to_3d_indexed</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_3d_indexed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_3d_indexed" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to a 3D indexed format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_molekel">
<em class="property">classmethod </em><code class="descname">den_to_molekel</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_molekel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_molekel" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to a Molekel format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_tecplot">
<em class="property">classmethod </em><code class="descname">den_to_tecplot</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_tecplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_tecplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to a Tecplot format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_xsf">
<em class="property">classmethod </em><code class="descname">den_to_xsf</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em>, <em>shift=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_xsf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_xsf" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to an xsf format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
<li><strong>shift</strong> – a list of three integers defining the shift along the x, y, z axis.
None if no shift is required.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.den_to_cube">
<em class="property">classmethod </em><code class="descname">den_to_cube</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>output_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.den_to_cube"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.den_to_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the conversion to a cube format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>output_filepath</strong> – path to the file that should be produced by cut3D, if required. At this stage it would be
safer to use just the file name, as using an absolute or relative path may fail depending on
the compiler.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.hirshfeld">
<em class="property">classmethod </em><code class="descname">hirshfeld</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>all_el_dens_paths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.hirshfeld"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.hirshfeld" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the calculation of the Hirshfeld charges from the density.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>all_el_dens_paths</strong> – a list of paths to the all-electron density files corresponding to the elements defined
in the abinit input. See <a class="reference external" href="https://www.abinit.org/downloads/all_core_electron">https://www.abinit.org/downloads/all_core_electron</a> for files.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.hirshfeld_from_fhi_path">
<em class="property">classmethod </em><code class="descname">hirshfeld_from_fhi_path</code><span class="sig-paren">(</span><em>density_filepath</em>, <em>structure</em>, <em>fhi_all_el_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.hirshfeld_from_fhi_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.hirshfeld_from_fhi_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cut3d input for the calculation of the Hirshfeld charges from the density. Automatically
selects the all-electron density files from a folder containing the fhi all-electron density files:
<a class="reference external" href="https://www.abinit.org/downloads/all_core_electron">https://www.abinit.org/downloads/all_core_electron</a></p>
<p>This will work only if the input has been generated with AbinitInput and the Structure object is the same
provided to AbinitInput.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>density_filepath</strong> – absolute or relative path to the input density produced by abinit. Can be None to be
defined at a later time.</li>
<li><strong>structure</strong> – the structure used for the ground state calculation. Used to determine the elements</li>
<li><strong>fhi_all_el_path</strong> – path to the folder containing the fhi all-electron density files</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.inputs.Cut3DInput.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.inputs.Cut3DInput.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#Cut3DInput.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.Cut3DInput.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON interface used in pymatgen for easier serialization.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.abio.inputs.product_dict">
<code class="descclassname">abipy.abio.inputs.</code><code class="descname">product_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/inputs.html#product_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.inputs.product_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>This function receives a dictionary d where each key defines a list of items or a simple scalar.
It constructs the Cartesian product of the values (equivalent to nested for-loops),
and returns a list of dictionaries with the values that would be used inside the loop.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">product_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">product_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">==</span> <span class="p">[{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
<span class="gp">... </span><span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
<span class="gp">... </span><span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
<span class="gp">... </span><span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-abipy.abio.outputs">
<span id="outputs-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">outputs</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.outputs" title="Permalink to this headline">¶</a></h2>
<p>Objects used to extract and plot results from output files in text format.</p>
<dl class="class">
<dt id="abipy.abio.outputs.AbinitTextFile">
<em class="property">class </em><code class="descclassname">abipy.abio.outputs.</code><code class="descname">AbinitTextFile</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitTextFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitTextFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.TextFile</span></code></p>
<p>Class for the ABINIT main output file and the log file.</p>
<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitTextFile.events">
<code class="descname">events</code><a class="headerlink" href="#abipy.abio.outputs.AbinitTextFile.events" title="Permalink to this definition">¶</a></dt>
<dd><p>List of ABINIT events reported in the file.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitTextFile.get_timer">
<code class="descname">get_timer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitTextFile.get_timer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitTextFile.get_timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Timer data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.outputs.AbinitLogFile">
<em class="property">class </em><code class="descclassname">abipy.abio.outputs.</code><code class="descname">AbinitLogFile</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitLogFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.outputs.AbinitTextFile" title="abipy.abio.outputs.AbinitTextFile"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.outputs.AbinitTextFile</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.NotebookWriter" title="abipy.core.mixins.NotebookWriter"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.NotebookWriter</span></code></a></p>
<p>Class representing the Abinit log file.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-e4cab3429bca8b747e22e6f728adc83f074fec76.png" alt="Inheritance diagram of AbinitLogFile" usemap="#inheritance3cb3580177" class="inheritance"/>
<map id="inheritance3cb3580177" name="inheritance3cb3580177">
<area shape="rect" id="node1" href="#abipy.abio.outputs.AbinitLogFile" target="_top" title="Class representing the Abinit log file." alt="" coords="592,24,764,44"/>
<area shape="rect" id="node2" href="#abipy.abio.outputs.AbinitTextFile" target="_top" title="Class for the ABINIT main output file and the log file." alt="" coords="375,4,549,24"/>
<area shape="rect" id="node3" href="core_api.html#abipy.core.mixins.NotebookWriter" target="_top" title="Mixin class for objects that are able to generate jupyter_ notebooks." alt="" coords="372,44,552,63"/>
<area shape="rect" id="node5" title="Abstract base class defining the methods that must be implemented" alt="" coords="4,4,151,24"/>
</map>
<dl class="method">
<dt id="abipy.abio.outputs.AbinitLogFile.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitLogFile.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitLogFile.to_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitLogFile.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitLogFile.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitLogFile.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Empty placeholder.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitLogFile.yield_figs">
<code class="descname">yield_figs</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitLogFile.yield_figs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitLogFile.yield_figs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function <em>generates</em> a predefined list of matplotlib figures with minimal input from the user.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitLogFile.write_notebook">
<code class="descname">write_notebook</code><span class="sig-paren">(</span><em>nbpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitLogFile.write_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitLogFile.write_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook to <code class="docutils literal"><span class="pre">nbpath</span></code>. If nbpath is None, a temporay file in the current
working directory is created. Return path to the notebook.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.outputs.AbinitOutputFile">
<em class="property">class </em><code class="descclassname">abipy.abio.outputs.</code><code class="descname">AbinitOutputFile</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.outputs.AbinitTextFile" title="abipy.abio.outputs.AbinitTextFile"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.outputs.AbinitTextFile</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.NotebookWriter" title="abipy.core.mixins.NotebookWriter"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.NotebookWriter</span></code></a></p>
<p>Class representing the main Abinit output file.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-c860c60f671d8bb449a87352d8a1a66b7539972f.png" alt="Inheritance diagram of AbinitOutputFile" usemap="#inheritance37da1e7bb5" class="inheritance"/>
<map id="inheritance37da1e7bb5" name="inheritance37da1e7bb5">
<area shape="rect" id="node1" href="#abipy.abio.outputs.AbinitOutputFile" target="_top" title="Class representing the main Abinit output file." alt="" coords="581,24,764,43"/>
<area shape="rect" id="node2" href="#abipy.abio.outputs.AbinitTextFile" target="_top" title="Class for the ABINIT main output file and the log file." alt="" coords="368,4,539,24"/>
<area shape="rect" id="node3" href="core_api.html#abipy.core.mixins.NotebookWriter" target="_top" title="Mixin class for objects that are able to generate jupyter_ notebooks." alt="" coords="365,43,542,62"/>
<area shape="rect" id="node5" title="Abstract base class defining the methods that must be implemented" alt="" coords="4,4,148,24"/>
</map>
<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.initial_structures">
<code class="descname">initial_structures</code><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.initial_structures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.initial_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>List of initial <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.has_same_initial_structures">
<code class="descname">has_same_initial_structures</code><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.has_same_initial_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>True if all initial structures are equal.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.final_structures">
<code class="descname">final_structures</code><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.final_structures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.final_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>List of final <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.initial_structure">
<code class="descname">initial_structure</code><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.initial_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.initial_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> defined in the output file.</p>
<p>If the input file contains multiple datasets <strong>AND</strong> the datasets
have different structures, this property returns None.
In this case, one has to access the structure of the individual datasets.
For example:</p>
<blockquote>
<div>self.initial_structures[0]</div></blockquote>
<p>gives the structure of the first dataset.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.has_same_final_structures">
<code class="descname">has_same_final_structures</code><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.has_same_final_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>True if all initial structures are equal.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.outputs.AbinitOutputFile.final_structure">
<code class="descname">final_structure</code><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.final_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.final_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="core_api.html#abipy.core.structure.Structure" title="abipy.core.structure.Structure"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.structure.Structure</span></code></a> defined in the output file.</p>
<p>If the input file contains multiple datasets <strong>AND</strong> the datasets
have different structures, this property returns None.
In this case, one has to access the structure of the individual datasets.
For example:</p>
<blockquote>
<div>self.final_structures[0]</div></blockquote>
<p>gives the structure of the first dataset.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.diff_datasets">
<code class="descname">diff_datasets</code><span class="sig-paren">(</span><em>dt_list1</em>, <em>dt_list2</em>, <em>with_params=True</em>, <em>differ='html'</em>, <em>dryrun=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.diff_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.diff_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare datasets</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.get_dims_spginfo_dataset">
<code class="descname">get_dims_spginfo_dataset</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.get_dims_spginfo_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.get_dims_spginfo_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the section with the dimensions of the calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> – Verbosity level.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Return: (dims_dataset, spginfo_dataset)</dt>
<dd>where dims_dataset[i] is an OrderedDict with the dimensions of dataset <cite>i</cite>
spginfo_dataset[i] is a dictionary with space group information.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.next_gs_scf_cycle">
<code class="descname">next_gs_scf_cycle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.next_gs_scf_cycle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.next_gs_scf_cycle" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next <code class="xref py py-class docutils literal"><span class="pre">GroundStateScfCycle</span></code> in the file. None if not found.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.next_d2de_scf_cycle">
<code class="descname">next_d2de_scf_cycle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.next_d2de_scf_cycle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.next_d2de_scf_cycle" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="xref py py-class docutils literal"><span class="pre">GroundStateScfCycle</span></code> with information on the GS iterations. None if not found.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>tight_layout=True</em>, <em>with_timer=False</em>, <em>show=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot GS/DFPT SCF cycles and timer data found in the output file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>with_timer</strong> – True if timer section should be plotted</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.yield_figs">
<code class="descname">yield_figs</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.yield_figs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.yield_figs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function <em>generates</em> a predefined list of matplotlib figures with minimal input from the user.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.compare_gs_scf_cycles">
<code class="descname">compare_gs_scf_cycles</code><span class="sig-paren">(</span><em>others</em>, <em>show=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.compare_gs_scf_cycles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.compare_gs_scf_cycles" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce and returns a list of <a class="reference external" href="http://matplotlib.org">matplotlib</a> figure comparing the GS self-consistent
cycle in self with the ones in others.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>others</strong> – list of <a class="reference internal" href="#abipy.abio.outputs.AbinitOutputFile" title="abipy.abio.outputs.AbinitOutputFile"><code class="xref py py-class docutils literal"><span class="pre">AbinitOutputFile</span></code></a> objects or strings with paths to output files.</li>
<li><strong>show</strong> – True to diplay plots.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.compare_d2de_scf_cycles">
<code class="descname">compare_d2de_scf_cycles</code><span class="sig-paren">(</span><em>others</em>, <em>show=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.compare_d2de_scf_cycles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.compare_d2de_scf_cycles" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce and returns a <a class="reference external" href="http://matplotlib.org">matplotlib</a> figure comparing the DFPT self-consistent
cycle in self with the ones in others.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>others</strong> – list of <a class="reference internal" href="#abipy.abio.outputs.AbinitOutputFile" title="abipy.abio.outputs.AbinitOutputFile"><code class="xref py py-class docutils literal"><span class="pre">AbinitOutputFile</span></code></a> objects or strings with paths to output files.</li>
<li><strong>show</strong> – True to diplay plots.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AbinitOutputFile.write_notebook">
<code class="descname">write_notebook</code><span class="sig-paren">(</span><em>nbpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AbinitOutputFile.write_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AbinitOutputFile.write_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook to nbpath. If <code class="docutils literal"><span class="pre">nbpath</span></code> is None, a temporay file in the current
working directory is created. Return path to the notebook.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.abio.outputs.validate_output_parser">
<code class="descclassname">abipy.abio.outputs.</code><code class="descname">validate_output_parser</code><span class="sig-paren">(</span><em>abitests_dir=None</em>, <em>output_files=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#validate_output_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.validate_output_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate/test Abinit output parser.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dirpath</strong> – Abinit tests directory.</li>
<li><strong>output_files</strong> – List of Abinit output files.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return: Exit code.</p>
</dd></dl>

<dl class="class">
<dt id="abipy.abio.outputs.AboRobot">
<em class="property">class </em><code class="descclassname">abipy.abio.outputs.</code><code class="descname">AboRobot</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.abio.robots.Robot" title="abipy.abio.robots.Robot"><code class="xref py py-class docutils literal"><span class="pre">abipy.abio.robots.Robot</span></code></a></p>
<p>This robot analyzes the results contained in multiple Abinit output files.
Can compare dimensions, SCF cycles, analyze timers.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-069d1f6f8dffdf5bd0327d5d2536e1defaa706e2.png" alt="Inheritance diagram of AboRobot" usemap="#inheritance2f43c8a51a" class="inheritance"/>
<map id="inheritance2f43c8a51a" name="inheritance2f43c8a51a">
<area shape="rect" id="node1" href="#abipy.abio.outputs.AboRobot" target="_top" title="This robot analyzes the results contained in multiple Abinit output files." alt="" coords="482,5,674,29"/>
<area shape="rect" id="node2" href="#abipy.abio.robots.Robot" target="_top" title="This is the base class from which all Robot subclasses should derive." alt="" coords="273,5,434,29"/>
<area shape="rect" id="node3" href="core_api.html#abipy.core.mixins.NotebookWriter" target="_top" title="Mixin class for objects that are able to generate jupyter_ notebooks." alt="" coords="5,5,225,29"/>
</map>
<dl class="attribute">
<dt id="abipy.abio.outputs.AboRobot.EXT">
<code class="descname">EXT</code><em class="property"> = 'abo'</em><a class="headerlink" href="#abipy.abio.outputs.AboRobot.EXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AboRobot.get_dims_dataframe">
<code class="descname">get_dims_dataframe</code><span class="sig-paren">(</span><em>with_time=True</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot.get_dims_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot.get_dims_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and return <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with the dimensions of the calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_time</strong> – True if walltime and cputime should be added</li>
<li><strong>index</strong> – Index of the dataframe. Use relative paths of files if None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AboRobot.get_dataframe">
<code class="descname">get_dataframe</code><span class="sig-paren">(</span><em>with_geo=True</em>, <em>with_dims=True</em>, <em>abspath=False</em>, <em>funcs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot.get_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot.get_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with the most important results and the filenames as index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_geo</strong> – True if structure info should be added to the dataframe</li>
<li><strong>with_dims</strong> – True if dimensions should be added</li>
<li><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to getcwd().</li>
<li><strong>funcs</strong> – Function or list of functions to execute to add more data to the DataFrame.
Each function receives a <a class="reference internal" href="electrons_api.html#abipy.electrons.gsr.GsrFile" title="abipy.electrons.gsr.GsrFile"><code class="xref py py-class docutils literal"><span class="pre">abipy.electrons.gsr.GsrFile</span></code></a> object and returns a tuple (key, value)
where key is a string with the name of column and value is the value to be inserted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AboRobot.get_time_dataframe">
<code class="descname">get_time_dataframe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot.get_time_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot.get_time_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with the wall-time, cpu time in seconds and the filenames as index.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AboRobot.yield_figs">
<code class="descname">yield_figs</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot.yield_figs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot.yield_figs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function <em>generates</em> a predefined list of matplotlib figures with minimal input from the user.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.AboRobot.write_notebook">
<code class="descname">write_notebook</code><span class="sig-paren">(</span><em>nbpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#AboRobot.write_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.AboRobot.write_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook to nbpath. If nbpath is None, a temporay file in the current
working directory is created. Return path to the notebook.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.outputs.OutNcFile">
<em class="property">class </em><code class="descclassname">abipy.abio.outputs.</code><code class="descname">OutNcFile</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#OutNcFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.OutNcFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core_api.html#abipy.core.mixins.AbinitNcFile" title="abipy.core.mixins.AbinitNcFile"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.AbinitNcFile</span></code></a></p>
<p>Class representing the _OUT.nc file containing the dataset results
produced at the end of the run. The netcdf variables can be accessed
via instance attribute e.g. <code class="docutils literal"><span class="pre">outfile.ecut</span></code>. Provides integration with <a class="reference external" href="https://ipython.org/index.html">ipython</a>.</p>
<dl class="attribute">
<dt id="abipy.abio.outputs.OutNcFile.params">
<code class="descname">params</code><a class="reference internal" href="../_modules/abipy/abio/outputs.html#OutNcFile.params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.OutNcFile.params" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal"><span class="pre">OrderedDict</span></code> with parameters that might be subject to convergence studies.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.OutNcFile.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#OutNcFile.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.OutNcFile.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the file.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.outputs.OutNcFile.get_allvars">
<code class="descname">get_allvars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/outputs.html#OutNcFile.get_allvars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.outputs.OutNcFile.get_allvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/docs/faq.html#whatisit">netcdf</a> variables present in the file.
Return dictionary varname –&gt; value</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.abio.robots">
<span id="robots-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">robots</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.robots" title="Permalink to this headline">¶</a></h2>
<p>This module defines the Robot BaseClass. Robots operates on multiple files and provide helper
functions to plot the data e.g. convergence studies and to build pandas dataframes from the output files.</p>
<dl class="class">
<dt id="abipy.abio.robots.Robot">
<em class="property">class </em><code class="descclassname">abipy.abio.robots.</code><code class="descname">Robot</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core_api.html#abipy.core.mixins.NotebookWriter" title="abipy.core.mixins.NotebookWriter"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.NotebookWriter</span></code></a></p>
<p>This is the base class from which all Robot subclasses should derive.
A Robot supports the <cite>with</cite> context manager:</p>
<p>Usage example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Robot</span><span class="p">([(</span><span class="s2">&quot;label1&quot;</span><span class="p">,</span> <span class="s2">&quot;file1&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">label2</span><span class="p">,</span> <span class="s2">&quot;file2&quot;</span><span class="p">)])</span> <span class="k">as</span> <span class="n">robot</span><span class="p">:</span>
    <span class="c1"># Do something with robot. files are automatically closed when we exit.</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">abifile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="abipy.abio.robots.Robot.start">
<code class="descname">start</code><em class="property"> = None</em><a class="headerlink" href="#abipy.abio.robots.Robot.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.get_supported_extensions">
<em class="property">classmethod </em><code class="descname">get_supported_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_supported_extensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_supported_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>List of strings with extensions supported by Robot subclasses.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.class_for_ext">
<em class="property">classmethod </em><code class="descname">class_for_ext</code><span class="sig-paren">(</span><em>ext</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.class_for_ext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.class_for_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Robot subclass associated to the given extension.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.from_dir">
<em class="property">classmethod </em><code class="descname">from_dir</code><span class="sig-paren">(</span><em>top</em>, <em>walk=True</em>, <em>abspath=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.from_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.from_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>This class method builds a robot by scanning all files located within directory <cite>top</cite>.
This method should be invoked with a concrete robot class, for example:</p>
<blockquote>
<div>robot = GsrRobot.from_dir(“.”)</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>top</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Root directory</li>
<li><strong>walk</strong> – if True, directories inside <cite>top</cite> are included as well.</li>
<li><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to <cite>top</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.from_dirs">
<em class="property">classmethod </em><code class="descname">from_dirs</code><span class="sig-paren">(</span><em>dirpaths</em>, <em>walk=True</em>, <em>abspath=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.from_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.from_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <cite>from_dir</cite> but accepts a list of directories instead of a single directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>walk</strong> – if True, directories inside <cite>top</cite> are included as well.</li>
<li><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to <cite>top</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.from_dir_glob">
<em class="property">classmethod </em><code class="descname">from_dir_glob</code><span class="sig-paren">(</span><em>pattern</em>, <em>walk=True</em>, <em>abspath=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.from_dir_glob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.from_dir_glob" title="Permalink to this definition">¶</a></dt>
<dd><p>This class method builds a robot by scanning all files located within the directories
matching <cite>pattern</cite> as implemented by glob.glob
This method should be invoked with a concrete robot class, for example:</p>
<blockquote>
<div>robot = GsrRobot.from_dir_glob(“flow_dir/w*/outdata/”)</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pattern</strong> – Pattern string</li>
<li><strong>walk</strong> – if True, directories inside <cite>top</cite> are included as well.</li>
<li><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to getcwd().</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.class_handles_filename">
<em class="property">classmethod </em><code class="descname">class_handles_filename</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.class_handles_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.class_handles_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>True if robot class handles filename.</p>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.from_files">
<em class="property">classmethod </em><code class="descname">from_files</code><span class="sig-paren">(</span><em>filenames</em>, <em>labels=None</em>, <em>abspath=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a Robot from a list of <cite>filenames</cite>.
if labels is None, labels are automatically generated from absolute paths.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to <cite>top</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="abipy.abio.robots.Robot.from_flow">
<em class="property">classmethod </em><code class="descname">from_flow</code><span class="sig-paren">(</span><em>flow</em>, <em>outdirs='all'</em>, <em>nids=None</em>, <em>ext=None</em>, <em>task_class=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.from_flow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.from_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a robot from a <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.flows.html#pymatgen.io.abinit.flows.Flow" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.flows.Flow</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>flow</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.flows.html#pymatgen.io.abinit.flows.Flow" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.flows.Flow</span></code></a> object</li>
<li><strong>outdirs</strong> – String used to select/ignore the files in the output directory of flow, works and tasks
outdirs=”work” selects only the outdir of the Works,
outdirs=”flow+task” selects the outdir of the Flow and the outdirs of the tasks
outdirs=”-work” excludes the outdir of the Works.
Cannot use <code class="docutils literal"><span class="pre">+</span></code> and <code class="docutils literal"><span class="pre">-</span></code> flags in the same string.
Default: <cite>all</cite> that is equivalent to “flow+work+task”</li>
<li><strong>nids</strong> – List of node identifiers used to select particular nodes. Not used if None</li>
<li><strong>ext</strong> – File extension associated to the robot. Mainly used if method is invoked with the BaseClass</li>
<li><strong>task_class</strong> – Task class or string with the class name used to select the tasks in the flow.
None implies no filtering.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">abilab</span><span class="o">.</span><span class="n">GsrRobot</span><span class="o">.</span><span class="n">from_flow</span><span class="p">(</span><span class="n">flow</span><span class="p">)</span> <span class="k">as</span> <span class="n">robot</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>

<span class="c1"># That is equivalent to:</span>
<span class="k">with</span> <span class="n">Robot</span><span class="o">.</span><span class="n">from_flow</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s2">&quot;GSR&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">robot</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">Robot</span></code> subclass.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.add_extfile_of_node">
<code class="descname">add_extfile_of_node</code><span class="sig-paren">(</span><em>node</em>, <em>nids=None</em>, <em>task_class=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.add_extfile_of_node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.add_extfile_of_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the file produced by this node to the robot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> – <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.flows.html#pymatgen.io.abinit.flows.Flow" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.flows.Flow</span></code></a> or <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.works.html#pymatgen.io.abinit.works.Work" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.works.Work</span></code></a> or <code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.tasks.Task</span></code> object.</li>
<li><strong>nids</strong> – List of node identifiers used to select particular nodes. Not used if None</li>
<li><strong>task_class</strong> – Task class or string with class name used to select the tasks in the flow.
None implies no filtering.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.scan_dir">
<code class="descname">scan_dir</code><span class="sig-paren">(</span><em>top</em>, <em>walk=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.scan_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.scan_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan directory tree starting from <code class="docutils literal"><span class="pre">top</span></code>. Add files to the robot instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>top</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Root directory</li>
<li><strong>walk</strong> – if True, directories inside <code class="docutils literal"><span class="pre">top</span></code> are included as well.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Number of files found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.add_file">
<code class="descname">add_file</code><span class="sig-paren">(</span><em>label</em>, <em>abifile</em>, <em>filter_abifile=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.add_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.add_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a file to the robot with the given label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>label</strong> – String used to identify the file (must be unique, ax exceptions is
raised if label is already present.</li>
<li><strong>abifile</strong> – Specify the file to be added. Accepts strings (filepath) or abipy file-like objects.</li>
<li><strong>filter_abifile</strong> – Function that receives an <code class="docutils literal"><span class="pre">abifile</span></code> object and returns
True if the file should be added to the plotter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.iter_lineopt">
<code class="descname">iter_lineopt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.iter_lineopt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.iter_lineopt" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates matplotlib linestyles.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="abipy.abio.robots.Robot.ordered_intersection">
<em class="property">static </em><code class="descname">ordered_intersection</code><span class="sig-paren">(</span><em>list_1</em>, <em>list_2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.ordered_intersection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.ordered_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return ordered intersection of two lists. Items must be hashable.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.pop_label">
<code class="descname">pop_label</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.pop_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.pop_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove file with the given <code class="docutils literal"><span class="pre">label</span></code> and close it.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.change_labels">
<code class="descname">change_labels</code><span class="sig-paren">(</span><em>new_labels</em>, <em>dryrun=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.change_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.change_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Change labels of the files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>new_labels</strong> – List of strings (same length as self.abifiles)</li>
<li><strong>dryrun</strong> – True to activate dryrun mode.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">mapping new_label –&gt; old_label.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.remap_labels">
<code class="descname">remap_labels</code><span class="sig-paren">(</span><em>function</em>, <em>dryrun=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.remap_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.remap_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Change labels of the files by executing <code class="docutils literal"><span class="pre">function</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> – Callable object e.g. lambda function. The output of function(abifile) is used as
new label. Note that the function shall not return duplicated labels when applied to self.abifiles.</li>
<li><strong>dryrun</strong> – True to activate dryrun mode.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">mapping new_label –&gt; old_label.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.trim_paths">
<code class="descname">trim_paths</code><span class="sig-paren">(</span><em>start=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.trim_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.trim_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace absolute filepaths in the robot with relative paths wrt to <code class="docutils literal"><span class="pre">start</span></code> directory.
If start is None, os.getcwd() is used. Set <code class="docutils literal"><span class="pre">self.start</span></code> attribute, return <code class="docutils literal"><span class="pre">self.start</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.robots.Robot.exceptions">
<code class="descname">exceptions</code><a class="headerlink" href="#abipy.abio.robots.Robot.exceptions" title="Permalink to this definition">¶</a></dt>
<dd><p>List of exceptions.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="abipy.abio.robots.Robot.labels">
<code class="descname">labels</code><a class="headerlink" href="#abipy.abio.robots.Robot.labels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_label_files_str">
<code class="descname">get_label_files_str</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_label_files_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_label_files_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string with [label, filepath].</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.show_files">
<code class="descname">show_files</code><span class="sig-paren">(</span><em>stream=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.show_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.show_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Show label –&gt; file path</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.robots.Robot.abifiles">
<code class="descname">abifiles</code><a class="headerlink" href="#abipy.abio.robots.Robot.abifiles" title="Permalink to this definition">¶</a></dt>
<dd><p>List of netcdf files.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.has_different_structures">
<code class="descname">has_different_structures</code><span class="sig-paren">(</span><em>rtol=1e-05</em>, <em>atol=1e-08</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.has_different_structures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.has_different_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if structures are equivalent,
return string with info about differences (if any).</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.is_sortable">
<code class="descname">is_sortable</code><span class="sig-paren">(</span><em>aname</em>, <em>raise_exc=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.is_sortable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.is_sortable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <code class="docutils literal"><span class="pre">aname</span></code> is an attribute of the netcdf file
If raise_exc is True, AttributeError with an explicit message is raised.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.sortby">
<code class="descname">sortby</code><span class="sig-paren">(</span><em>func_or_string</em>, <em>reverse=False</em>, <em>unpack=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.sortby"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.sortby" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort files in the robot by <code class="docutils literal"><span class="pre">func_or_string</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func_or_string</strong> – Either None, string, callable defining the quantity to be used for sorting.
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
If callable, the output of func_or_string(abifile) is used.
If None, no sorting is performed.</li>
<li><strong>reverse</strong> – If set to True, then the list elements are sorted as if each comparison were reversed.</li>
<li><strong>unpack</strong> – Return (labels, abifiles, params) if True</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Return: list of (label, abifile, param) tuples where param is obtained via <code class="docutils literal"><span class="pre">func_or_string</span></code>.</dt>
<dd>or labels, abifiles, params if <code class="docutils literal"><span class="pre">unpack</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.group_and_sortby">
<code class="descname">group_and_sortby</code><span class="sig-paren">(</span><em>hue</em>, <em>func_or_string</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.group_and_sortby"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.group_and_sortby" title="Permalink to this definition">¶</a></dt>
<dd><p>Group files by <code class="docutils literal"><span class="pre">hue</span></code> and, inside each group` sort items by <code class="docutils literal"><span class="pre">func_or_string</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hue</strong> – Variable that define subsets of the data, which will be drawn on separate lines.
Accepts callable or string
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
Dot notation is also supported e.g. hue=”structure.formula” –&gt; abifile.structure.formula
If callable, the output of hue(abifile) is used.</li>
<li><strong>func_or_string</strong> – Either None, string, callable defining the quantity to be used for sorting.
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
If callable, the output of func_or_string(abifile) is used.
If None, no sorting is performed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return: List of <a class="reference internal" href="#abipy.abio.robots.HueGroup" title="abipy.abio.robots.HueGroup"><code class="xref py py-class docutils literal"><span class="pre">HueGroup</span></code></a> instance.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all files that have been opened by the Robot.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="abipy.abio.robots.Robot.sortby_label">
<em class="property">static </em><code class="descname">sortby_label</code><span class="sig-paren">(</span><em>sortby</em>, <em>param</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.sortby_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.sortby_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the label to be used when files are sorted with <code class="docutils literal"><span class="pre">sortby</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_structure_dataframes">
<code class="descname">get_structure_dataframes</code><span class="sig-paren">(</span><em>abspath=False</em>, <em>filter_abifile=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_structure_dataframes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_structure_dataframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap dataframes_from_structures function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to getcwd().</li>
<li><strong>filter_abifile</strong> – Function that receives an <code class="docutils literal"><span class="pre">abifile</span></code> object and returns
True if the file should be added to the plotter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_lattice_dataframe">
<code class="descname">get_lattice_dataframe</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_lattice_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_lattice_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with lattice parameters.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_coords_dataframe">
<code class="descname">get_coords_dataframe</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_coords_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_coords_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with atomic positions.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_params_dataframe">
<code class="descname">get_params_dataframe</code><span class="sig-paren">(</span><em>abspath=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_params_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_params_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> with the most important parameters.
that are usually subject to convergence studies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>abspath</strong> – True if paths in index should be absolute. Default: Relative to <cite>top</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="abipy.abio.robots.Robot.plot_xy_with_hue">
<em class="property">static </em><code class="descname">plot_xy_with_hue</code><span class="sig-paren">(</span><em>data</em>, <em>x</em>, <em>y</em>, <em>hue</em>, <em>decimals=None</em>, <em>ax=None</em>, <em>xlims=None</em>, <em>ylims=None</em>, <em>fontsize=12</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#abipy.abio.robots.Robot.plot_xy_with_hue" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot y = f(x) relation for different values of <cite>hue</cite>.
Useful for convergence tests done wrt to two parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> – <a class="reference external" href="http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.0.dev0+495.g68273a7.dirty)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> containing columns <cite>x</cite>, <cite>y</cite>, and <cite>hue</cite>.</li>
<li><strong>x</strong> – Name of the column used as x-value</li>
<li><strong>y</strong> – Name of the column(s) used as y-value</li>
<li><strong>hue</strong> – Variable that define subsets of the data, which will be drawn on separate lines</li>
<li><strong>decimals</strong> – Number of decimal places to round <cite>hue</cite> columns. Ignore if None</li>
<li><strong>ax</strong> – <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.axes.Axes</span></code></a> or None if a new figure should be created.</li>
<li><strong>ylims</strong> (<em>xlims</em>) – Set the data limits for the x(y)-axis. Accept tuple e.g. <cite>(left, right)</cite>
or scalar e.g. <cite>left</cite>. If left (right) is None, default values are used</li>
<li><strong>fontsize</strong> – Legend fontsize.</li>
<li><strong>kwargs</strong> – Keywork arguments are passed to ax.plot method.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<blockquote>
<div><p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.plot_convergence">
<code class="descname">plot_convergence</code><span class="sig-paren">(</span><em>item</em>, <em>sortby=None</em>, <em>hue=None</em>, <em>ax=None</em>, <em>fontsize=12</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.plot_convergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.plot_convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the convergence of <code class="docutils literal"><span class="pre">item</span></code> wrt the <code class="docutils literal"><span class="pre">sortby</span></code> parameter.
Values can optionally be grouped by <code class="docutils literal"><span class="pre">hue</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> – Define the quantity to plot. Accepts callable or string
If string, it’s assumed that the abifile has an attribute with the same name and <cite>getattr</cite> is invoked.
Dot notation is also supported e.g. hue=”structure.formula” –&gt; abifile.structure.formula
If callable, the output of item(abifile) is used.</li>
<li><strong>sortby</strong> – Define the convergence parameter, sort files and produce plot labels.
Can be None, string or function. If None, no sorting is performed.
If string and not empty it’s assumed that the abifile has an attribute
with the same name and <cite>getattr</cite> is invoked.
If callable, the output of sortby(abifile) is used.</li>
<li><strong>hue</strong> – Variable that define subsets of the data, which will be drawn on separate lines.
Accepts callable or string
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
If callable, the output of hue(abifile) is used.</li>
<li><strong>ax</strong> – <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.axes.Axes</span></code></a> or None if a new figure should be created.</li>
<li><strong>fontsize</strong> – legend and label fontsize.</li>
<li><strong>kwargs</strong> – keyword arguments passed to matplotlib plot method.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p class="rubric">Example</p>
<p>robot.plot_convergence(“energy”)</p>
<p>robot.plot_convergence(“energy”, sortby=”nkpt”)</p>
<p>robot.plot_convergence(“pressure”, sortby=”nkpt”, hue=”tsmear”)</p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.plot_convergence_items">
<code class="descname">plot_convergence_items</code><span class="sig-paren">(</span><em>items</em>, <em>sortby=None</em>, <em>hue=None</em>, <em>fontsize=6</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.plot_convergence_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.plot_convergence_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the convergence of a list of <code class="docutils literal"><span class="pre">items</span></code> wrt to the <code class="docutils literal"><span class="pre">sortby</span></code> parameter.
Values can optionally be grouped by <code class="docutils literal"><span class="pre">hue</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>items</strong> – List of attributes (or callables) to be analyzed.</li>
<li><strong>sortby</strong> – Define the convergence parameter, sort files and produce plot labels.
Can be None, string or function. If None, no sorting is performed.
If string and not empty it’s assumed that the abifile has an attribute
with the same name and <cite>getattr</cite> is invoked.
If callable, the output of sortby(abifile) is used.</li>
<li><strong>hue</strong> – Variable that define subsets of the data, which will be drawn on separate lines.
Accepts callable or string
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
Dot notation is also supported e.g. hue=”structure.formula” –&gt; abifile.structure.formula
If callable, the output of hue(abifile) is used.</li>
<li><strong>fontsize</strong> – legend and label fontsize.</li>
<li><strong>kwargs</strong> – keyword arguments are passed to ax.plot</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.plot_lattice_convergence">
<code class="descname">plot_lattice_convergence</code><span class="sig-paren">(</span><em>what_list=None</em>, <em>sortby=None</em>, <em>hue=None</em>, <em>fontsize=8</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.plot_lattice_convergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.plot_lattice_convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the convergence of the lattice parameters (a, b, c, alpha, beta, gamma).
wrt the``sortby`` parameter. Values can optionally be grouped by <code class="docutils literal"><span class="pre">hue</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>what_list</strong> – List of strings with the quantities to plot e.g. [“a”, “alpha”, “beta”].
None means all.</li>
<li><strong>item</strong> – Define the quantity to plot. Accepts callable or string
If string, it’s assumed that the abifile has an attribute
with the same name and <cite>getattr</cite> is invoked.
If callable, the output of item(abifile) is used.</li>
<li><strong>sortby</strong> – Define the convergence parameter, sort files and produce plot labels.
Can be None, string or function.
If None, no sorting is performed.
If string and not empty it’s assumed that the abifile has an attribute
with the same name and <cite>getattr</cite> is invoked.
If callable, the output of sortby(abifile) is used.</li>
<li><strong>hue</strong> – Variable that define subsets of the data, which will be drawn on separate lines.
Accepts callable or string
If string, it’s assumed that the abifile has an attribute with the same name and getattr is invoked.
Dot notation is also supported e.g. hue=”structure.formula” –&gt; abifile.structure.formula
If callable, the output of hue(abifile) is used.</li>
<li><strong>ax</strong> – <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.axes.Axes</span></code></a> or None if a new figure should be created.</li>
<li><strong>fontsize</strong> – legend and label fontsize.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p class="rubric">Example</p>
<p>robot.plot_lattice_convergence()</p>
<p>robot.plot_lattice_convergence(sortby=”nkpt”)</p>
<p>robot.plot_lattice_convergence(sortby=”nkpt”, hue=”tsmear”)</p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.robots.Robot.get_baserobot_code_cells">
<code class="descname">get_baserobot_code_cells</code><span class="sig-paren">(</span><em>title=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#Robot.get_baserobot_code_cells"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.Robot.get_baserobot_code_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of <a class="reference external" href="http://jupyter.org/">jupyter</a> cells with calls to methods provided by the base class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.abio.robots.HueGroup">
<em class="property">class </em><code class="descclassname">abipy.abio.robots.</code><code class="descname">HueGroup</code><span class="sig-paren">(</span><em>hvalue</em>, <em>xvalues</em>, <em>abifiles</em>, <em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/robots.html#HueGroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.robots.HueGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This small object is used by <code class="docutils literal"><span class="pre">group_and_sortby</span></code> to store information abouth the group.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.abio.timer">
<span id="timer-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">timer</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.timer" title="Permalink to this headline">¶</a></h2>
<p>This module provides objects for extracting timing data from the ABINIT output files
It also provides tools to analyze and to visualize the parallel efficiency.</p>
<dl class="class">
<dt id="abipy.abio.timer.AbinitTimerParser">
<em class="property">class </em><code class="descclassname">abipy.abio.timer.</code><code class="descname">AbinitTimerParser</code><a class="reference internal" href="../_modules/abipy/abio/timer.html#AbinitTimerParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.timer.AbinitTimerParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://pymatgen.org/pymatgen.io.abinit.abitimer.html#pymatgen.io.abinit.abitimer.AbinitTimerParser" title="(in pymatgen v2018.8.10)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.io.abinit.abitimer.AbinitTimerParser</span></code></a>, <a class="reference internal" href="core_api.html#abipy.core.mixins.NotebookWriter" title="abipy.core.mixins.NotebookWriter"><code class="xref py py-class docutils literal"><span class="pre">abipy.core.mixins.NotebookWriter</span></code></a></p>
<dl class="method">
<dt id="abipy.abio.timer.AbinitTimerParser.yield_figs">
<code class="descname">yield_figs</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/timer.html#AbinitTimerParser.yield_figs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.timer.AbinitTimerParser.yield_figs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function <em>generates</em> a predefined list of matplotlib figures with minimal input from the user.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.timer.AbinitTimerParser.write_notebook">
<code class="descname">write_notebook</code><span class="sig-paren">(</span><em>nbpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/timer.html#AbinitTimerParser.write_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.timer.AbinitTimerParser.write_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an ipython notebook to nbpath. If nbpath is None, a temporary file in the current
working directory is created. Return path to the notebook.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.abio.variable">
<span id="variable-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">variable</span></code> Module</a><a class="headerlink" href="#module-abipy.abio.variable" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="abipy.abio.variable.InputVariable">
<em class="property">class </em><code class="descclassname">abipy.abio.variable.</code><code class="descname">InputVariable</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>units=''</em>, <em>valperline=3</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/variable.html#InputVariable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.variable.InputVariable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An Abinit input variable.</p>
<dl class="method">
<dt id="abipy.abio.variable.InputVariable.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/variable.html#InputVariable.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.variable.InputVariable.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.variable.InputVariable.name">
<code class="descname">name</code><a class="headerlink" href="#abipy.abio.variable.InputVariable.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="abipy.abio.variable.InputVariable.basename">
<code class="descname">basename</code><a class="headerlink" href="#abipy.abio.variable.InputVariable.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name trimmed of any dataset index.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.variable.InputVariable.dataset">
<code class="descname">dataset</code><a class="headerlink" href="#abipy.abio.variable.InputVariable.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dataset index in string form.</p>
</dd></dl>

<dl class="attribute">
<dt id="abipy.abio.variable.InputVariable.units">
<code class="descname">units</code><a class="headerlink" href="#abipy.abio.variable.InputVariable.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the units.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.variable.InputVariable.format_scalar">
<code class="descname">format_scalar</code><span class="sig-paren">(</span><em>val</em>, <em>floatdecimal=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/variable.html#InputVariable.format_scalar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.variable.InputVariable.format_scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a single numerical value into a string
with the appropriate number of decimal.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.variable.InputVariable.format_list2d">
<code class="descname">format_list2d</code><span class="sig-paren">(</span><em>values</em>, <em>floatdecimal=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/variable.html#InputVariable.format_list2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.variable.InputVariable.format_list2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a list of lists.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.abio.variable.InputVariable.format_list">
<code class="descname">format_list</code><span class="sig-paren">(</span><em>values</em>, <em>floatdecimal=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/abio/variable.html#InputVariable.format_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.abio.variable.InputVariable.format_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a list of values into a string.
The result might be spread among several lines.</p>
</dd></dl>

</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, M. Giantomassi and the AbiPy group.<br/>
      Last updated on Aug 22, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>