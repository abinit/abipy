<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tools Package &#8212; abipy 0.7.0.dev documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/my_style.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7.0.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="waves Package" href="waves_api.html" />
    <link rel="prev" title="iotools Package" href="iotools_api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          abipy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.7.0.dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow_gallery/index.html">Flow Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flows_howto.html">Flows How-To</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guide.html">Coding guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting AbiPy</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">tools Package</a><ul>
<li><a class="reference internal" href="#module-abipy.tools"><code class="docutils literal"><span class="pre">tools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.bessel"><code class="docutils literal"><span class="pre">bessel</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.decorators"><code class="docutils literal"><span class="pre">decorators</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.derivatives"><code class="docutils literal"><span class="pre">derivatives</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.devtools"><code class="docutils literal"><span class="pre">devtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.duck"><code class="docutils literal"><span class="pre">duck</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.fftprof"><code class="docutils literal"><span class="pre">fftprof</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.iotools"><code class="docutils literal"><span class="pre">iotools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.notebooks"><code class="docutils literal"><span class="pre">notebooks</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.numtools"><code class="docutils literal"><span class="pre">numtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.plotting"><code class="docutils literal"><span class="pre">plotting</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.tensors"><code class="docutils literal"><span class="pre">tensors</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.text"><code class="docutils literal"><span class="pre">text</span></code> Module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="iotools_api.html" title="Previous Chapter: iotools Package"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; iotools Package</span>
    </a>
  </li>
  <li>
    <a href="waves_api.html" title="Next Chapter: waves Package"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">waves Package &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/api/tools_api.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="tools-package">
<h1><a class="toc-backref" href="#contents">tools Package</a><a class="headerlink" href="#tools-package" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#tools-package" id="id1">tools Package</a><ul>
<li><a class="reference internal" href="#module-abipy.tools" id="id2"><code class="xref py py-mod docutils literal"><span class="pre">tools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.bessel" id="id3"><code class="xref py py-mod docutils literal"><span class="pre">bessel</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.decorators" id="id4"><code class="xref py py-mod docutils literal"><span class="pre">decorators</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.derivatives" id="id5"><code class="xref py py-mod docutils literal"><span class="pre">derivatives</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.devtools" id="id6"><code class="xref py py-mod docutils literal"><span class="pre">devtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.duck" id="id7"><code class="xref py py-mod docutils literal"><span class="pre">duck</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.fftprof" id="id8"><code class="xref py py-mod docutils literal"><span class="pre">fftprof</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.iotools" id="id9"><code class="xref py py-mod docutils literal"><span class="pre">iotools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.notebooks" id="id10"><code class="xref py py-mod docutils literal"><span class="pre">notebooks</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.numtools" id="id11"><code class="xref py py-mod docutils literal"><span class="pre">numtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.plotting" id="id12"><code class="xref py py-mod docutils literal"><span class="pre">plotting</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.tensors" id="id13"><code class="xref py py-mod docutils literal"><span class="pre">tensors</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.text" id="id14"><code class="xref py py-mod docutils literal"><span class="pre">text</span></code> Module</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-abipy.tools">
<span id="tools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">tools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools" title="Permalink to this headline">¶</a></h2>
<p>Helper functions.</p>
<dl class="class">
<dt id="abipy.tools.NoDefaultProvided">
<em class="property">class </em><code class="descclassname">abipy.tools.</code><code class="descname">NoDefaultProvided</code><a class="reference internal" href="../_modules/abipy/tools.html#NoDefaultProvided"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.NoDefaultProvided" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.hasattrd">
<code class="descclassname">abipy.tools.</code><code class="descname">hasattrd</code><span class="sig-paren">(</span><em>obj</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools.html#hasattrd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.hasattrd" title="Permalink to this definition">¶</a></dt>
<dd><p>The arguments are an object and a string.
The result is True if the string is the name of one of the object’s attributes, False if not.
Unlike the builtin hasattr, hasattrd supports dot notation e.g. hasattr(int, “__class__.__name__”)
(This is implemented by calling getattrd(object, name) and seeing whether it raises an exception or not.)</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.getattrd">
<code class="descclassname">abipy.tools.</code><code class="descname">getattrd</code><span class="sig-paren">(</span><em>obj</em>, <em>name</em>, <em>default=&lt;class 'abipy.tools.NoDefaultProvided'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools.html#getattrd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.getattrd" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as getattr(), but allows dot notation lookup e.g. getattrd(obj, “a.b”)</p>
<p>Raises: AttributeError if <code class="docutils literal"><span class="pre">name</span></code> is not found and <code class="docutils literal"><span class="pre">default</span></code> is not given.</p>
<p>Discussed in: <a class="reference external" href="http://stackoverflow.com/questions/11975781">http://stackoverflow.com/questions/11975781</a></p>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.bessel">
<span id="bessel-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">bessel</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.bessel" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to compute integrals of Bessel functions.</p>
<dl class="function">
<dt id="abipy.tools.bessel.spline_int_jlqr">
<code class="descclassname">abipy.tools.bessel.</code><code class="descname">spline_int_jlqr</code><span class="sig-paren">(</span><em>l</em>, <em>qmax</em>, <em>rcut</em>, <em>numq=None</em>, <em>numr=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/bessel.html#spline_int_jlqr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.bessel.spline_int_jlqr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute <span class="math">\(j_n(z) = \int_0^{rcut} r^2 j_l(qr) dr\)</span>
where <span class="math">\(j_l\)</span> is the Spherical Bessel function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>l</strong> – Angular momentum</li>
<li><strong>qmax</strong> – Max <span class="math">\(|q|\)</span> in integral in Ang-1</li>
<li><strong>rcut</strong> – Sphere radius in Angstrom.</li>
<li><strong>numq</strong> – Number of q-points in qmesh.</li>
<li><strong>numr</strong> – Number of r-points for integration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Spline object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.decorators">
<span id="decorators-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">decorators</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.decorators" title="Permalink to this headline">¶</a></h2>
<p>Decorators.</p>
<dl class="function">
<dt id="abipy.tools.decorators.return_straceback_ifexc">
<code class="descclassname">abipy.tools.decorators.</code><code class="descname">return_straceback_ifexc</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/decorators.html#return_straceback_ifexc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.decorators.return_straceback_ifexc" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for functions that are supposed to return a string for logging purposes (e.g. str)
Instead of raising an exception, the decorated function returns a string with the
traceback so that execution can continue.</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.derivatives">
<span id="derivatives-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">derivatives</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.derivatives" title="Permalink to this headline">¶</a></h2>
<p>Tools for computing derivatives by finite differences.</p>
<dl class="function">
<dt id="abipy.tools.derivatives.finite_diff">
<code class="descclassname">abipy.tools.derivatives.</code><code class="descname">finite_diff</code><span class="sig-paren">(</span><em>arr</em>, <em>h</em>, <em>order=1</em>, <em>acc=4</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/derivatives.html#finite_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.derivatives.finite_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the derivative of order <cite>order</cite> by finite difference.
For each point in arr, the function tries to use central differences
and fallbacks to forward/backward approximations for points that are close to the extrema.
Note that high accuracy levels can fail and raise <cite>ValueError</cite> if not enough points
are available in <cite>arr</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>arr</strong> – Input array with y-values.</li>
<li><strong>h</strong> – Spacing along x</li>
<li><strong>order</strong> – Derivative order</li>
<li><strong>acc</strong> – accuracy level.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.devtools">
<span id="devtools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">devtools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.devtools" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="abipy.tools.devtools.profile">
<code class="descclassname">abipy.tools.devtools.</code><code class="descname">profile</code><span class="sig-paren">(</span><em>statement</em>, <em>global_vars</em>, <em>local_vars</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Run statement under profiler, supplying your own globals and locals</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">stats</span> <span class="o">=</span> <span class="n">profile</span><span class="p">(</span><span class="s2">&quot;main()&quot;</span><span class="p">,</span> <span class="n">global_vars</span><span class="o">=</span><span class="nb">globals</span><span class="p">(),</span> <span class="n">local_vars</span><span class="o">=</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.devtools.HtmlDiff">
<em class="property">class </em><code class="descclassname">abipy.tools.devtools.</code><code class="descname">HtmlDiff</code><span class="sig-paren">(</span><em>filepaths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object produces diff files in HTML format and displays them in the browser.</p>
<p>Usage example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">HtmlDiff</span><span class="p">(</span><span class="n">filepaths</span><span class="p">)</span><span class="o">.</span><span class="n">open_browser</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.open_browser">
<code class="descname">open_browser</code><span class="sig-paren">(</span><em>diffmode='difflib'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.open_browser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.open_browser" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate diff with <code class="docutils literal"><span class="pre">diffmode</span></code>, open browser, return exit code.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.difflib">
<code class="descname">difflib</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.difflib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.difflib" title="Permalink to this definition">¶</a></dt>
<dd><p>Use difflib to generate a HTML file with the diff.
Open file in the browser.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.pygmentize">
<code class="descname">pygmentize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.pygmentize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.pygmentize" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute <code class="docutils literal"><span class="pre">diff</span></code> and <code class="docutils literal"><span class="pre">pygmentize</span></code> in a subprocess to generate a HTML file with the diff.
Open file in the browser.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.duck">
<span id="duck-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">duck</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.duck" title="Permalink to this headline">¶</a></h2>
<p>Duck-typing tests</p>
<dl class="function">
<dt id="abipy.tools.duck.is_string">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">is_string</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_string" title="Permalink to this definition">¶</a></dt>
<dd><p>True if s behaves like a string (duck typing test).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_intlike">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">is_intlike</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_intlike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_intlike" title="Permalink to this definition">¶</a></dt>
<dd><p>True if obj represents an integer (float such as 1.0 are included as well).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_number_like">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">is_number_like</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_number_like"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_number_like" title="Permalink to this definition">¶</a></dt>
<dd><p>True if obj represents a number.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_listlike">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">is_listlike</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_listlike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_listlike" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.list_ints">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">list_ints</code><span class="sig-paren">(</span><em>arg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#list_ints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.list_ints" title="Permalink to this definition">¶</a></dt>
<dd><p>Always return a list of int, given a int or list of integers as input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Examples:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_ints</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.torange">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">torange</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#torange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.torange" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert obj into a range. Accepts integer, slice object  or any object
with an __iter__ method. Note that an integer is converted into range(int, int+1)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<span class="go">[0, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="go">[1, 4, 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.as_slice">
<code class="descclassname">abipy.tools.duck.</code><code class="descname">as_slice</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#as_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.as_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an integer, a string or a slice object into slice.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="s2">&quot;[1:4]&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="s2">&quot;1::2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.fftprof">
<span id="fftprof-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">fftprof</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.fftprof" title="Permalink to this headline">¶</a></h2>
<p>Python interface to fftprof. Provides objects to benchmark
the FFT libraries used by ABINIT and plot the results with matplotlib.</p>
<dl class="class">
<dt id="abipy.tools.fftprof.FFTBenchmark">
<em class="property">class </em><code class="descclassname">abipy.tools.fftprof.</code><code class="descname">FFTBenchmark</code><span class="sig-paren">(</span><em>title</em>, <em>FFT_tests</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Container class storing the results of the FFT benchmark.</p>
<p>Use the class method <code class="docutils literal"><span class="pre">from_file</span></code> to generate a new instance.</p>
<dl class="classmethod">
<dt id="abipy.tools.fftprof.FFTBenchmark.from_file">
<em class="property">classmethod </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>fileobj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.from_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.iter_fftalgs">
<code class="descname">iter_fftalgs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.iter_fftalgs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.iter_fftalgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over the FFT algorithms.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.tests_with_fftalg">
<code class="descname">tests_with_fftalg</code><span class="sig-paren">(</span><em>fftalg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.tests_with_fftalg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.tests_with_fftalg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of FFT_tests with a given fftalg.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>exclude_algs=None</em>, <em>exclude_threads=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the wall-time and the speed-up.</p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.iotools">
<span id="iotools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">iotools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.iotools" title="Permalink to this headline">¶</a></h2>
<p>IO related utilities.</p>
<dl class="function">
<dt id="abipy.tools.iotools.ask_yes_no">
<code class="descclassname">abipy.tools.iotools.</code><code class="descname">ask_yes_no</code><span class="sig-paren">(</span><em>prompt</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#ask_yes_no"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.ask_yes_no" title="Permalink to this definition">¶</a></dt>
<dd><p>Ask a question and return a boolean (y/n) answer.</p>
<p>If default is given (one of ‘y’,’n’), it is used if the user input is
empty. Otherwise the question is repeated until an answer is given.</p>
<p>An EOF is treated as the default answer.  If there is no default, an
exception is raised to prevent infinite loops.</p>
<p>Valid answers are: y/yes/n/no (match is not case sensitive).</p>
</dd></dl>

<dl class="exception">
<dt id="abipy.tools.iotools.EditorError">
<em class="property">exception </em><code class="descclassname">abipy.tools.iotools.</code><code class="descname">EditorError</code><a class="reference internal" href="../_modules/abipy/tools/iotools.html#EditorError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.EditorError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></a></p>
<p>Base class for exceptions raised by <cite>Editor</cite></p>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.iotools.Editor">
<em class="property">class </em><code class="descclassname">abipy.tools.iotools.</code><code class="descname">Editor</code><span class="sig-paren">(</span><em>editor=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="attribute">
<dt id="abipy.tools.iotools.Editor.DEFAULT_EDITOR">
<code class="descname">DEFAULT_EDITOR</code><em class="property"> = 'vi'</em><a class="headerlink" href="#abipy.tools.iotools.Editor.DEFAULT_EDITOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="abipy.tools.iotools.Editor.Error">
<code class="descname">Error</code><a class="headerlink" href="#abipy.tools.iotools.Editor.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.tools.iotools.EditorError" title="abipy.tools.iotools.EditorError"><code class="xref py py-class docutils literal"><span class="pre">EditorError</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.iotools.Editor.edit_file">
<code class="descname">edit_file</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor.edit_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor.edit_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.iotools.Editor.edit_files">
<code class="descname">edit_files</code><span class="sig-paren">(</span><em>fnames</em>, <em>ask_for_exit=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor.edit_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor.edit_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.iotools.input_from_editor">
<code class="descclassname">abipy.tools.iotools.</code><code class="descname">input_from_editor</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#input_from_editor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.input_from_editor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-abipy.tools.notebooks">
<span id="notebooks-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">notebooks</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.notebooks" title="Permalink to this headline">¶</a></h2>
<p>Tools for ipython notebooks.</p>
<dl class="function">
<dt id="abipy.tools.notebooks.print_source_in_module">
<code class="descclassname">abipy.tools.notebooks.</code><code class="descname">print_source_in_module</code><span class="sig-paren">(</span><em>function</em>, <em>module</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_source_in_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_source_in_module" title="Permalink to this definition">¶</a></dt>
<dd><p>For use inside an <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a module and a function, print the source code.</p>
<p>Based on:</p>
<blockquote>
<div><a class="reference external" href="http://stackoverflow.com/questions/20665118/how-to-show-source-code-of-a-package-function-in-ipython-notebook">http://stackoverflow.com/questions/20665118/how-to-show-source-code-of-a-package-function-in-ipython-notebook</a></div></blockquote>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.print_source">
<code class="descclassname">abipy.tools.notebooks.</code><code class="descname">print_source</code><span class="sig-paren">(</span><em>function</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_source" title="Permalink to this definition">¶</a></dt>
<dd><p>For use inside a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a function, print the source code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>**kwargs</strong> – Passed to HtmlFormatter</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTML string.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.print_doc">
<code class="descclassname">abipy.tools.notebooks.</code><code class="descname">print_doc</code><span class="sig-paren">(</span><em>function</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>For use inside a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a function, print the docstring.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>**kwargs</strong> – Passed to HtmlFormatter</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">HTML string.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.ipw_listdir">
<code class="descclassname">abipy.tools.notebooks.</code><code class="descname">ipw_listdir</code><span class="sig-paren">(</span><em>top='.'</em>, <em>recurse=True</em>, <em>widget_type='dropdown'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#ipw_listdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.ipw_listdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an ipython widget listing all the files located within the directory <code class="docutils literal"><span class="pre">top</span></code>
that can be inspected with <a class="reference internal" href="../scripts/abiopen.html#abiopen-py"><span class="std std-ref">abiopen.py</span></a>. The user can select the file in the widget
and print info on the corresponding file inside the notebook.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>top</strong> – Initial directory.</li>
<li><strong>recurse</strong> – False to ignore directories within <code class="docutils literal"><span class="pre">top</span></code>.</li>
<li><strong>widget_type</strong> – Specify the widget to create. Possible values in:
[“tooglebuttons”, “dropdown”, “radiobuttons”]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.numtools">
<span id="numtools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">numtools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.numtools" title="Permalink to this headline">¶</a></h2>
<p>Numeric tools.</p>
<dl class="function">
<dt id="abipy.tools.numtools.transpose_last3dims">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">transpose_last3dims</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#transpose_last3dims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.transpose_last3dims" title="Permalink to this definition">¶</a></dt>
<dd><p>Transpose the last three dimensions of arr: (…,x,y,z) –&gt; (…,z,y,x).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.add_periodic_replicas">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">add_periodic_replicas</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#add_periodic_replicas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.add_periodic_replicas" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new array of shape=(…, nx+1,ny+1,nz+1) with redundant data points.</p>
<p>Periodicity in enforced only on the last three dimensions.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.data_from_cplx_mode">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">data_from_cplx_mode</code><span class="sig-paren">(</span><em>cplx_mode</em>, <em>arr</em>, <em>tol=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#data_from_cplx_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.data_from_cplx_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data from the numpy array <code class="docutils literal"><span class="pre">arr</span></code> depending on the values of <code class="docutils literal"><span class="pre">cplx_mode</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cplx_mode</strong> – Possible values in (“re”, “im”, “abs”, “angle”)
“re” for the real part,
“im” for the imaginary part.
“all” for both re and im.
“abs” means that the absolute value of the complex number is shown.
“angle” will display the phase of the complex number in radians.</li>
<li><strong>tol</strong> – If not None, values below tol are set to zero. Cannot be used with “angle”</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.is_diagonal">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">is_diagonal</code><span class="sig-paren">(</span><em>matrix</em>, <em>atol=1e-12</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#is_diagonal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.is_diagonal" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if matrix is diagonal.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.alternate">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">alternate</code><span class="sig-paren">(</span><em>*iterables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#alternate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.alternate" title="Permalink to this definition">¶</a></dt>
<dd><p>[a[0], b[0], … , a[1], b[1], …, a[n], b[n] …]
&gt;&gt;&gt; alternate([1,4], [2,5], [3,6])
[1, 2, 3, 4, 5, 6]</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.iflat">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">iflat</code><span class="sig-paren">(</span><em>iterables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#iflat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.iflat" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over all elements of a nested iterable. It’s recursive!</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iflat</span><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]]))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.grouper">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">grouper</code><span class="sig-paren">(</span><em>n</em>, <em>iterable</em>, <em>fillvalue=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#grouper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.grouper" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">grouper</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;ABCDEFG&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">grouper</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.sort_and_groupby">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">sort_and_groupby</code><span class="sig-paren">(</span><em>items</em>, <em>key=None</em>, <em>reverse=False</em>, <em>ret_lists=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#sort_and_groupby"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.sort_and_groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort <code class="docutils literal"><span class="pre">items</span></code> using <code class="docutils literal"><span class="pre">key</span></code> function and invoke itertools.groupby to group items.
If ret_lists is True, a tuple of lists (keys, groups) is returned else iterator.
See itertools.groupby for further info.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sort_and_groupby</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">ret_lists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">([1, 2], [[1, 1], [2]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.prune_ord">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">prune_ord</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#prune_ord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.prune_ord" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new list where all duplicated items in alist are removed</p>
<ol class="arabic simple">
<li>The order of items in alist is preserved.</li>
<li>items in alist MUST be hashable.</li>
</ol>
<p>Taken from <a class="reference external" href="http://code.activestate.com/recipes/52560/">http://code.activestate.com/recipes/52560/</a>
&gt;&gt;&gt; prune_ord([1, 1, 2, 3, 3])
[1, 2, 3]</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.gaussian">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">gaussian</code><span class="sig-paren">(</span><em>x</em>, <em>width</em>, <em>center=0.0</em>, <em>height=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the values of gaussian(x) where x is array-like.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> – Input array.</li>
<li><strong>width</strong> – Width of the gaussian.</li>
<li><strong>center</strong> – Center of the gaussian.</li>
<li><strong>height</strong> – height of the gaussian. If height is None, a normalized gaussian is returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.lorentzian">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">lorentzian</code><span class="sig-paren">(</span><em>x</em>, <em>width</em>, <em>center=0.0</em>, <em>height=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#lorentzian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.lorentzian" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the values of gaussian(x) where x is array-like.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> – Input array.</li>
<li><strong>width</strong> – Width of the Lorentzian (half-width at half-maximum)</li>
<li><strong>center</strong> – Center of the Lorentzian.</li>
<li><strong>height</strong> – height of the Lorentzian. If height is None, a normalized Lorentzian is returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.smooth">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">smooth</code><span class="sig-paren">(</span><em>x</em>, <em>window_len=11</em>, <em>window='hanning'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#smooth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>smooth the data using a window with requested size.</p>
<p>This method is based on the convolution of a scaled window with the signal.
The signal is prepared by introducing reflected copies of the signal
(with the window size) in both ends so that transient parts are minimized
in the begining and end part of the output signal.
Taken from <a class="reference external" href="http://www.scipy.org/Cookbook/SignalSmooth">http://www.scipy.org/Cookbook/SignalSmooth</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – the input signal</li>
<li><strong>window_len</strong> – the dimension of the smoothing window. it should be an odd integer</li>
<li><strong>window</strong> – the type of window from ‘flat’, ‘hanning’, ‘hamming’, ‘bartlett’, ‘blackman’.
‘flat’ window will produce a moving average smoothing.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the smoothed signal.</p>
</td>
</tr>
</tbody>
</table>
<p>example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span><span class="o">*</span><span class="mf">0.1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">smooth</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>see also:</p>
<p>numpy.hanning, numpy.hamming, numpy.bartlett, numpy.blackman, numpy.convolve scipy.signal.lfilter</p>
<p>TODO: the window parameter could be the window itself if an array instead of a string</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.find_convindex">
<code class="descclassname">abipy.tools.numtools.</code><code class="descname">find_convindex</code><span class="sig-paren">(</span><em>values</em>, <em>tol</em>, <em>min_numpts=1</em>, <em>mode='abs'</em>, <em>vinf=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#find_convindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.find_convindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of values and a tolerance tol, returns the leftmost index for which</p>
<blockquote>
<div>abs(value[i] - vinf) &lt; tol if mode == “abs”</div></blockquote>
<dl class="docutils">
<dt>or</dt>
<dd>abs(value[i] - vinf) / vinf &lt; tol if mode == “rel”</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tol</strong> – Tolerance</li>
<li><strong>min_numpts</strong> – Minimum number of points that must be converged.</li>
<li><strong>mode</strong> – “abs” for absolute convergence, “rel” for relative convergence.</li>
<li><strong>vinf</strong> – Used to specify an alternative value instead of values[-1].
By default, vinf = values[-1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">-1 if convergence is not achieved else the index in values.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator">
<em class="property">class </em><code class="descclassname">abipy.tools.numtools.</code><code class="descname">BlochRegularGridInterpolator</code><span class="sig-paren">(</span><em>structure</em>, <em>datar</em>, <em>add_replicas=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This object interpolates the periodic part of a Bloch state in real space.</p>
<dl class="method">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator.eval_line">
<code class="descname">eval_line</code><span class="sig-paren">(</span><em>point1</em>, <em>point2</em>, <em>num=200</em>, <em>cartesian=False</em>, <em>kpoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator.eval_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator.eval_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate values along a line.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>point1</strong> – First point of the line. Accepts 3d vector or integer.
The vector is in reduced coordinates unless <cite>cartesian == True</cite>.
If integer, the first point of the line is given by the i-th site of the structure
e.g. <cite>point1=0, point2=1</cite> gives the line passing through the first two atoms.</li>
<li><strong>point2</strong> – Second point of the line. Same API as <cite>point1</cite>.</li>
<li><strong>num</strong> – Number of points sampled along the line.</li>
<li><strong>cartesian</strong> – By default, <cite>point1</cite> and <cite>point1</cite> are interpreted as points in fractional
coordinates (if not integers). Use True to pass points in cartesian coordinates.</li>
<li><strong>kpoint</strong> – k-point in reduced coordinates. If not None, the phase-factor e^{ikr} is included.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Return: named tuple with</dt>
<dd>site1, site2: None if the points do not represent atomic sites.
points: Points in fractional coords.
dist: the distance of points along the line in Ang.
values: numpy array of shape [ndt, num] with interpolated values.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator.eval_points">
<code class="descname">eval_points</code><span class="sig-paren">(</span><em>frac_coords</em>, <em>idt=None</em>, <em>cartesian=False</em>, <em>kpoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator.eval_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator.eval_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate values on an arbitrary list of points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>frac_coords</strong> – List of points in reduced coordinates unless <cite>cartesian</cite>.</li>
<li><strong>idt</strong> – Index of the sub-array to interpolate. If None, all sub-arrays are interpolated.</li>
<li><strong>cartesian</strong> – True if points are in cartesian coordinates.</li>
<li><strong>kpoint</strong> – k-point in reduced coordinates. If not None, the phase-factor e^{ikr} is included.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">[ndt, npoints] array or [1, npoints] if idt is not None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.plotting">
<span id="plotting-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">plotting</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.plotting" title="Permalink to this headline">¶</a></h2>
<p>Utilities for generating matplotlib plots.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Avoid importing matplotlib in the module namespace otherwise startup is very slow.</p>
</div>
<dl class="function">
<dt id="abipy.tools.plotting.set_axlims">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">set_axlims</code><span class="sig-paren">(</span><em>ax</em>, <em>lims</em>, <em>axname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#set_axlims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.set_axlims" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the data limits for the axis ax.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lims</strong> – tuple(2) for (left, right), tuple(1) or scalar for left only.</li>
<li><strong>axname</strong> – “x” for x-axis, “y” for y-axis.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return: (left, right)</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.plot_array">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">plot_array</code><span class="sig-paren">(</span><em>array</em>, <em>color_map=None</em>, <em>cplx_mode='abs'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#plot_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.plot_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Use imshow for plotting 2D or 1D arrays.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">plot_array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>See &lt;<a class="reference external" href="http://stackoverflow.com/questions/7229971/2d-grid-data-visualization-in-python">http://stackoverflow.com/questions/7229971/2d-grid-data-visualization-in-python</a>&gt;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>array</strong> – Array-like object (1D or 2D).</li>
<li><strong>color_map</strong> – color map.</li>
<li><strong>cplx_mode</strong> – Flag defining how to handle complex arrays. Possible values in (“re”, “im”, “abs”, “angle”)
“re” for the real part, “im” for the imaginary part.
“abs” means that the absolute value of the complex number is shown.
“angle” will display the phase of the complex number in radians.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<blockquote>
<div><p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.ArrayPlotter">
<em class="property">class </em><code class="descclassname">abipy.tools.plotting.</code><code class="descname">ArrayPlotter</code><span class="sig-paren">(</span><em>*labels_and_arrays</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.add_array">
<code class="descname">add_array</code><span class="sig-paren">(</span><em>label</em>, <em>array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.add_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.add_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Add array with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.add_arrays">
<code class="descname">add_arrays</code><span class="sig-paren">(</span><em>labels</em>, <em>arr_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.add_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.add_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of arrays</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>labels</strong> – List of labels.</li>
<li><strong>arr_list</strong> – List of arrays.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>cplx_mode='abs'</em>, <em>colormap='jet'</em>, <em>fontsize=8</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.plot" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cplx_mode</strong> – “abs” for absolute value, “re”, “im”, “angle”</li>
<li><strong>colormap</strong> – matplotlib colormap.</li>
<li><strong>fontsize</strong> – legend and label fontsize.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.Marker">
<em class="property">class </em><code class="descclassname">abipy.tools.plotting.</code><code class="descname">Marker</code><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.tools.plotting.Marker" title="abipy.tools.plotting.Marker"><code class="xref py py-class docutils literal"><span class="pre">abipy.tools.plotting.Marker</span></code></a></p>
<p>Stores the position and the size of the marker.
A marker is a list of tuple(x, y, s) where x, and y are the position
in the graph and s is the size of the marker.
Used for plotting purpose e.g. QP data, energy derivatives…</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">]</span>
<span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="n">marker</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.tools.plotting.Marker.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>xys</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the marker values.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.Marker.posneg_marker">
<code class="descname">posneg_marker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker.posneg_marker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker.posneg_marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Split data into two sets: the first one contains all the points with positive size.
The first set contains all the points with negative size.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.plot_unit_cell">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">plot_unit_cell</code><span class="sig-paren">(</span><em>lattice</em>, <em>ax=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#plot_unit_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.plot_unit_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the unit cell of the lattice to a matplotlib Axes3D</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lattice</strong> – Lattice object</li>
<li><strong>ax</strong> – matplotlib <code class="xref py py-class docutils literal"><span class="pre">Axes3D</span></code> or None if a new figure should be created.</li>
<li><strong>kwargs</strong> – kwargs passed to the matplotlib function ‘plot’. Color defaults to black
and linewidth to 3.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">matplotlib figure and ax</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.GenericDataFilePlotter">
<em class="property">class </em><code class="descclassname">abipy.tools.plotting.</code><code class="descname">GenericDataFilePlotter</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Extract data from a generic text file with results
in tabular format and plot data with matplotlib.
Multiple datasets are supported.
No attempt is made to handle metadata (e.g. column name)
Mainly used to handle text files written without any schema.</p>
<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilePlotter.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation with verbosity level <cite>verbose</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilePlotter.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>use_index=False</em>, <em>fontsize=8</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot all arrays. Use multiple axes if datasets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>use_index</strong> – By default, the x-values are taken from the first column.
If use_index is False, the x-values are the row index.</li>
<li><strong>fontsize</strong> – fontsize for title.</li>
<li><strong>kwargs</strong> – options passed to <code class="docutils literal"><span class="pre">ax.plot</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter">
<em class="property">class </em><code class="descclassname">abipy.tools.plotting.</code><code class="descname">GenericDataFilesPlotter</code><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="classmethod">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.from_files">
<em class="property">classmethod </em><code class="descname">from_files</code><span class="sig-paren">(</span><em>filepaths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Build object from a list of <cite>filenames</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.to_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.add_file">
<code class="descname">add_file</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.add_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.add_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Add data from <cite>filepath</cite></p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>use_index=False</em>, <em>fontsize=8</em>, <em>colormap='viridis'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot all arrays. Use multiple axes if datasets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>use_index</strong> – By default, the x-values are taken from the first column.
If use_index is False, the x-values are the row index.</li>
<li><strong>fontsize</strong> – fontsize for title.</li>
<li><strong>colormap</strong> – matplotlib color map.</li>
<li><strong>kwargs</strong> – options passed to <code class="docutils literal"><span class="pre">ax.plot</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v2.2.3)"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">kwargs</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>Title of the plot (Default: None).</td>
</tr>
<tr class="row-odd"><td>show</td>
<td>True to show the figure (default: True).</td>
</tr>
<tr class="row-even"><td>savefig</td>
<td>“abc.png” or “abc.eps” to save the figure to a file.</td>
</tr>
<tr class="row-odd"><td>size_kwargs</td>
<td>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</td>
</tr>
<tr class="row-even"><td>ax_grid</td>
<td>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</td>
</tr>
<tr class="row-odd"><td>tight_layout</td>
<td>True to call fig.tight_layout (default: False)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.get_ax_fig_plt">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">get_ax_fig_plt</code><span class="sig-paren">(</span><em>ax=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pymatgen/util/plotting.html#get_ax_fig_plt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.get_ax_fig_plt" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function used in plot functions supporting an optional Axes argument.
If ax is None, we build the <cite>matplotlib</cite> figure and create the Axes else
we return the current active figure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> – keyword arguments are passed to plt.figure if ax is not None.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Axes</span></code> object
figure: matplotlib figure
plt: matplotlib pyplot module.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ax</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.get_ax3d_fig_plt">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">get_ax3d_fig_plt</code><span class="sig-paren">(</span><em>ax=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pymatgen/util/plotting.html#get_ax3d_fig_plt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.get_ax3d_fig_plt" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function used in plot functions supporting an optional Axes3D
argument. If ax is None, we build the <cite>matplotlib</cite> figure and create the
Axes3D else we return the current active figure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> – keyword arguments are passed to plt.figure if ax is not None.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">Axes</span></code> object
figure: matplotlib figure
plt: matplotlib pyplot module.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ax</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.data_from_cplx_mode">
<code class="descclassname">abipy.tools.plotting.</code><code class="descname">data_from_cplx_mode</code><span class="sig-paren">(</span><em>cplx_mode</em>, <em>arr</em>, <em>tol=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#data_from_cplx_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.data_from_cplx_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data from the numpy array <code class="docutils literal"><span class="pre">arr</span></code> depending on the values of <code class="docutils literal"><span class="pre">cplx_mode</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cplx_mode</strong> – Possible values in (“re”, “im”, “abs”, “angle”)
“re” for the real part,
“im” for the imaginary part.
“all” for both re and im.
“abs” means that the absolute value of the complex number is shown.
“angle” will display the phase of the complex number in radians.</li>
<li><strong>tol</strong> – If not None, values below tol are set to zero. Cannot be used with “angle”</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.tensors">
<span id="tensors-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">tensors</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.tensors" title="Permalink to this headline">¶</a></h2>
<p>This modules provides subclasses of pymatgen tensor objects.</p>
<dl class="class">
<dt id="abipy.tools.tensors.Stress">
<em class="property">class </em><code class="descclassname">abipy.tools.tensors.</code><code class="descname">Stress</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#Stress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.Stress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://pymatgen.org/pymatgen.analysis.elasticity.stress.html#pymatgen.analysis.elasticity.stress.Stress" title="(in pymatgen v2018.9.12)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.analysis.elasticity.stress.Stress</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Stress tensor. rank2 symmetric tensor with shape [3, 3].</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-bef67ce883d9a2caad752ac8cfa8b19f23a8586f.png" alt="Inheritance diagram of Stress" usemap="#inheritancee0818c4a88" class="inheritance"/>
<map id="inheritancee0818c4a88" name="inheritancee0818c4a88">
<area shape="rect" id="node1" href="#abipy.tools.tensors.Stress" target="_top" title="Stress tensor. rank2 symmetric tensor with shape [3, 3]." alt="" coords="658,18,765,33"/>
<area shape="rect" id="node2" title="This class extends SquareTensor as a representation of the" alt="" coords="463,18,628,33"/>
<area shape="rect" id="node3" title="This is a mix&#45;in base class specifying an API for msonable objects. MSON" alt="" coords="3,3,99,18"/>
<area shape="rect" id="node6" title="Base class for doing useful general operations on Nth order tensors," alt="" coords="128,18,253,33"/>
<area shape="rect" id="node4" title="ndarray(shape, dtype=float, buffer=None, offset=0," alt="" coords="17,33,85,48"/>
<area shape="rect" id="node5" title="Base class for doing useful general operations on second rank tensors" alt="" coords="282,18,433,33"/>
</map>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.DielectricTensor">
<em class="property">class </em><code class="descclassname">abipy.tools.tensors.</code><code class="descname">DielectricTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#DielectricTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.DielectricTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.SquareTensor" title="(in pymatgen v2018.9.12)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.core.tensors.SquareTensor</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Subclass of <code class="xref py py-class docutils literal"><span class="pre">pymatgen.analysis.elasticity.tensors.Tensor</span></code> describing a dielectric tensor.
rank2 symmetric tensor with shape [3, 3].</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-f7360ca53631a096888f935eed846356cd5753b3.png" alt="Inheritance diagram of DielectricTensor" usemap="#inheritance9126c67f60" class="inheritance"/>
<map id="inheritance9126c67f60" name="inheritance9126c67f60">
<area shape="rect" id="node1" href="#abipy.tools.tensors.DielectricTensor" target="_top" title="Subclass of |pmg&#45;Tensor| describing a dielectric tensor." alt="" coords="584,23,764,42"/>
<area shape="rect" id="node2" title="Base class for doing useful general operations on second rank tensors" alt="" coords="356,23,547,42"/>
<area shape="rect" id="node3" title="This is a mix&#45;in base class specifying an API for msonable objects. MSON" alt="" coords="4,4,124,23"/>
<area shape="rect" id="node5" title="Base class for doing useful general operations on Nth order tensors," alt="" coords="162,23,319,42"/>
<area shape="rect" id="node4" title="ndarray(shape, dtype=float, buffer=None, offset=0," alt="" coords="22,42,107,60"/>
</map>
<dl class="method">
<dt id="abipy.tools.tensors.DielectricTensor.reflectivity">
<code class="descname">reflectivity</code><span class="sig-paren">(</span><em>n1=1</em>, <em>tol=1e-06</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/tensors.html#DielectricTensor.reflectivity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.DielectricTensor.reflectivity" title="Permalink to this definition">¶</a></dt>
<dd><p>If the tensor is diagonal (with off diagonal elements smaller than tol)
returns the three components of the reflectivity</p>
<blockquote>
<div><span class="math">\(|n1 - n2| / | n1 + n2 |\)</span></div></blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.ZstarTensor">
<em class="property">class </em><code class="descclassname">abipy.tools.tensors.</code><code class="descname">ZstarTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#ZstarTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.ZstarTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.SquareTensor" title="(in pymatgen v2018.9.12)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.core.tensors.SquareTensor</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Born effective charge tensor (for a single atom).</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-c7f774777ea559b20a078a8e5fc0b5038391950a.png" alt="Inheritance diagram of ZstarTensor" usemap="#inheritance44d2641f3b" class="inheritance"/>
<map id="inheritance44d2641f3b" name="inheritance44d2641f3b">
<area shape="rect" id="node1" href="#abipy.tools.tensors.ZstarTensor" target="_top" title="Born effective charge tensor (for a single atom)." alt="" coords="599,24,764,43"/>
<area shape="rect" id="node2" title="Base class for doing useful general operations on second rank tensors" alt="" coords="365,24,560,43"/>
<area shape="rect" id="node3" title="This is a mix&#45;in base class specifying an API for msonable objects. MSON" alt="" coords="4,4,127,24"/>
<area shape="rect" id="node5" title="Base class for doing useful general operations on Nth order tensors," alt="" coords="166,24,327,43"/>
<area shape="rect" id="node4" title="ndarray(shape, dtype=float, buffer=None, offset=0," alt="" coords="22,43,110,62"/>
</map>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.NLOpticalSusceptibilityTensor">
<em class="property">class </em><code class="descclassname">abipy.tools.tensors.</code><code class="descname">NLOpticalSusceptibilityTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#NLOpticalSusceptibilityTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.Tensor" title="(in pymatgen v2018.9.12)"><code class="xref py py-class docutils literal"><span class="pre">pymatgen.core.tensors.Tensor</span></code></a></p>
<p>Subclass of <code class="xref py py-class docutils literal"><span class="pre">pymatgen.analysis.elasticity.tensors.Tensor</span></code> containing the non-linear optical susceptibility tensor.</p>
<p class="rubric">Inheritance Diagram</p>
<img src="../_images/inheritance-e110d9b3aeac9bdde731c4f32368a9db84f36f79.png" alt="Inheritance diagram of NLOpticalSusceptibilityTensor" usemap="#inheritance32ca961597" class="inheritance"/>
<map id="inheritance32ca961597" name="inheritance32ca961597">
<area shape="rect" id="node1" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor" target="_top" title="Subclass of |pmg&#45;Tensor| containing the non&#45;linear optical susceptibility tensor." alt="" coords="453,29,763,53"/>
<area shape="rect" id="node2" title="Base class for doing useful general operations on Nth order tensors," alt="" coords="206,29,405,53"/>
<area shape="rect" id="node3" title="This is a mix&#45;in base class specifying an API for msonable objects. MSON" alt="" coords="5,5,158,29"/>
<area shape="rect" id="node4" title="ndarray(shape, dtype=float, buffer=None, offset=0," alt="" coords="27,53,136,77"/>
</map>
<dl class="classmethod">
<dt id="abipy.tools.tensors.NLOpticalSusceptibilityTensor.from_file">
<em class="property">classmethod </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/tensors.html#NLOpticalSusceptibilityTensor.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the tensor from an anaddb.nc netcdf file containing <code class="docutils literal"><span class="pre">dchide</span></code>.
This requires to run anaddb with <code class="docutils literal"><span class="pre">tnlflag</span></code> &gt; 0</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.text">
<span id="text-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal"><span class="pre">text</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.text" title="Permalink to this headline">¶</a></h2>
<p>Utilities for working with strings and text.</p>
<dl class="function">
<dt id="abipy.tools.text.tonumber">
<code class="descclassname">abipy.tools.text.</code><code class="descname">tonumber</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#tonumber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.tonumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert string to number, raise ValueError if s cannot be converted.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.text.nums_and_text">
<code class="descclassname">abipy.tools.text.</code><code class="descname">nums_and_text</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#nums_and_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.nums_and_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Split line into (numbers, text).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.text.rreplace">
<code class="descclassname">abipy.tools.text.</code><code class="descname">rreplace</code><span class="sig-paren">(</span><em>s</em>, <em>old</em>, <em>new</em>, <em>occurrence</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#rreplace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.rreplace" title="Permalink to this definition">¶</a></dt>
<dd><p>replace old with new in string but, instead of starting from the beginning
as replace does, starting from the end.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;1232425&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;123 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1 3 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1 3 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1232425&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, M. Giantomassi and the AbiPy group.<br/>
      Last updated on Sep 18, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>