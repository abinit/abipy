

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Documenting AbiPy &mdash; abipy 0.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_style.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script> 
    
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Coding guide" href="coding_guide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> abipy
          

          
          </a>

          
            
            
              <div class="version">
                0.9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphical_interface.html">Graphical interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow_gallery/index.html">Flow Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="flows_howto.html">Flows How-To</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_guide.html">Coding guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documenting AbiPy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#organization-of-documentation">Organization of documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formatting">Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docstrings">Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dynamically-generated-figures">Dynamically generated figures</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">abipy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Documenting AbiPy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documenting-abipy">
<span id="id1"></span><h1><a class="toc-backref" href="#contents">Documenting AbiPy</a><a class="headerlink" href="#documenting-abipy" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#documenting-abipy" id="id3">Documenting AbiPy</a></p>
<ul>
<li><p><a class="reference internal" href="#organization-of-documentation" id="id4">Organization of documentation</a></p></li>
<li><p><a class="reference internal" href="#formatting" id="id5">Formatting</a></p></li>
<li><p><a class="reference internal" href="#docstrings" id="id6">Docstrings</a></p></li>
<li><p><a class="reference internal" href="#dynamically-generated-figures" id="id7">Dynamically generated figures</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="organization-of-documentation">
<h2><a class="toc-backref" href="#contents">Organization of documentation</a><a class="headerlink" href="#organization-of-documentation" title="Permalink to this headline">¶</a></h2>
<p>The AbiPy documentation is generated from ReStructured Text using the <a class="reference external" href="http://sphinx.pocoo.org">Sphinx</a> documentation generation tool.
The documentation sources are in the <code class="file docutils literal notranslate"><span class="pre">~/docs/</span></code> directory in the repository.
Major items:</p>
<ul class="simple">
<li><p>index.rst - the top level include document for AbiPy docs</p></li>
<li><p>api - placeholders to automatically generate the api documentation</p></li>
<li><p>scripts - documentation for scripts</p></li>
<li><p>flow_gallery/gallery - automatically generated by sphinx-gallery</p></li>
<li><p>workflows - Documentation about Abinit flows/works/tasks and TaskManager</p></li>
<li><p>README.rst - the present file</p></li>
<li><p>conf.py - the sphinx configuration file</p></li>
<li><p>_static - used by the sphinx build system</p></li>
</ul>
<p>The main entry point is <code class="file docutils literal notranslate"><span class="pre">docs/index.rst</span></code>, which pulls in the files
for the users guide, developers guide, api reference.
The actual ReStructured Text files for the APIs of the subpackages, for the scripts and for the workflows (resp.) are kept
in <code class="file docutils literal notranslate"><span class="pre">docs/api</span></code>, <code class="file docutils literal notranslate"><span class="pre">docs/scripts</span></code> and <code class="file docutils literal notranslate"><span class="pre">docs/workflows</span></code> (resp.).</p>
<p>Additional files can be added to the various guides by including their base
file name (the <code class="docutils literal notranslate"><span class="pre">.rst</span></code> extension is not necessary) in the table of contents.
It is also possible to include other documents through the use of an include
statement, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">include</span><span class="p">::</span> <span class="o">../../</span><span class="n">TODO</span>
</pre></div>
</div>
<p>The output produced by Sphinx can be configured by editing the <code class="file docutils literal notranslate"><span class="pre">conf.py</span></code> file located in the <code class="file docutils literal notranslate"><span class="pre">docs/</span></code>.
Before building the documentation, you need to install the sphinx extensions listed
in <code class="file docutils literal notranslate"><span class="pre">abipy/docs/requirements.txt</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">abipy</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>To build the HTML documentation, install sphinx then type <code class="docutils literal notranslate"><span class="pre">make</span></code> that will execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sphinx</span><span class="o">-</span><span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">html</span> <span class="o">-</span><span class="n">d</span> <span class="n">_build</span><span class="o">/</span><span class="n">doctrees</span> <span class="o">.</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span>
</pre></div>
</div>
<p>Remember to issue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">READTHEDOCS</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>before running <code class="docutils literal notranslate"><span class="pre">make</span></code> to activate the generation of the thumbnails in <code class="file docutils literal notranslate"><span class="pre">abipy/examples/flows</span></code>.</p>
<p>The documentation is produced in <code class="file docutils literal notranslate"><span class="pre">_build/html</span></code>.
Use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">open</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>to open the homepage in your browser.</p>
<p>You can run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">help</span></code> to see information on all possible make targets.</p>
<p>Use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">ghp_import</span><span class="o">.</span><span class="n">py</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
<p>to deploy to gh-pages (only for project leader).</p>
</div>
<div class="section" id="formatting">
<span id="formatting-abipy-docs"></span><h2><a class="toc-backref" href="#contents">Formatting</a><a class="headerlink" href="#formatting" title="Permalink to this headline">¶</a></h2>
<p>The Sphinx website contains plenty of <a class="reference external" href="http://www.sphinx-doc.org/en/master/">documentation</a> concerning ReST markup and
working with Sphinx in general.
Here are a few additional things to keep in mind:</p>
<ul>
<li><p>Please familiarize yourself with the Sphinx directives for <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html?highlight=inline#inline-markup">inline markup</a>.
Abipy’s documentation makes heavy use of cross-referencing and other semantic markup.
Several aliases are defined in <code class="file docutils literal notranslate"><span class="pre">abipy/docs/links.rst</span></code> and are automatically
included in each <code class="docutils literal notranslate"><span class="pre">rst</span></code> file via <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html#confval-rst_epilog">rst_epilog</a></p></li>
<li><p>Mathematical expressions can be rendered with <a class="reference external" href="https://www.mathjax.org/">mathjax</a> in html.
For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">:math:`\sin(x_n^2)`</span></code> yields: <span class="math notranslate nohighlight">\(\sin(x_n^2)\)</span>, and:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">math</span><span class="p">::</span>

  \<span class="n">int_</span><span class="p">{</span><span class="o">-</span>\<span class="n">infty</span><span class="p">}</span><span class="o">^</span><span class="p">{</span>\<span class="n">infty</span><span class="p">}</span>\<span class="n">frac</span><span class="p">{</span><span class="n">e</span><span class="o">^</span><span class="p">{</span><span class="n">i</span>\<span class="n">phi</span><span class="p">}}{</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span>\<span class="n">frac</span><span class="p">{</span><span class="n">e</span><span class="o">^</span><span class="p">{</span><span class="n">i</span>\<span class="n">phi</span><span class="p">}}{</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">}}</span>
</pre></div>
</div>
<p>yields:</p>
<div class="math notranslate nohighlight">
\[\int_{-\infty}^{\infty}\frac{e^{i\phi}}{1+x^2\frac{e^{i\phi}}{1+x^2}}\]</div>
</li>
<li><p>Bibtex citations are supported via the
<a class="reference external" href="https://sphinxcontrib-bibtex.readthedocs.io/en/latest/">sphinxcontrib-bibtex extension</a>
The bibtext entries are declared in the <code class="file docutils literal notranslate"><span class="pre">abipy/docs/refs.bib</span></code> file.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>See :cite:`Gonze2016` for a brief description of recent developments in ABINIT.
</pre></div>
</div>
<p>yelds: See <a class="bibtex reference internal" href="zzbiblio.html#gonze2016" id="id2">[Gonze2016]</a> for a brief description of recent developments in ABINIT.</p>
<p>To add a new bibtex entry to the database, please use the <strong class="program">doi2bibtex</strong> tool
provided by the <a class="reference external" href="https://github.com/nschloe/betterbib">betterbib package</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doi2bibtex</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">doi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">10.1103</span><span class="o">/</span><span class="n">PhysRevB</span><span class="mf">.33.7017</span> <span class="o">&gt;&gt;</span> <span class="n">refs</span><span class="o">.</span><span class="n">bib</span>
</pre></div>
</div>
<p>then change the bibtex identifier (use the name of the first author and the publication year).</p>
</li>
<li><p>Interactive <a class="reference external" href="https://ipython.org/index.html">ipython</a> sessions can be illustrated in the documentation using the following directive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">sourcecode</span><span class="p">::</span> <span class="n">ipython</span>

  <span class="n">In</span> <span class="p">[</span><span class="mi">69</span><span class="p">]:</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>which would yield:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [69]: </span><span class="n">lines</span> <span class="o">=</span> <span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>Use the <em>note</em> and <em>warning</em> directives, sparingly, to draw attention to important comments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">note</span><span class="p">::</span>
   <span class="n">Here</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">note</span>
</pre></div>
</div>
<p>yields:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>here is a note</p>
</div>
<p>also:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>here is a warning</p>
</div>
</li>
<li><p>Use the <em>deprecated</em> directive when appropriate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">deprecated</span><span class="p">::</span> <span class="mf">0.98</span>
   <span class="n">This</span> <span class="n">feature</span> <span class="ow">is</span> <span class="n">obsolete</span><span class="p">,</span> <span class="n">use</span> <span class="n">something</span> <span class="k">else</span><span class="o">.</span>
</pre></div>
</div>
<p>yields:</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.98: </span>This feature is obsolete, use something else.</p>
</div>
</li>
<li><p>Use the <em>versionadded</em> and <em>versionchanged</em> directives, which have similar
syntax to the <em>deprecated</em> role:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">versionadded</span><span class="p">::</span> <span class="mf">0.2</span>
   <span class="n">The</span> <span class="n">transforms</span> <span class="n">have</span> <span class="n">been</span> <span class="n">completely</span> <span class="n">revamped</span><span class="o">.</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.2: </span>The transforms have been completely revamped.</p>
</div>
</li>
<li><p>The autodoc extension will handle index entries for the API, but additional
entries in the index need to be explicitly added.</p></li>
</ul>
</div>
<div class="section" id="docstrings">
<h2><a class="toc-backref" href="#contents">Docstrings</a><a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h2>
<p>In addition to the aforementioned formatting suggestions:</p>
<ul class="simple">
<li><p>Docstrings are written following the
<a class="reference external" href="http://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>.
We use the <a class="reference external" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/">napoleon</a> extension
to convert Google style docstrings to reStructuredText before Sphinx attempts to parse them.</p></li>
</ul>
</div>
<div class="section" id="dynamically-generated-figures">
<h2><a class="toc-backref" href="#contents">Dynamically generated figures</a><a class="headerlink" href="#dynamically-generated-figures" title="Permalink to this headline">¶</a></h2>
<p>Figures can be automatically generated from scripts and included in the docs.
It is not necessary to explicitly save the figure in the script, this will be done
automatically at build time to ensure that the code that is included runs and produces the advertised figure.</p>
<p>Any plots specific to the documentation should be added to the <code class="file docutils literal notranslate"><span class="pre">examples/plot/</span></code> directory and committed to git.</p>
<p><a class="reference external" href="https://github.com/sphinx-gallery/sphinx-gallery">sphinx-gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="coding_guide.html" class="btn btn-neutral float-left" title="Coding guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, M. Giantomassi and the AbiPy group.
      <span class="lastupdated">
        Last updated on Jun 16, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>