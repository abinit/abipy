<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Documenting AbiPy &#8212; abipy 0.3.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="_static/my_style.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Coding guide" href="coding_guide.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          abipy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow_gallery/index.html">Flow Gallery</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_guide.html">Coding guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documenting AbiPy</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Documenting AbiPy</a><ul>
<li><a class="reference internal" href="#organization-of-documentation">Organization of documentation</a></li>
<li><a class="reference internal" href="#formatting">Formatting</a></li>
<li><a class="reference internal" href="#docstrings">Docstrings</a></li>
<li><a class="reference internal" href="#dynamically-generated-figures">Dynamically generated figures</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="coding_guide.html" title="Previous Chapter: Coding guide"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Coding guide</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/README.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="documenting-abipy">
<span id="id1"></span><h1><a class="toc-backref" href="#contents">Documenting AbiPy</a><a class="headerlink" href="#documenting-abipy" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#documenting-abipy" id="id3">Documenting AbiPy</a><ul>
<li><a class="reference internal" href="#organization-of-documentation" id="id4">Organization of documentation</a></li>
<li><a class="reference internal" href="#formatting" id="id5">Formatting</a></li>
<li><a class="reference internal" href="#docstrings" id="id6">Docstrings</a></li>
<li><a class="reference internal" href="#dynamically-generated-figures" id="id7">Dynamically generated figures</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="organization-of-documentation">
<h2><a class="toc-backref" href="#contents">Organization of documentation</a><a class="headerlink" href="#organization-of-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation for AbiPy is generated from ReStructured Text using the <a class="reference external" href="http://sphinx.pocoo.org">Sphinx</a> documentation generation tool.
The documentation sources are found in the <code class="file docutils literal"><span class="pre">~/docs/</span></code> directory in the repository.</p>
<ul class="simple">
<li>index.rst - the top level include document for AbiPy docs</li>
<li>api - placeholders to automatically generate the api documentation</li>
<li>conf.py - the sphinx configuration</li>
<li>_static - used by the sphinx build system</li>
<li>_templates - used by the sphinx build system</li>
</ul>
<p>The main entry point is <code class="file docutils literal"><span class="pre">docs/index.rst</span></code>, which pulls in
the files for the users guide, developers guide, api reference.
The actual ReStructured Text files for the API are kept in <code class="file docutils literal"><span class="pre">docs/api</span></code>.</p>
<p>Additional files can be added to the various guides by including their base
file name (the <code class="docutils literal"><span class="pre">.rst</span></code> extension is not necessary) in the table of contents.
It is also possible to include other documents through the use of an include
statement, such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">include</span><span class="p">::</span> <span class="o">../../</span><span class="n">TODO</span>
</pre></div>
</div>
<p>The output produced by Sphinx can be configured by editing the <code class="file docutils literal"><span class="pre">conf.py</span></code> file located in the <code class="file docutils literal"><span class="pre">docs/</span></code>.
Before building the documentation, you need to install the sphinx extensions listed
in <code class="file docutils literal"><span class="pre">abipy/docs/requirements.txt</span></code> with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">abipy</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>To build the HTML documentation, install sphinx then type <code class="docutils literal"><span class="pre">make</span> <span class="pre">html</span></code> that will execute:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sphinx</span><span class="o">-</span><span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">html</span> <span class="o">-</span><span class="n">d</span> <span class="n">_build</span><span class="o">/</span><span class="n">doctrees</span> <span class="o">.</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span>
</pre></div>
</div>
<p>Remember to issue:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">READTHEDOCS</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>before running <code class="docutils literal"><span class="pre">make</span></code> to activate the generation of the thumbnails in <code class="file docutils literal"><span class="pre">abipy/examples/flows</span></code>.</p>
<p>The documentation is produced in <code class="file docutils literal"><span class="pre">_build/html</span></code>.</p>
<p>You can run <code class="docutils literal"><span class="pre">make</span> <span class="pre">help</span></code> to see information on all possible make targets.</p>
<p>Use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">ghp_import</span><span class="o">.</span><span class="n">py</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
<p>to deploy to gh-pages.</p>
</div>
<div class="section" id="formatting">
<span id="formatting-abipy-docs"></span><h2><a class="toc-backref" href="#contents">Formatting</a><a class="headerlink" href="#formatting" title="Permalink to this headline">¶</a></h2>
<p>The Sphinx website contains plenty of <a class="reference external" href="http://sphinx.pocoo.org/contents.html">documentation</a> concerning ReST markup and
working with Sphinx in general.
Here are a few additional things to keep in mind:</p>
<ul>
<li><p class="first">Please familiarize yourself with the Sphinx directives for <a class="reference external" href="http://sphinx.pocoo.org/markup/inline.html">inline markup</a>.
Abipy’s documentation makes heavy use of cross-referencing and other semantic markup.
Several aliases are defined in <code class="file docutils literal"><span class="pre">abipy/docs/links.rst</span></code> and are automatically
included in each <code class="docutils literal"><span class="pre">rst</span></code> file via <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html#confval-rst_epilog">rst_epilog</a></p>
</li>
<li><p class="first">Mathematical expressions can be rendered with <a class="reference external" href="https://www.mathjax.org/">mathjax</a> in html.
For example:</p>
<p><code class="docutils literal"><span class="pre">:math:`\sin(x_n^2)`</span></code> yields: <span class="math">\(\sin(x_n^2)\)</span>, and:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">math</span><span class="p">::</span>

  \<span class="n">int_</span><span class="p">{</span><span class="o">-</span>\<span class="n">infty</span><span class="p">}</span><span class="o">^</span><span class="p">{</span>\<span class="n">infty</span><span class="p">}</span>\<span class="n">frac</span><span class="p">{</span><span class="n">e</span><span class="o">^</span><span class="p">{</span><span class="n">i</span>\<span class="n">phi</span><span class="p">}}{</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span>\<span class="n">frac</span><span class="p">{</span><span class="n">e</span><span class="o">^</span><span class="p">{</span><span class="n">i</span>\<span class="n">phi</span><span class="p">}}{</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">}}</span>
</pre></div>
</div>
<p>yields:</p>
<div class="math">
\[\int_{-\infty}^{\infty}\frac{e^{i\phi}}{1+x^2\frac{e^{i\phi}}{1+x^2}}\]</div>
</li>
<li><p class="first">Bibtex citations are supported via the
<a class="reference external" href="https://sphinxcontrib-bibtex.readthedocs.io/en/latest/">sphinxcontrib-bibtex extension</a>
The bibtext entries are declared in the <code class="file docutils literal"><span class="pre">abipy/docs/refs.bib</span></code> file.
For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>See :cite:`Gonze2016` for a brief description of recent developments in ABINIT.
</pre></div>
</div>
<p>yelds: See <a class="reference internal" href="zzbiblio.html#gonze2016" id="id2">[GJAA+16]</a> for a brief description of recent developments in ABINIT.</p>
<p>To add a new bibtex entry to the database, please use the <strong class="program">doi2bibtex</strong> tool
provided by the <a class="reference external" href="https://github.com/nschloe/betterbib">betterbib package</a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">doi2bibtex</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">doi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">10.1103</span><span class="o">/</span><span class="n">PhysRevB</span><span class="o">.</span><span class="mf">33.7017</span> <span class="o">&gt;&gt;</span> <span class="n">refs</span><span class="o">.</span><span class="n">bib</span>
</pre></div>
</div>
<p>then change the bibtex identifier (use the name of the first author and the publication year).</p>
</li>
<li><p class="first">Interactive <a class="reference external" href="https://ipython.org/index.html">ipython</a> sessions can be illustrated in the documentation using the following directive:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">sourcecode</span><span class="p">::</span> <span class="n">ipython</span>

  <span class="n">In</span> <span class="p">[</span><span class="mi">69</span><span class="p">]:</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>which would yield:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [69]: </span><span class="n">lines</span> <span class="o">=</span> <span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p class="first">Use the <em>note</em> and <em>warning</em> directives, sparingly, to draw attention to important comments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">note</span><span class="p">::</span>
   <span class="n">Here</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">note</span>
</pre></div>
</div>
<p>yields:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">here is a note</p>
</div>
<p>also:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">here is a warning</p>
</div>
</li>
<li><p class="first">Use the <em>deprecated</em> directive when appropriate:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">deprecated</span><span class="p">::</span> <span class="mf">0.98</span>
   <span class="n">This</span> <span class="n">feature</span> <span class="ow">is</span> <span class="n">obsolete</span><span class="p">,</span> <span class="n">use</span> <span class="n">something</span> <span class="k">else</span><span class="o">.</span>
</pre></div>
</div>
<p>yields:</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.98: </span>This feature is obsolete, use something else.</p>
</div>
</li>
<li><p class="first">Use the <em>versionadded</em> and <em>versionchanged</em> directives, which have similar
syntax to the <em>deprecated</em> role:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">versionadded</span><span class="p">::</span> <span class="mf">0.2</span>
   <span class="n">The</span> <span class="n">transforms</span> <span class="n">have</span> <span class="n">been</span> <span class="n">completely</span> <span class="n">revamped</span><span class="o">.</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2: </span>The transforms have been completely revamped.</p>
</div>
</li>
<li><p class="first">The autodoc extension will handle index entries for the API, but additional
entries in the <a class="reference external" href="http://sphinx.pocoo.org/markup/para.html#index-generating-markup">index</a> need to be explicitly added.</p>
</li>
</ul>
</div>
<div class="section" id="docstrings">
<h2><a class="toc-backref" href="#contents">Docstrings</a><a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h2>
<p>In addition to the aforementioned formatting suggestions:</p>
<ul class="simple">
<li>Docstrings are written following the
<a class="reference external" href="http://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>.
We use the <a class="reference external" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/">napoleon</a> extension
to convert Google style docstrings to reStructuredText before Sphinx attempts to parse them.</li>
<li>Please limit the text width of docstrings to (around) 90 characters.</li>
<li>Keyword arguments should be described using a definition list.</li>
</ul>
</div>
<div class="section" id="dynamically-generated-figures">
<h2><a class="toc-backref" href="#contents">Dynamically generated figures</a><a class="headerlink" href="#dynamically-generated-figures" title="Permalink to this headline">¶</a></h2>
<p>Figures can be automatically generated from scripts and included in the docs.
It is not necessary to explicitly save the figure in the script, this will be done
automatically at build time to ensure that the code that is included runs and produces the advertised figure.</p>
<p>Any plots specific to the documentation should be added to the <code class="file docutils literal"><span class="pre">examples/plot/</span></code> directory and committed to git.</p>
<p><a class="reference external" href="https://github.com/sphinx-gallery/sphinx-gallery">sphinx-gallery</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, The AbiPy group.<br/>
      Last updated on Feb 22, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>